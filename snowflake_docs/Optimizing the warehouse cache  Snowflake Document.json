{
    "url": "https://docs.snowflake.com/en/user-guide/performance-query-warehouse-cache",
    "title": "Optimizing the warehouse cache | Snowflake Documentation",
    "paragraphs": [
        "This topic discusses how a warehouse owner or administrator can optimize a warehouse\u2019s cache in order to improve the performance of queries\nrunning on the warehouse.",
        "A running warehouse maintains a cache of table data that can be accessed by queries running on the same warehouse. This can improve the\nperformance of subsequent queries if they are able to read from the cache instead of from tables.",
        "See also Using Persisted Query Results, which explains how the results of specific queries may be cached and reused.",
        "Note",
        "You must have access to the shared SNOWFLAKE database to execute the diagnostic queries provided in this topic. By default, only the ACCOUNTADMIN role has the privileges needed to execute the queries.",
        "The following query provides the percentage of data scanned from cache, aggregated across all queries and broken out by warehouse.",
        "If you have queries that can benefit from scanning data from the cache (e.g. frequent, similar queries) and the percentage of data scanned\nfrom cache is low, you might see a performance boost by optimizing the cache.",
        "The auto-suspend setting of the warehouse can have a direct impact on query performance because the cache is dropped when the warehouse\nis suspended. If a warehouse is running frequent and similar queries, it might not make sense to suspend the warehouse in between queries\nbecause the cache might be dropped before the next query is executed.",
        "You can use the following general guidelines when setting the auto-suspension time limit:",
        "For tasks, Snowflake recommends immediate suspension.",
        "For DevOps, DataOps, and Data Science use cases, Snowflake recommends setting auto-suspension to approximately 5 minutes because the cache is\nnot as important for ad-hoc and unique queries.",
        "For query warehouses, for example BI and SELECT use cases, Snowflake recommends setting auto-suspend to at least 10 minutes to\nmaintain the cache for users.",
        "Keep in mind that a running warehouse consumes credits even if it is not processing queries. Be sure that your auto-suspend setting\nmatches your workload. For example, if a warehouse executes a query every 30 minutes, it does not make sense to set the auto-suspend\nsetting to 10 minutes. The warehouse will consume credits while sitting idle without gaining the benefits of a cache because it will be\ndropped before the next query executes.",
        "To change how much time must elapse before a warehouse is suspended and its cache dropped:",
        "Sign in to Snowsight.",
        "Navigate to Admin \u00bb Warehouses.",
        "Find the warehouse, and select \u2026 \u00bb Edit.",
        "Ensure that Auto Suspend is turned on.",
        "In the Suspend After (min) field, enter the number of minutes that must elapse before the warehouse is suspended.",
        "Select Save Warehouse.",
        "Use the ALTER WAREHOUSE command to change the auto-suspend time limit, which is specified in seconds, not\nminutes. For example:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}