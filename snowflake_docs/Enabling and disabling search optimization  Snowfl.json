{
    "url": "https://docs.snowflake.com/en/user-guide/search-optimization/enabling",
    "title": "Enabling and disabling search optimization | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "This feature requires Enterprise Edition (or higher). To inquire about upgrading, please contact Snowflake Support.",
        "To enable search optimization, use a role that has the necessary privileges, then enable it for an entire table or\nspecific columns using the ALTER TABLE \u2026\nADD SEARCH OPTIMIZATION command.",
        "To add, configure, or remove search optimization for a table, you must:",
        "Have OWNERSHIP privilege on the table.",
        "Have ADD SEARCH OPTIMIZATION privilege on the schema that contains the table. To grant this privilege:",
        "To use the search optimization service for a query, you just need the SELECT privilege on the table.",
        "You don\u2019t need any additional privileges. Because SEARCH OPTIMIZATION is a table property, it is automatically\ndetected and used (if appropriate) when querying a table.",
        "Note",
        "Adding search optimization to a large table (a table containing terabytes (TB) or more of data) might result in an immediate\nincrease in credit consumption over a short period of time.",
        "When you add search optimization to a table, the maintenance service immediately starts building the search access paths for the\ntable in the background. If the table is large, the maintenance service might massively parallelize this work, which can result\nin increased costs over a short period of time.",
        "Before you add search optimization to a large table,\nget an estimate of these costs so that you know what to expect.",
        "When you enable search optimization, you have a choice of enabling it for a whole table or for specific columns in the\ntable.",
        "Enabling search optimization for a whole table enables it for point-lookup queries on all eligible columns.",
        "To enable search optimization for a whole table, use the ALTER TABLE \u2026\nADD SEARCH OPTIMIZATION command without the ON clause.",
        "Enabling search optimization for specific columns avoids spending credits on creating search access paths for columns\nthat you don\u2019t often use in queries, and also allows you to select additional types of queries to be optimized for\neach column, potentially further increasing performance.",
        "To enable search optimization for specific columns, specifying the types of queries to be optimized, use the\nON clause in the ALTER TABLE \u2026 ADD SEARCH OPTIMIZATION command.\nIn the ON clause in ADD SEARCH OPTIMIZATION, you specify which columns should be enabled for search optimization. When enabling\nsearch optimization for a given column, you can also specify a search method (e.g. EQUALITY for equality and IN searches,\nGEO for GEOGRAPHY searches, or SUBSTRING for substring searches). You can enable more than one search method on the same column.",
        "In general, enabling search optimization only for specific columns is the best practice.",
        "The following sections explain how to configure search optimization for a table:",
        "Enabling search optimization for specific columns",
        "Enabling search optimization for an entire table",
        "After you have configured search optimization, you can inspect your configuration to make sure it is correct.",
        "Verifying that a table is configured for search optimization",
        "You can remove search optimization from specific columns or whole tables when you have discovered that search\noptimization does not provide enough benefit.",
        "Removing search optimization from specific columns or the entire table",
        "To configure search optimization for a specific column, use the\nALTER TABLE \u2026\nADD SEARCH OPTIMIZATION command with the ON clause.",
        "Note",
        "When running this command, use a role that has\nthe privileges to add search optimization to the table.",
        "The ON clause specifies that you want to configure search optimization for specific columns. For details on the syntax, see\nthe section on ALTER TABLE \u2026 ADD SEARCH OPTIMIZATION.",
        "Note",
        "If you just want to apply search optimization for equality and IN predicates to all applicable columns in the table, see\nEnabling search optimization for an entire table.",
        "After running this command, you can\nverify that the columns have been configured for search optimization.",
        "The next sections contain examples that demonstrate how to specify the configuration for search optimization:",
        "Example: Full-text search optimization on specific columns",
        "Example: Supporting equality and IN predicates for specific columns",
        "Example: Supporting equality and IN predicates for all applicable columns",
        "Example: Supporting different types of predicates",
        "Example: Supporting different predicates on the same column",
        "Example: Supporting equality and IN predicates for an element in a VARIANT",
        "Example: Supporting geospatial functions",
        "You can perform text searches by using the SEARCH and SEARCH_IP\nfunctions. To improve query execution performance when these functions are used, enable FULL_TEXT search optimization. You can\nenable FULL_TEXT search optimization on a table by using different subsets of the columns in the table and different text\nanalyzers. For information about the behavior of different analyzers, see How search terms are tokenized.",
        "Enable FULL_TEXT search optimization on a set of columns in a table by using the following syntax.",
        "The columns you specify must be VARCHAR, VARIANT, ARRAY, or OBJECT columns. Columns with other data types aren\u2019t supported.\nIn addition, you can specify individual paths to columns of type VARIANT,\nARRAY, or OBJECT.",
        "You can specify the wildcard asterisk character (*) instead of a list of columns. In this case, the optimization is\nautomatically enabled on all the columns of supported types.",
        "If specified, the ANALYZER => 'analyzer_name' argument must be one of the choices that is documented for the\nSEARCH function. If you don\u2019t specify an analyzer, the DEFAULT_ANALYZER is used.",
        "Note",
        "For query execution with the SEARCH function to be optimized, the analyzer specified for the search optimization\nin the ALTER TABLE command must be the same as the analyzer specified in the SEARCH function call. If the analyzers don\u2019t\nmatch, the search access path won\u2019t be selected.",
        "This example enables FULL_TEXT search optimization on three VARCHAR columns that might be the targets of a\nSEARCH query.",
        "To describe the search optimization configuration for this table, run the following command:",
        "For more information, see Displaying the search optimization configuration for a table.",
        "This example enables FULL_TEXT search optimization on a VARCHAR column that might be the target of a\nSEARCH_IP query.",
        "To remove the search optimization configuration, run one of the following commands:",
        "In the third ALTER TABLE \u2026 DROP SEARCH OPTIMIZATION command, 1, 2, 3 refers to the expression IDs\nreturned by the DESCRIBE command.",
        "You can also modify a FULL_TEXT search optimization configuration by dropping a subset of the columns (by name or\nexpression ID). For more information, see Removing search optimization from specific columns or the entire table.",
        "For more examples that enable and drop FULL_TEXT search optimization, see\nExamples of ADD (and DROP) FULL_TEXT search optimization.",
        "To optimize searches with equality predicates for the columns c1, c2, and c3 in the table t1, execute the\nfollowing statement:",
        "You can also specify the same search method more than once in the ON clause:",
        "To optimize searches with equality predicates for all applicable columns in the table, execute the following statement:",
        "Note the following:",
        "As explained in the\ndescription of the syntax for the search method and target,\nfor a given method, you cannot specify both an asterisk and specific columns.",
        "Although omitting the ON clause also configures search optimization for equality and IN predicates on all applicable\ncolumns in the table, there are differences between specifying and omitting the ON clause. See\nEnabling search optimization for an entire table.",
        "To optimize searches with equality predicates for the column c1 and c2 and substring searches for the column c3,\nexecute the following statement:",
        "To optimize searches for both equality predicates and substring predicates on the same column, c1, execute the following statement:",
        "To optimize searches with equality predicates on the VARIANT element uuid nested in the element user in the VARIANT column\nc4, execute the following statement:",
        "To optimize searches with predicates that use geospatial functions with GEOGRAPHY objects in the c1 column, execute the following\nstatement:",
        "To specify EQUALITY for all columns of the supported data types (except for VARIANT and GEOGRAPHY), use the\nALTER TABLE \u2026\nADD SEARCH OPTIMIZATION command without the ON clause.",
        "Note",
        "When running this command, use a role that has\nthe privileges to add search optimization to the table.",
        "For example:",
        "For more information on the syntax, see\nthe section on search optimization in ALTER TABLE.",
        "After running this command, you can\nverify that the columns have been configured for search optimization.",
        "After you run ALTER TABLE \u2026 ADD SEARCH OPTIMIZATION command without the ON clause, any columns that are subsequently added to the table\nwill also be configured for optimization on EQUALITY.",
        "However, if you execute ALTER TABLE \u2026 { ADD | DROP } SEARCH OPTIMIZATION with the ON clause on the same table, any\ncolumns that are subsequently added to the table won\u2019t be configured for EQUALITY automatically. You must execute\nALTER TABLE \u2026 ADD SEARCH OPTIMIZATION ON \u2026 to configure these newly added columns for EQUALITY.",
        "To verify that the table and its columns have been configured for search optimization:",
        "Display the search optimization configuration for the\ntable and its columns.",
        "Run the SHOW TABLES command to verify that search optimization has been added and to determine how\nmuch of the table has been optimized.",
        "For example:",
        "In the output from this command:",
        "Verify that SEARCH_OPTIMIZATION is ON, which indicates that search optimization has been added.",
        "Check the value of SEARCH_OPTIMIZATION_PROGRESS. This specifies the percentage of the table that has been optimized so far.",
        "When search optimization is first added to a table, the performance benefits don\u2019t appear immediately.\nThe search optimization service starts populating data in the background. The benefits appear increasingly as\nthe maintenance catches up to the current state of the table.",
        "Before you run a query to verify that search optimization is working, wait until this shows that the table has been fully\noptimized.",
        "Run a query to verify that search optimization is working.",
        "Note that the Snowflake optimizer automatically chooses when to use the search optimization service for a particular query.\nUsers cannot control which queries search optimization is used for.",
        "Choose a query that the search optimization service is designed to optimize.\nSee Identifying queries that can benefit from search optimization.",
        "In the web UI, view the query plan for this query, and verify that the query node \u201cSearch Optimization Access\u201d is part of the\nquery plan.",
        "To display the search optimization configuration for a table, use the DESCRIBE SEARCH OPTIMIZATION command.",
        "For example, suppose that you execute the following statement to configure search optimization for a column:",
        "Executing DESCRIBE SEARCH OPTIMIZATION produces the following output:",
        "You can remove the search optimization configuration for specific columns, or you can remove the SEARCH OPTIMIZATION property\nfrom the entire table.",
        "Dropping search optimization for specific columns",
        "Removing search optimization from the table",
        "To drop the search optimization configuration for specific columns, use the following command:\nALTER TABLE \u2026\nDROP SEARCH OPTIMIZATION command with the ON clause.",
        "For example, suppose that executing the DESCRIBE SEARCH OPTIMIZATION command prints the following expressions:",
        "To drop search optimization for substrings on the column c2, execute the following statement:",
        "To drop search optimization for all methods on the column c5, execute the following statement:",
        "Because the column c5 is configured to optimize equality and substring searches, the statement above drops the configuration\nfor equality and substring searches for c5.",
        "To drop search optimization for equality on the column c1 and to drop the configuration specified by the expression IDs 6\nand 8, execute the following statement:",
        "For more information on the syntax, see\nthe section on ALTER TABLE \u2026 DROP SEARCH OPTIMIZATION.",
        "To remove the SEARCH OPTIMIZATION property from a table:",
        "Switch to a role that has the privileges to remove search optimization from the table.",
        "Run the ALTER TABLE \u2026\nDROP SEARCH OPTIMIZATION command without the ON clause:",
        "For example:",
        "For more information, see\nthe section on ALTER TABLE \u2026 DROP SEARCH OPTIMIZATION.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}