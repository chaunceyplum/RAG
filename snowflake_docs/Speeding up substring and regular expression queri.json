{
    "url": "https://docs.snowflake.com/en/user-guide/search-optimization/substring-queries",
    "title": "Speeding up substring and regular expression queries with search optimization | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "This feature requires Enterprise Edition (or higher). To inquire about upgrading, please contact Snowflake Support.",
        "Search optimization can improve the performance of queries with predicates that search for substrings or use\nregular expressions in text or semi-structured data. For details on how substring searches work with semi-structured\ndata, see Speeding up queries of semi-structured data with search optimization.",
        "This capability includes predicates that use:",
        "LIKE",
        "LIKE ANY",
        "LIKE ALL",
        "ILIKE",
        "ILIKE ANY",
        "CONTAINS",
        "ENDSWITH",
        "STARTSWITH",
        "SPLIT_PART",
        "RLIKE",
        "REGEXP",
        "REGEXP_LIKE",
        "Note",
        "You must enable this feature for specific columns using the\nON clause in the ALTER TABLE \u2026 ADD SEARCH OPTIMIZATION\ncommand. (Enabling search optimization at the table level does not optimize substring search.) For example:",
        "Substring searches are not optimized if you omit the ON clause.",
        "The search optimization service can improve performance when searching for substrings that are 5 or more characters\nlong. (More selective substrings can result in better performance.)  The search optimization service does not\nuse search access paths for the following predicate because the substring is shorter than 5 characters:",
        "For the following predicate, the search optimization service can optimize this query, using search access paths to search for the\nsubstrings for SEARCH and OPTIMIZED. However, search access paths are not used for IS because the substring is shorter\nthan 5 characters.",
        "For queries that use RLIKE, REGEXP, and REGEXP_LIKE against text:",
        "The subject argument  must be a TEXT column in a table that has search optimization enabled.",
        "The pattern argument  must be a string constant.",
        "For regular expressions, the search optimization service works best when:",
        "The pattern contains at least one substring literal that is 5 or more characters long.",
        "The pattern specifies that the substring should appear at least once.",
        "For example, the following pattern specifies that string should appear one or more times in the subject:",
        "The search optimization service can improve the performance of queries with the following patterns because each predicate\nspecifies that a substring of 5 or more characters must appear at least once. (Note that the first example uses a\ndollar-quoted string constant to avoid escaping the backslash characters.)",
        "In contrast, search optimization does not use search access paths for queries with the following patterns:",
        "Patterns without any substrings:",
        "Patterns that only contain substrings shorter than 5 characters:",
        "Patterns that use the alternation operator where one option is a substring shorter than 5 characters:",
        "Patterns in which the substring is optional:",
        "Even when the substring literals are shorter than 5 characters, the search optimization service can still improve query\nperformance if expanding the regular expression produces a substring literal that is 5 characters or longer.",
        "For example, consider the pattern:",
        "In this example:",
        "Although the substring literals (e.g. st=, CA, etc) are shorter than 5 characters, the search optimization service\nrecognizes that the substring st=CA, st=AZ, or st=NV (each of which is 5 characters long) must appear in the text.",
        "Similarly, even though the substring literal --> is shorter than 5 characters, the search optimization service determines\nthat the substring -->--> (which is longer than 5 characters) must appear in the text.",
        "The search optimization service can use search access paths to match these substrings, which can improve the performance of the\nquery.",
        "Was this page helpful?",
        "Related content"
    ]
}