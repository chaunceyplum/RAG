{
    "url": "https://docs.snowflake.com/en/sql-reference/sql/create-api-integration",
    "title": "CREATE API INTEGRATION | Snowflake Documentation",
    "paragraphs": [
        "Creates a new API integration object in the account, or replaces an existing API integration.",
        "An API integration object stores information about a service reached via HTTPS API, including information about some of the following:",
        "A cloud platform provider (such as Amazon AWS).",
        "The type of service (such as when a cloud platform provider offers more than one type of proxy service).",
        "The identifier and access credentials for the external service that has sufficient privileges to use the\nservice. For example, on AWS, the role\u2019s ARN (Amazon resource name) serves as the identifier and access\ncredentials.",
        "When this user is granted appropriate privileges, Snowflake can use this user to access resources. For example, this might be an instance\nof the cloud platform\u2019s native HTTPS proxy service, for example, an instance of an Amazon API Gateway.",
        "An API integration object also specifies allowed (and optionally blocked) endpoints and resources on those services.",
        "ALTER API INTEGRATION , DROP INTEGRATION ,\nSHOW INTEGRATIONS , Writing external functions ,\nCREATE EXTERNAL FUNCTION",
        "The syntax is different for each external API.",
        "Note that aws_api_gateway or aws_private_api_gateway or aws_gov_api_gateway  or aws_gov_private_api_gateway should\nnot be in quotation marks.",
        "Note that azure_api_management should not be in quotation marks.",
        "Note that google_api_gateway should not be in quotation marks.",
        "Note that git_https_api should not be in quotation marks.",
        "Specifies the name of the API integration. This name follows the rules for Object identifiers.\nThe name should be unique among API integrations in your account.",
        "Specifies the HTTPS proxy service type. Valid values are:",
        "aws_api_gateway: for Amazon API Gateway using regional endpoints.",
        "aws_private_api_gateway: for Amazon API Gateway using private endpoints.",
        "aws_gov_api_gateway: for Amazon API Gateway using U.S. government GovCloud endpoints.",
        "aws_gov_private_api_gateway: for Amazon API Gateway using U.S. government GovCloud endpoints that are also private\nendpoints.",
        "For Amazon AWS, this is the ARN (Amazon resource name) of a cloud platform role.",
        "Explicitly limits external functions that use the integration to reference one or more HTTPS proxy\nservice endpoints (e.g. Amazon API Gateway) and resources within those proxies. Supports a comma-separated\nlist of URLs, which are treated as prefixes (for details, see below).",
        "Each URL in API_ALLOWED_PREFIXES = (...) is treated as a prefix. For example, if you specify:",
        "https://xyz.amazonaws.com/production/",
        "that means all resources under",
        "https://xyz.amazonaws.com/production/",
        "are allowed. For example the following is allowed:",
        "https://xyz.amazonaws.com/production/ml1",
        "To maximize security, you should restrict allowed locations as narrowly as practical.",
        "Specifies whether this API integration is enabled or disabled. If the API integration is disabled, any external function that relies\non it will not work.",
        "The value is case-insensitive.",
        "The default is TRUE.",
        "Specifies the name of the API integration. This name follows the rules for Object identifiers.\nThe name should be unique among API integrations in your account.",
        "Specifies that this integration is used with Azure API Management services. Do not use quotation marks around azure_api_management.",
        "Specifies the ID for your Office 365 tenant that all Azure API Management instances belong to. An API integration\ncan authenticate to only one tenant, and so the allowed and blocked locations must refer to API Management\ninstances that all belong to this tenant.",
        "To find your tenant ID, log into the Azure portal and\nclick Azure Active Directory \u00bb Properties.\nThe tenant ID is displayed in the Tenant ID field.",
        "The \u201cApplication (client) id\u201d of the Azure AD (Active Directory) app for your remote service.\nIf you followed the instructions in Creating external functions on Microsoft Azure,\nthen this is the Azure Function App AD Application ID that you recorded in the worksheet in those instructions.",
        "Explicitly limits external functions that use the integration to reference one or more HTTPS proxy\nservice endpoints (e.g. Azure API Management services) and resources within those proxies. Supports a comma-separated\nlist of URLs, which are treated as prefixes (for details, see below).",
        "Each URL in API_ALLOWED_PREFIXES = (...) is treated as a prefix. For example, if you specify:",
        "https://my-external-function-demo.azure-api.net/my-function-app-name",
        "that means all resources under",
        "https://my-external-function-demo.azure-api.net/my-function-app-name",
        "are allowed. For example the following is allowed:",
        "https://my-external-function-demo.azure-api.net/my-function-app-name/my-http-trigger-function",
        "To maximize security, you should restrict allowed locations as narrowly as practical.",
        "Specifies whether this API integration is enabled or disabled. If the API integration is disabled, any external function that relies\non it will not work.",
        "The value is case-insensitive.",
        "The default is TRUE.",
        "Specifies the name of the API integration. This name follows the rules for Object identifiers.\nThe name should be unique among API integrations in your account.",
        "Specifies that this integration is used with Google Cloud. The only valid value for this purpose is google_api_gateway.\nThe value must not be in quotation marks.",
        "This is used as the audience claim when generating the JWT (JSON Web Token) to authenticate to the Google API Gateway.\nFor more information about authenticating with Google, please see the Google service account\nauthentication documentation.",
        "Explicitly limits external functions that use the integration to reference one or more HTTPS proxy\nservice endpoints (e.g. Google Cloud API Gateways) and resources within those proxies. Supports a comma-separated\nlist of URLs, which are treated as prefixes (for details, see below).",
        "Each URL in API_ALLOWED_PREFIXES = (...) is treated as a prefix. For example, if you specify:",
        "https://my-external-function-demo.uc.gateway.dev/x",
        "that means all resources under",
        "https://my-external-function-demo.uc.gateway.dev/x",
        "are allowed. For example the following is allowed:",
        "https://my-external-function-demo.uc.gateway.dev/x/y",
        "To maximize security, you should restrict allowed locations as narrowly as practical.",
        "Specifies whether this API integration is enabled or disabled. If the API integration is disabled, any external function that relies\non it will not work.",
        "The value is case-insensitive.",
        "The default is TRUE.",
        "For an example, see Create an API integration for interacting with the repository API.",
        "Specifies the name of the API integration. This name follows the rules for Object identifiers.\nThe name should be unique among API integrations in your account.",
        "Specifies that this integration is used with CREATE GIT REPOSITORY to create an\nintegration with a Git repository. The only valid value for this purpose is git_https_api. The value must not be in\nquotation marks.",
        "Explicitly limits functions that use the integration to reference one or more HTTPS proxy service endpoints and resources within those\nproxies. Supports a comma-separated list of URLs, which are treated as prefixes.",
        "Snowflake supports using the following URLs:",
        "https://github.com",
        "https://gitlab.com",
        "https://bitbucket.org",
        "https://git-codecommit.amazonaws.com",
        "https://dev.azure.com",
        "Each URL in API_ALLOWED_PREFIXES = (...) is treated as a prefix. For example, if you specify:",
        "https://github.com/my-account",
        "that means all resources under",
        "https://github.com/my-account",
        "are allowed. For example the following is allowed:",
        "https://github.com/my-account/myproject",
        "To maximize security, you should restrict allowed locations as narrowly as practical.",
        "Specifies whether this API integration is enabled or disabled. If the API integration is disabled, the Git repository will not be accessible.",
        "The value is case-insensitive.",
        "The default is TRUE.",
        "Lists the endpoints and resources in the HTTPS proxy service that are not allowed to be called from Snowflake.",
        "The possible values for locations follow the same rules as for API_ALLOWED_PREFIXES above.",
        "API_BLOCKED_PREFIXES takes precedence over API_ALLOWED_PREFIXES. If a prefix matches both, then it is blocked.\nIn other words, Snowflake allows all values that match API_ALLOWED_PREFIXES except values that also\nmatch API_BLOCKED_PREFIXES.",
        "If a value is outside API_ALLOWED_PREFIXES, you do not need to explicitly block it.",
        "The API key (also called a \u201csubscription key\u201d).",
        "Specifies the secrets that UDF or procedure handler code can use when accessing the Git repository at the API_ALLOWED_PREFIXES value. You\nspecify a secret from this list when specifying Git credentials with the GIT_CREDENTIALS parameter.",
        "This parameter\u2019s value must be one of the following:",
        "One or more fully-qualified Snowflake secret names to allow any of the listed secrets.",
        "(Default) all to allow any secret.",
        "none to allow no secrets.",
        "The ALLOWED_API_AUTHENTICATION_INTEGRATIONS parameter can also specify allowed secrets. For more information, see\nUsage notes.",
        "For reference information about secrets, refer to CREATE SECRET.",
        "A description of the integration.",
        "A role used to execute this SQL command must have the following\nprivileges at a minimum:",
        "Privilege",
        "Object",
        "Notes",
        "CREATE INTEGRATION",
        "Account",
        "Only the ACCOUNTADMIN role has this privilege by default. The privilege can be granted to additional roles as needed.",
        "For instructions on creating a custom role with a specified set of privileges, see Creating custom roles.",
        "For general information about roles and privilege grants for performing SQL actions on\nsecurable objects, see Overview of Access Control.",
        "Only Snowflake roles with OWNERSHIP or USAGE privileges on the API integration can use the API integration directly\n(e.g. by creating an external function that specifies that API integration).",
        "An API integration object is tied to a specific cloud platform account and role within that account, but not\nto a specific HTTPS proxy URL. You can create more than one instance of an HTTPS proxy service in a cloud provider\naccount, and you can use the same API integration to authenticate to multiple proxy services in that account.",
        "Your Snowflake account can have multiple API integration objects, for example, for different cloud platform accounts.",
        "Multiple external functions can use the same API integration object, and thus the same HTTPS proxy service.",
        "Regarding metadata:",
        "Attention",
        "Customers should ensure that no personal data (other than for a User object), sensitive data, export-controlled data, or other regulated data is entered as metadata when using the Snowflake service. For more information, see Metadata fields in Snowflake.",
        "CREATE OR REPLACE <object> statements are atomic. That is, when an object is replaced, the old object is deleted and the new object is created in a single transaction.",
        "The following example shows creation of an API integration and use of that API integration in a subsequent\nCREATE EXTERNAL FUNCTION statement:",
        "For an example of an API integration used to integrate a Git repository, see Create an API integration for interacting with the repository API.",
        "Was this page helpful?",
        "On this page"
    ]
}