{
    "url": "https://docs.snowflake.com/en/user-guide/kafka-connector-protobuf",
    "title": "Loading protobuf data using the Snowflake Connector for Kafka | Snowflake Documentation",
    "paragraphs": [
        "This topic provides instructions for installing and configuring protocol buffers (protobuf) support in the Snowflake Connector for Kafka (\u201cKafka connector\u201d). Support for protobuf requires Kafka connector 1.5.0 (or higher).",
        "The Kafka connector supports the following versions of the protobuf converter:",
        "This version is supported by the Confluent package version of Kafka only.",
        "This version is supported by the open source software (OSS) Apache Kafka package. This version is also supported by the Confluent package version of Kafka; however, for ease of use, we suggest using the Confluent version instead.",
        "Install only one of these protobuf converters.",
        "Install the Kafka connector using the instructions in Installing and configuring the Kafka connector.",
        "Note",
        "The Confluent version of the Protobuf converter is available with Confluent version 5.5.0 (or higher).",
        "Open your Kafka configuration file (e.g. <kafka_dir>/config/connect-distributed.properties) in a text editor.",
        "Configure the converter properties in the file. For information about the Kafka connector properties in general, see Kafka configuration properties.",
        "For example:",
        "Save the file.",
        "Produce protobuf data from Kafka using the Confluent console protobuf producer, the source protobuf producer, or the Python producer.",
        "Example Python code located in GitHub demonstrates how to produce protobuf data from Kafka.",
        "This section provides instructions for installing and configuring the community version of the protobuf converter.",
        "In a terminal window, change to the directory where you want to store a clone of the GitHub repository for the protobuf converter.",
        "Execute the following command to clone the GitHub repository:",
        "Execute the following commands to build the 3.1.0 version of the converter using Apache Maven. Note that versions 2.3.0, 3.0.0, and 3.1.0 of the converter are supported by the Kafka connector:",
        "Note",
        "Maven must already be installed on your local machine.",
        "Maven builds a file named kafka-connect-protobuf-converter-<version>-jar-with-dependencies.jar in the current folder. This is the converter JAR file.",
        "Copy the compiled kafka-connect-protobuf-converter-<version>-jar-with-dependencies.jar file to the directory for your Kafka package version:",
        "<confluenct_dir>/share/java/kafka-serde-tools",
        "<apache_kafka_dir>/libs",
        "Compile the protobuf .proto file that defines your messages into a java file.",
        "For example, suppose your messages are defined in a file named sensor.proto. In a terminal window, execute the following command to compile the protocol buffers file. Specify the source directory for the application source code, the destination directory (for the .java file), and the path to your .proto file:",
        "A sample .proto file is available here: https://github.com/snowflakedb/snowflake-kafka-connector/blob/master/test/test_data/sensor.proto.",
        "The command generates a file named SensorReadingImpl.java in the specified destination directory.",
        "For more information, see the Google developer documentation",
        "Compile the generated SensorReadingImpl.java file from Step 2: Compiling Your .proto File along with the Project Object Model of the protobuf project structure.",
        "Open your .pom file from Step 2: Compiling Your .proto File in a text editor.",
        "Create an otherwise empty directory with a structure:",
        "Where the directory structure under src / main / java mirrors the package name in your .proto file (line 3).",
        "Copy the generated SensorReadingImpl.java file from Step 2: Compiling Your .proto File to the bottom folder in the directory structure.",
        "Create a file named pom.xml in the root of the protobuf_folder directory.",
        "Open the empty pom.xml file in a text editor. Copy the following example project model into the file and modify it:",
        "Where:",
        "Group ID segments of the package name specified in your .proto file. For example, if the package name is com.foo.bar.buz, then the group ID is com.foo.",
        "Artifact ID for the package that you choose. The artifact ID can be randomly picked.",
        "Version of the package that you choose. The version can be randomly picked.",
        "Version of the Java Runtime Environment (JRE) installed on your local machine.",
        "For example:",
        "In a terminal window, change to the root of the protobuf_folder directory. Execute the following command to compile the protobuf data JAR file from the files in the directory:",
        "Maven generates a file named <artifact_id>-<version>-jar-with-dependencies.jar in the protobuf_folder/target folder (e.g. kafka-test-protobuf-1.0.0-jar-with-dependencies.jar).",
        "Copy the compiled kafka-test-protobuf-1.0.0-jar-with-dependencies.jar file to the directory for your Kafka package version:",
        "<confluenct_dir>/share/java/kafka-serde-tools",
        "Copy the file to the directory in your $CLASSPATH environment variable.",
        "Open your Kafka configuration file (e.g. <kafka_dir>/config/connect-distributed.properties) in a text editor.",
        "Add the value.converter.protoClassName property to the file. This property specifies the protocol buffer class to use to deserialize messages (e.g. com.google.protobuf.Int32Value).",
        "Note",
        "Nested classes must be specified using the $ notation (e.g. com.blueapron.connect.protobuf.NestedTestProtoOuterClass$NestedTestProto).",
        "For example:",
        "For information about the Kafka connector properties in general, see Kafka configuration properties.",
        "For more information about protocol buffer classes, see the Google developer documentation referenced earlier in this topic.",
        "Save the file.",
        "Was this page helpful?",
        "On this page"
    ]
}