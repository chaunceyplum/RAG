{
    "url": "https://docs.snowflake.com/en/sql-reference/constructs/connect-by",
    "title": "CONNECT BY | Snowflake Documentation",
    "paragraphs": [
        "Query syntax",
        "Joins a table to itself to process hierarchical data in the table. The CONNECT BY subclause of the\nFROM clause iterates to process the data.",
        "For example, you can create a query that shows a \u201cparts explosion\u201d to\nrecursively list a component and the sub-components of that component.",
        "The Snowflake syntax for CONNECT BY is mostly compatible with the Oracle syntax.",
        "WITH",
        "The general form of a statement with CONNECT BY is similar to the following\n(some variations in order are allowed, but are not shown):",
        "This generally follows the rules for the projection clause of a SELECT statement.",
        "CONNECT BY queries allow some pseudo-columns.\nOne of those pseudo-columns is LEVEL, which indicates the current level\nof the hierarchy (where level 1 represents the top of the hierarchy).\nThe projection clause of the query can use LEVEL as a column.",
        "The data source is usually a table, but can be another table-like data source, such as a view, UDTF, etc.",
        "The predicate is an expression that selects the first \u201clevel\u201d of the\nhierarchy (e.g. the president of the company or the top-level component in\na parts explosion). The predicate should look similar to a\nWHERE clause, but without the keyword WHERE.",
        "See the Examples section (in this topic) for predicate examples.",
        "The CONNECT BY clause should contain one or more expressions similar to those\nused in joins. Specifically, a column in the \u201ccurrent\u201d level of the table\nshould refer to a column in the \u201cprior\u201d (higher) level of the table.",
        "For example, in a manager/employee hierarchy, the clause might look similar to:",
        "The keyword PRIOR indicates that the value should be taken from the\nprior (higher/parent) level.",
        "In this example, the current employee\u2019s manager_ID should match the prior level\u2019s employee_ID.",
        "The CONNECT BY clause can contain more than one such expression, for example:",
        "Each expression similar to the following should have exactly one occurrence of the keyword PRIOR:",
        "The keyword PRIOR may be on either the left-hand or right-hand side of the = sign. For example:",
        "or",
        "A CONNECT BY clause always joins a table to itself, not to another table.",
        "Some variations within the projection clause are valid. Although the syntax shows level_expression\noccurring after the column_list, the level expression(s) can occur in any order.",
        "The keyword PRIOR should occur exactly once in each CONNECT BY expression. PRIOR can occur on either\nthe left-hand side or the right-hand side of the expression, but not on both.",
        "A query with CONNECT BY may also contain one or both of the following:",
        "Filters in a WHERE clause.",
        "JOINs (which may be in either a FROM clause or\na WHERE clause).",
        "The order of evaluation is:",
        "JOINs (regardless of whether specified in the WHERE clause or the FROM clause).",
        "CONNECT BY",
        "Filters (other than JOIN filters).",
        "For example, filters in a WHERE clause are processed after the CONNECT BY.",
        "The Snowflake implementation of CONNECT BY is mostly compatible with the Oracle implementation; however,\nSnowflake does not support:",
        "NOCYCLE",
        "CONNECT_BY_ISCYCLE",
        "CONNECT_BY_ISLEAF",
        "Snowflake supports the function SYS_CONNECT_BY_PATH when used with the CONNECT BY clause.\nSYS_CONNECT_BY_PATH returns a string that contains the path from the root to the current element.\nAn example is included in the Examples section below.",
        "Snowflake supports the CONNECT_BY_ROOT operator when used with the CONNECT BY clause. The CONNECT_BY_ROOT\noperator allows the current level to use information from the root level of the hierarchy, even if the root level\nis not the immediate parent of the current level.\nAn example is included in the Examples section below.",
        "The CONNECT BY clause can iterate as many times as necessary to process the data. Constructing a query improperly can cause\nan infinite loop. In these cases, the query continues to run until the query succeeds, the query times out (e.g. exceeds the\nnumber of seconds specified by the STATEMENT_TIMEOUT_IN_SECONDS parameter), or you\ncancel the query.",
        "For information on how infinite loops can occur and for guidelines on how to avoid this problem, see\nTroubleshooting a Recursive CTE.",
        "This example uses a CONNECT BY to show the management hierarchy in a table\nof employee information. The table and data are shown below:",
        "The query and output are shown below:",
        "This example uses the SYS_CONNECT_BY_PATH function to show the hierarchy from the President down to the\ncurrent employee:",
        "This example uses the CONNECT_BY_ROOT keyword to display information from the top of the hierarchy in each row\nof output:",
        "This example uses a CONNECT BY to show a \u201cparts explosion\u201d:",
        "Here is the data:",
        "Here are the query and output:",
        "Was this page helpful?",
        "On this page"
    ]
}