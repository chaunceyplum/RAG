{
    "url": "https://docs.snowflake.com/en/user-guide/data-sharing-provider",
    "title": "Create and configure shares | Snowflake Documentation",
    "paragraphs": [
        "Provider sharing not enabled for all accounts",
        "Provider sharing is enabled by default for most, but not all accounts.",
        "If you encounter errors when attempting to share data with consumers, the feature may not be enabled for your account.\nTo inquire about enabling it, contact Snowflake Support.",
        "This topic describes the tasks associated with a data provider account creating and configuring shares, sharing the shares with other\nconsumer accounts, and performing ongoing maintenance of the shares.",
        "Attention",
        "Snowflake is not responsible for ensuring that HIPAA (and HITRUST) accounts who engage in data sharing have a signed BAA with each other;\nthis is at the discretion of the accounts that are sharing data. Failure to have a signed BAA might impact the HIPAA (and HITRUST)\ncompliance of both accounts, particularly the provider account.",
        "If you have a Business Critical account, consider the following to maintain the expected level of data protection before requesting\nSnowflake to enable Secure Data Sharing with non-Business Critical accounts:",
        "Do not share sensitive data with non-Business Critical accounts.",
        "Consider creating a non-Business Critical account to store less sensitive data and then sharing this data with non-Business\nCritical accounts.",
        "If you are using Tri-Secret Secure with your Business Critical account and you share data with other accounts, Snowflake\ntreats the data access from these accounts as if the access occurred from within your own account. Specifically, granting access to\nthe consumer account may require Snowflake to access the key management service in the cloud platform that hosts your Snowflake account.",
        "These are only recommendations and are not enforced by Snowflake. The decision to share data is always at the discretion of the data\nprovider. Snowflake does not assume any responsibility for data that is improperly shared.",
        "Note the following important usage details for creating and maintaining shares:",
        "You can share data across regions and cloud platforms. For more information,\nsee Share data securely across regions and cloud platforms.",
        "A share can include data from multiple databases. For more information, see Share data from multiple databases.",
        "A share is available immediately to a consumer when you add that consumer\u2019s account to the share.",
        "New and modified rows are available immediately to consumers who have created a database from the share.\nThis only happens when the consumer already has access.",
        "A new object created or recreated in a database granted to a share is not automatically available to consumers. For example,\nif you drop and then recreate an object, it is still considered a new object, even if the name is the same.\nTo make a new object available to consumers, you must use the GRANT <privilege> \u2026 TO SHARE command to\nexplicitly add the object to the share.",
        "For data security and privacy reasons, only secure views are supported in shares at this time.\nIf a standard view is added to a share, Snowflake returns an error.",
        "Creating secure views on streams in your database and then sharing those views with consumers is not recommended.\nThis scenario requires the ability to modify a stream in another account, which is not a supported operation and is therefore\nan anti-pattern. Instead, allow consumers to create their own streams on the tables and secure views that you share.\nFor more information, see Streams on shared objects (in this topic).",
        "Preparing objects to share can be performed using any role. Other data sharing tasks, such as creating a share or adding consumer\naccounts to the share, requires the ACCOUNTADMIN role or a role granted the global CREATE SHARE privilege.\nFor more details about the CREATE SHARE privilege, see Enable non-ACCOUNTADMIN roles to perform data sharing tasks.",
        "If you want to use DDL to create and manage database roles, use the commands listed here:",
        "CREATE DATABASE ROLE",
        "ALTER DATABASE ROLE",
        "DROP DATABASE ROLE",
        "SHOW DATABASE ROLES",
        "A shared database role does not support future grants on objects. For details, see GRANT DATABASE ROLE \u2026 TO SHARE.",
        "If you want to use DDL to view, grant, or revoke access to database objects in a share, use the commands listed here:",
        "GRANT DATABASE ROLE \u2026 TO SHARE",
        "REVOKE DATABASE ROLE \u2026 FROM SHARE",
        "GRANT <privilege> \u2026 TO SHARE",
        "REVOKE <privilege> \u2026 FROM SHARE",
        "SHOW GRANTS TO SHARE \u2026 \u2014 lists all object privileges that have been granted to a share",
        "SHOW GRANTS OF SHARE \u2026 \u2014 lists all accounts for the share and indicates the accounts\nthat are using the share",
        "Before creating a share, Snowflake recommends identifying the Snowflake objects you plan to share:",
        "Databases",
        "Tables",
        "Dynamic tables",
        "External tables",
        "Apache Iceberg\u2122 tables",
        "Secure views",
        "Secure materialized views",
        "Secure user-defined functions (UDFs)",
        "Models without code (such as CORTEX_FINETUNED) - Preview",
        "This might require some additional planning and administrative tasks, particularly if you decide to share only a subset of data in\nany of your tables.",
        "If you plan to share a database, little or no preparation is required.",
        "If you plan to share entire tables, no preparation is required.",
        "However, if you decide to filter the data in a table (or set of tables), either based on certain conditions, or by consumer account,\nyou must create one or more secure views on the table(s).",
        "To provide strict control of access to data in a shared database, you must\nuse secure views, secure materialized views\nand/or secure UDFs. For example,\nyou can choose to filter data by date or some other condition, or you can decide to use a single share\nto partition shared data for different consumer accounts. Secure objects enable you to dictate\nthe level of granularity you wish to apply to your data while ensuring that the base tables and\nbusiness logic are protected from exposure.",
        "Secure objects are defined similar to standard objects, using either the corresponding CREATE <object>\nor ALTER <object> commands. However, note the following important\nusage information:",
        "Secure objects that reference tables by their fully-qualified names (i.e. <db_name>.<schema_name>.<table_name>)\ncan be included in a share; however, you must ensure that the referenced database\nname matches the database for the share.",
        "Do not include secure objects that use the CURRENT_USER\nor CURRENT_ROLE functions in their definition. The contextual values\nreturned by these functions have no relevance in a consumer\u2019s account and will cause the object to fail when queried/used.",
        "When defining a secure object to share with consumer accounts, a key/vital additional step to perform\nis validating that the object is configured correctly to display only the data you wish to display.\nThis is particularly important if you wish to limit data access based on the account the data is shared with. To facilitate performing\nthis validation, Snowflake provides the SIMULATED_DATA_SHARING_CONSUMER session parameter.\nThe SIMULATED_DATA_SHARING_CONSUMER session parameter only supports secure views and\nsecure materialized views, but does not support secure UDFs. Setting this parameter in a session enables you to\nsimulate querying a secure view as a user in any of the consumer account(s) you plan to share the view with.",
        "For example, for consumer account xy12345:",
        "For a detailed example, see Use secure objects to control data access.",
        "Data consumers can create streams in their own databases that record data manipulation language (DML) changes made to the source tables or\nviews.",
        "Note",
        "The operations listed here are not supported:",
        "Creating append-only streams on shares of secondary source objects is not supported.",
        "Modifying a stream in another account is not supported.",
        "You can allow consumers to create streams on shared tables or secure views. Before you do this, you need to extend the data\nretention period for the tables, and you also need to enable change tracking on the shared tables or the\nunderlying tables for a shared view. You set the CHANGE_TRACKING and DATA_RETENTION_TIME_IN_DAYS parameters when\ncreating or altering a table, using\nCREATE TABLE or ALTER TABLE.",
        "Currently, when the first stream for a local table is created, a pair of hidden columns are automatically added to the table and begin\nstoring change tracking metadata. This change is not possible for shared tables, because a consumer of a share cannot modify the source\ndatabase. Instead, to enable change tracking for tables intended for sharing, execute\nALTER TABLE \u2026 CHANGE_TRACKING = TRUE on each of the tables.",
        "When a stream on a local table is not consumed regularly, Snowflake temporarily extends the data retention period for the source table\nto help avoid staleness.",
        "A stream on a shared table does not extend the data retention period for the table. Likewise, a stream on a shared view does not\nextend the data retention period for the underlying tables. To manually specify a longer data retention period\nfor any shared table, or any underlying table for a shared view, set the DATA_RETENTION_TIME_IN_DAYS parameter for\nthe table.",
        "A data sharing provider can set a tag on an object and share both the tag and the tagged object with the data sharing consumer.\nAdditionally, the tag references of the shared object are available to the consumer. Sharing the tag references allows the provider to\nshare additional context regarding the shared object, such as the data sensitivity of a table or column based on the tag string value.",
        "The consumer can use SQL to view the tag assignments on shared objects and determine the tag references of the shared objects. By viewing\nthe tag assignments and references of shared objects, data stewards in the consumer account can provide a more comprehensive assessment of\nwhere data originates from and how the data is being used. These new insights can facilitate regulatory compliance requirements.",
        "The provider must create the tag in the same database as the tagged objects and share this database. After sharing the database, if the\nprovider unsets a tag from a shared object, the change in tag assignment also occurs in the consumer account. The consumer cannot track the\nshared object using the tag once that tag is unset. By unsetting the tag, the provider can maintain data discretion in cases when an object\nwas tagged inadvertently.",
        "Tag lineage applies to tagged objects in the shared database. For example, if a provider sets a tag\non a schema in the shared database, the objects and columns in that schema are also tagged. However, the consumer cannot use the\nInformation Schema TAG_REFERENCES table function to determine where the provider initially set the tag.\nSnowflake hides the values in the LEVEL column in the table function output to protect the data provider by not revealing where\nthe tag was initially set.",
        "Important",
        "Shared tags are read only. The consumer cannot set a shared tag on an object in their account.",
        "To share a tag, the provider has these options:",
        "Use SQL to allow the share to access the tag and allow the consumer to view the assignments of the shared tag on the shared objects.",
        "The provider must grant The READ privilege on each tag to make the tag available to a consumer.",
        "Create a database role, grant the READ privilege on the tag to the database role, and\ngrant the database role to the share. The database role also needs the USAGE\nprivilege on the schema that stores the tag.",
        "To view shared tags in the consumer account, the consumer has these options:",
        "Use the ACCOUNTADMIN role. Consumer account administrators can view the shared tags the provider makes available.",
        "Use a role with IMPORTED PRIVILEGES. An account role that is granted or inherits a role with IMPORTED PRIVILEGES on the database\ncreated from the share can view the shared tag the provider makes available.",
        "Use a shared database role. If the provider grants the READ privilege on a tag to the database role and shares the database role, the\nconsumer can grant the shared database role to an account role in their account.",
        "In the consumer account, you can use SQL to view tags, tag references, and tagged objects that the provider shares:",
        "Command: SHOW TAGS",
        "Functions:",
        "SYSTEM$GET_TAG",
        "TAG_REFERENCES",
        "TAG_REFERENCES_ALL_COLUMNS",
        "Currently, you cannot use the following options in the consumer account to view tags, tag references, and tagged objects the provider\nshares:",
        "Snowsight.",
        "The Account Usage TAG_REFERENCES view.",
        "The Account Usage TAG_REFERENCES_WITH_LINEAGE table function.",
        "You must use the ACCOUNTADMIN role or a role that has been granted the CREATE SHARE global privilege to create shares.",
        "There are several ways to share data in Snowsight:",
        "Provide a listing to specific consumers or publicly on the Snowflake Marketplace using Provider Studio.\nSee Creating and Publishing a Listing.",
        "Publish a listing in a data exchange.",
        "Create a direct share to share data with consumer accounts in your region.",
        "If you are creating a share where you need to add a secure view that references objects in other databases,\nyou must create your share using SQL. For more information, see Share data from multiple databases.",
        "To create a direct share:",
        "Sign in to Snowsight.",
        "Select Data Products \u00bb Private Sharing.",
        "Select Share \u00bb Create a Direct Share. The Share Data dialog opens.",
        "In the Share Data dialog, select + Select Data and then:",
        "Select a source database.",
        "Select a target object or objects from the source database.",
        "Optionally, update the Secure Share Identifier created for your share.",
        "Optionally, enter a Description.",
        "In the remaining text box, enter an account locator. Entering a partial account locator lists all accounts that match the entered text.\nRepeat as required to add additional accounts. You can only add accounts within the same region to the share.",
        "Select Create Share.",
        "If you want to convert a direct share with active consumers to a listing, see Convert a direct share to a listing.",
        "On the Shares  page in Classic Console, select the Outbound tab.",
        "To create a share using SQL:",
        "Use the CREATE SHARE command to create an empty share.",
        "Use the GRANT <privilege> \u2026 TO SHARE command to add a database to the share and then selectively grant access to\nspecific database objects (schemas, tables and secure views) to the share.",
        "Use the ALTER SHARE command to add one or more accounts access to the share.",
        "Note",
        "The following steps assume a provider account, prvdr1, is sharing data with two consumer accounts, xy12345 and yz23456.",
        "To create and manage shares, you use the DDL commands listed here:",
        "CREATE SHARE",
        "ALTER SHARE",
        "DROP SHARE",
        "DESCRIBE SHARE \u2014 describes all the objects in a share",
        "SHOW SHARES \u2014 lists all shares, as well as the consumer accounts specified for each share",
        "The following example creates an empty share named sales_s:",
        "Add objects (database, schema, tables, secure views, etc.) to the share. You can choose to either add privileges on these objects\nto a share via a database role, or grant privileges on the objects directly to the share. For more information on these options, see\nHow to share database objects.",
        "The following example illustrates creating a database role, granting privileges on the following objects to the database role, and then\ngranting the database role to the sales_s share created in the previous step:",
        "sales_db (database)",
        "aggregates_eula (schema)",
        "aggregate_1 (table)",
        "To include objects in the share, grant privileges on each object. When granting privileges, first grant usage on any container\nobjects before granting usage on the objects in the container. For example, grant usage on a database before granting usage on any\nschemas contained in the database.",
        "Note",
        "Perform this task before adding accounts to the share. Attempting to add an account before granting usage on a\ndatabase results in an error.",
        "The following example illustrates granting privileges on the following objects to the sales_s share created in the previous step:",
        "sales_db (database)",
        "aggregates_eula (schema)",
        "aggregate_1 (table)",
        "To confirm the contents of the share:",
        "This ensures that the share is correctly configured before making it available to other accounts to consume.",
        "Attention",
        "If you have a Business Critical account and are sharing data with consumer accounts:",
        "Snowflake supports sharing sensitive data with non-Business Critical accounts (disabled by default), but does not\nencourage doing so.",
        "To ensure compliance with HIPAA and HITRUST requirements, Snowflake does not allow HIPAA accounts to share data\nwith non-HIPAA accounts.",
        "If you are using Tri-Secret Secure, Snowflake treats data access from consumer accounts as if the access occurred from within your\nown account.",
        "The following example adds two accounts to the sales_s share:",
        "Accounts xy12345 and yz23456 are now able to see the share and create a database from it.",
        "Note",
        "When adding accounts to a share, if the accounts do not exist, the command completes successfully,\nbut no updates are made to the share. To ensure the share is properly updated, verify that the accounts\nexist and you\u2019ve entered the names correctly.",
        "Use SHOW SHARES to confirm the share. The output of the command lists the sales_s share.\nThe kind column indicates that the share is OUTBOUND, meaning this share is sharing a database with other\nSnowflake accounts. The to column lists all accounts to which the share has been made available:",
        "You must use a role with the OWNERSHIP privilege on a share and the CREATE SHARE global privilege to manage shares.",
        "You can add objects to an existing share at any time. Objects that you add to a share are instantly available to the consumer\naccounts that have created databases from the share. For example, if you add a table to a share, users in consumer accounts can query the\ndata in the table as soon as the table is added to the share.",
        "Important",
        "If you plan to securely share data with data consumers across different regions or\ncloud platforms, note that replicating a primary database is blocked if the database\ncontains some types of objects. For a full list of objects that cause refresh operations to fail, see\nCurrent limitations of replication.",
        "To modify the data associated with a share using Snowsight:",
        "Sign in to Snowsight.",
        "Select Data Products \u00bb Private Sharing.",
        "Select the Shared by Your Account tab.",
        "Locate and select the share you want to modify.",
        "In the Data section, select Edit.",
        "Select the data that you want to add.",
        "Select Done.",
        "Note",
        "The web interface does not currently support adding or removing external tables, secure materialized views, or secure UDFs to/from\nshares. All management of these objects in shares must be performed using SQL.",
        "You cannot add a secure view that references objects in other databases to a share using the web interface. You must\ncreate your share using SQL. See Share data from multiple databases.",
        "On the Shares  page in Classic Console, select the Outbound tab.",
        "Use the GRANT <privilege> \u2026 TO SHARE command.",
        "Note",
        "If the schema for the object is already in the share, you only need to add the object.",
        "If the schema for the object is not already in the share, you need to first add the schema and then the object.",
        "The following example adds a secure view named agg_secure in the aggregates_eula schema to the sales_s share:",
        "You can remove objects from an existing share at any time.\nAny objects that you remove from a share are instantly unavailable to the consumers accounts who have created databases from the share.",
        "For example, if you remove a table from a share, users in consumer accounts can no longer query the data in the table as soon as the table\nis removed from the share.",
        "Note",
        "The web interface does not currently support adding or removing external tables, secure materialized views, or\nsecure UDFs to/from shares. All management of these objects in shares must be performed using SQL.",
        "To remove the data associated with a share using Snowsight:",
        "Sign in to Snowsight.",
        "Select Data Products \u00bb Private Sharing.",
        "Select the Shared by Your Account tab.",
        "Locate and select the share you want to modify.",
        "In the Data section, select Edit.",
        "Select the data in the share and deselect the checkboxes for the data that you want to remove from the share.",
        "Select Done.",
        "On the Shares  page in Classic Console, select the Outbound tab.",
        "Remove objects from an existing share at any time using the REVOKE <privilege> \u2026 FROM SHARE command.",
        "The following example removes the secure view named agg_secure in the aggregates_eula schema from the sales_s share:",
        "You can add accounts to an existing share at any time. After an account is added to the share, the share is immediately \u201cvisible\u201d\nto the account and the account can create a database from the share and start querying the Snowflake objects in the database.",
        "To add consumers to an existing share using Snowsight:",
        "Sign in to Snowsight.",
        "Select Data Products \u00bb Private Sharing.",
        "Select the Shared by Your Account tab.",
        "Locate the share you want to modify.",
        "In the Shared With section, select Add Consumers.",
        "For Share With Snowflake Accounts, enter one or more account locators. Entering part of an account locator lists all accounts that match.",
        "Select Add.",
        "On the Shares  page in Classic Console, select the Outbound tab.",
        "When you add accounts, you can choose to add full or reader accounts. You can also choose to create a reader account on-the-spot and then\nadd it to the share.",
        "To add consumers to an existing share using SQL, use the ALTER SHARE command.",
        "You can remove accounts from an existing share at any time. Removing an account from a share instantly invalidates the database they\ncreated from the share. All queries and other operations that users in the account perform on the database will no longer work.",
        "After removing an account from a share, you can add it back again to the share; however, this does not restore the database\nthey created earlier from the share. They must create a new database from the share.",
        "Note",
        "Before removing an account from a share, consider the downstream impact it will have on the account.\nBecause the database is instantly invalidated, all queries and other operations that users (in the account)\nperform on the database will stop working, which could have a significant impact on the business operations of the account.",
        "To remove consumers from an existing share using Snowsight:",
        "Sign in to Snowsight.",
        "Select Data Products \u00bb Private Sharing.",
        "Select the Shared by Your Account tab.",
        "Locate and select the share you want to modify.",
        "In the Shared With section, select \u2026 \u00bb Remove.",
        "In the confirmation dialog, select Remove.",
        "On the Shares  page in Classic Console, select the Outbound tab.",
        "Remove accounts from an existing share using the ALTER SHARE command.",
        "You remove an account from a share by setting a new list of accounts for the share and leaving the desired account off the list.",
        "You can drop (remove) a share at any time. Dropping a share instantly invalidates all databases created from the share by consumer accounts.\nAll queries and other operations performed on these databases no longer work.",
        "After dropping a share, you can recreate it with the same name; however, this does not restore any of the databases created from the share\nby consumer accounts. The recreated share is treated as a new share and all consumer accounts must create a new database from the new share.",
        "Note",
        "Before dropping a share, consider the downstream impact it will have on all consumer accounts using the share.",
        "Instead, you might want to consider removing individual objects from the share. Removed objects can be added back to a share without\nrequiring any additional tasks on the part of the consumer accounts.",
        "To drop a share using Snowsight:",
        "Sign in to Snowsight.",
        "Select Data Products \u00bb Private Sharing.",
        "Select the Shared by Your Account tab.",
        "Locate and select the share you want to drop.",
        "Select \u2026 \u00bb Drop.",
        "In the confirmation dialog, select Drop.",
        "On the Shares  page in Classic Console, select the Outbound tab.",
        "Drop a share using the DROP SHARE command.",
        "To see the accounts that have created databases from a share, use the SHOW GRANTS OF SHARE command. The output from this command is\ndifferent from the list of accounts returned by SHOW SHARES in the following ways:",
        "SHOW SHARES lists all shares that are available to accounts, as well as the accounts that are able to access each share.",
        "SHOW GRANTS OF SHARE lists all accounts that have created a database from the share. If no accounts have created a database from the\nshare, the results are empty.",
        "For example, the following example shows:",
        "Two shares, sales_s and sales_s2 have been made available to accounts xy12345 and yz23456\nby the owner account SNOW.PRVDR1.",
        "Account xy12345 has created a database from the prvdr1.sales_s share.",
        "No accounts have created databases from the sales_s2 share.",
        "Using Snowsight, you can view data that was shared by your account using a listing, a direct share, or as part of a data exchange.",
        "To view the data shared by your account, do the following:",
        "Sign in to Snowsight.",
        "Select Data Products \u00bb Private Sharing.",
        "Select the Shared by Your Account tab.",
        "On this page, you can do the following:",
        "View the shares that you have created or have access privileges to. This includes information such as the database for the share,\nthe consumer accounts, if any, added to the share, creation date of the share, and the shared objects.",
        "Explore shares associated with listings offered specifically to certain consumers or available to any consumer on the Snowflake Marketplace.",
        "Access shares that are shared within private data exchanges.",
        "You can use the following filters to selectively display shared data:",
        "Filter by type with the All Types drop-down list. Choose to display only secure shares or listings shared within a data exchange.\nSome secure shares are shares associated with listings.",
        "Filter by consumer account or data exchange with the Shared With drop-down list. Select one or more specific consumers or data\nexchanges to see all shares or listings associated with your selection or selections.",
        "Select a share to manage the share, revoke access for individual consumer accounts, or add a description to the share.\nTo manage secure shares that are offered as listings, or to manage your listings on the Snowflake Marketplace, use Provider Studio.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}