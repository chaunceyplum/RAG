{
    "url": "https://docs.snowflake.com/en/user-guide/snowsql-use",
    "title": "Using SnowSQL | Snowflake Documentation",
    "paragraphs": [
        "This topic describes how to use SnowSQL, including starting/stopping the client, using commands and variables within the client, and other general usage information.",
        "In a Snowflake session, you can issue commands to take specific actions. All commands in SnowSQL start with an exclamation point (!), followed by the command name.",
        "For example:",
        "For a detailed description of each command, see Commands reference (in this topic).",
        "You can use variables to store and reuse values in a Snowflake session. Variables enable you to use user-defined and database values in queries.",
        "The next sections explain how to define and use variables:",
        "Defining variables",
        "Enabling variable substitution",
        "Substituting variables in a session",
        "Listing variables",
        "Using the built-in variables",
        "You can define variables for SnowSQL in several ways:",
        "Defining variables before connecting (configuration file)",
        "Defining variables while connecting (-D or --variable command-line flag)",
        "Defining variables within a session (!define command)",
        "To define variables before connecting to Snowflake, add the variables in the config configuration file:",
        "Open the SnowSQL configuration file (named config) in a text editor. The default\nlocation of the file is:",
        "~/.snowsql/",
        "%USERPROFILE%\\.snowsql\\",
        "Note",
        "You can change the default location by specifying the --config path command-line flag when starting SnowSQL.",
        "In the [variables] section, define any variables that you plan to use:",
        "Where:",
        "variable_name is a string of alphanumeric characters (case-insensitive) representing the name of the variable.",
        "variable_value is a string representing the value for the variable. If needed, the string can be enclosed by\nsingle or double quotes.",
        "For example:",
        "To define variables while connecting to Snowflake, on the terminal command line, specify the -D or --variable\ncommand-line flag. For the argument to this flag, specify the variable name and value in the form of\nvariable_name=variable_value.",
        "For example:",
        "In the above example:",
        "-D sets a variable named tablename to CENUSTRACKONE.",
        "--variable assigns a Snowflake variable named db_key to the DB_KEY environment variable.",
        "To define a variable after connecting to Snowflake, execute the !define command in the session.",
        "For example:",
        "To enable SnowSQL to substitute values for the variables, you must set the variable_substitution configuration option to\ntrue in one of the following ways:",
        "To set this option before you start SnowSQL, open the SnowSQL configuration file in a text\neditor, and set this option in the [options] section:",
        "To set this option when you start SnowSQL, specify the -o command-line flag:",
        "To set this option when in a SnowSQL session, execute the !set command in the session:",
        "Note",
        "There is currently no option to unset an option value, such as the variable_substitution option. If you need\nto disable variable substitution, execute the command !set variable_substitution=false.",
        "After you enable variable substitution, you can use variables in SQL\nstatements.",
        "To use a variable in a statement, use the &variable_name syntax. Note that variable names are case-insensitive. For\nexample:",
        "If the variable_substitution option is not enabled, no variable substitution occurs. For example:",
        "If you refer to a variable that has not been defined, SnowSQL displays an error. For example:",
        "To combine a variable with text, enclose the variable reference in curly braces. For example:",
        "To use an ampersand sign without using substitution, escape the ampersand sign with a second ampersand sign:",
        "&&variable",
        "For example:",
        "To list variables, execute the !variables or !vars command in the session:",
        "SnowSQL includes a set of built-in variables that return metadata about statements executed in the current user session.",
        "Each of these variable names begins with two underscore characters (\u201c__\u201d).",
        "Returns the number of rows affected by the most recent DML statement executed by the user.",
        "Returns the query ID for the most recent query executed by the user.",
        "Various SQL functions, table names, and variables are stored in SnowSQL and are auto-completed in interactive mode. To select an auto-complete suggestion, press the Tab key. To choose a different\nsuggestion, use the \u2191 and \u2193 keys to highlight the desired option, and then press Tab.",
        "To disable auto-complete interactively, set the auto_completion configuration option to False in the configuration file.",
        "Your recent command line history can be recalled by using the \u2191 key. Press the key repeatedly to scroll through the buffer.",
        "The interactive command line history file is named history and is located in ~/.snowsql/history.",
        "You can run batch scripts in two ways:",
        "Using connection parameters (while connecting to Snowflake)",
        "Executing commands (on the command line in the Snowflake session)",
        "To execute a SQL script while connecting to Snowflake, use the -f <input_filename> connection parameter.",
        "An output file for the script can be specified using -o output_file=<output_filename>. In addition, you can use -o quiet=true to turn off the standard output and\n-o friendly=false to turn off the startup and exit messages.",
        "For example:",
        "For more information about all connection parameters, see Connection parameters reference.",
        "To run a SQL script after connecting to Snowflake, execute the !source (or !load) command in the session.",
        "For example:",
        "Output query results to a file in a defined format using the following configuration options:",
        "output_format=output_format",
        "output_file=output_filename",
        "To remove the splash text, header text, timing, and goodbye message from the output, also set the following options:",
        "friendly=false",
        "header=false",
        "timing=false",
        "As with all configuration options, you can set them using any of the following methods:",
        "In the configuration file (before connecting to Snowflake).",
        "Using the -o or --options connection parameter (while connecting to Snowflake).",
        "Executing the !set command (on the command line in the Snowflake session).",
        "Note that consecutive queries are appended to the output file. Alternatively, to redirect query output to a file and overwrite the file with each new statement, use the greater-than sign (>) in a\nscript.",
        "In the following example, SnowSQL connects to an account using a named connection and queries a table. The output is written to a CSV file named output_file.csv in the current local directory:",
        "",
        "",
        "The SnowSQL prompt dynamically displays context information about the current session:",
        "When you log into Snowflake, the prompt displays your user name, as well as the default warehouse, database, and schema (if defaults have been set).",
        "If you use a USE command in the session to set or change the warehouse, database, or schema, the prompt changes to reflect the context.",
        "You can control the appearance and structure of the prompt using the prompt_format configuration option and a Pygments token in brackets for each object type, in the form of [token]\n(e.g. [user] or [warehouse]).",
        "The token affects the prompt going forward. You can change the order and color for each token, as well as the delimiters between tokens.",
        "As with all configuration options, you can set the prompt using any of the following methods:",
        "In the configuration file (before connecting to Snowflake).",
        "Using the -o or --options connection parameter (while connecting to Snowflake).",
        "Executing the !set command (on the command line in the Snowflake session).",
        "Note",
        "If you change the prompt using the connection parameter or directly on the command line, the change applies to the current session only. To persist the change in future sessions, set the option in\nthe configuration file.",
        "SnowSQL supports the following object types as tokens:",
        "user",
        "account",
        "role",
        "database",
        "schema",
        "warehouse",
        "The SnowSQL default prompt uses the following tokens and structure:",
        "For example:",
        "Continuing the example above, the following !set command executed in the command line adds the role token and changes the token order\nto user and role, database and schema, then warehouse. It\nalso changes the delimiter for each token to a period (.) and sets the tokens to use different colors:",
        "This example results in the following prompt for the session:",
        "SnowSQL provides separate commands for:",
        "Exiting individual connections (i.e. sessions) without stopping SnowSQL.",
        "Quitting SnowSQL, which also automatically terminates all connections.",
        "To exit a connection/session, use the !exit command (or its alias, !disconnect). You can then connect again using !connect <connection_name> if you can defined multiple\nconnections in the SnowSQL config file. Note that, if you only have one connection open, the !exit command also quits/stops SnowSQL.",
        "To exit all connections and then quit/stop SnowSQL, use the !quit command (or its alias, !q). You can also type\nCTRL + d on your keyboard.",
        "There are several possible exit codes that are returned when SnowSQL quits/exits:",
        "Everything ran smoothly.",
        "Something went wrong with the client.",
        "Something went wrong with the command line arguments.",
        "SnowSQL could not contact the server.",
        "SnowSQL could not communicate properly with the server.",
        "The exit_on_error configuration option was set and SnowSQL exited because of an error.",
        "Accept the current auto-complete suggestion.",
        "Quit/stop SnowSQL.",
        "Aborts a query (specified by query ID). The query ID can be obtained from the History  page in the web interface.",
        "For example:",
        "SnowSQL supports multiple sessions (i.e. connections) with !connect <connection_name>:",
        "The connection parameters/options associated with connection_name are stored in the corresponding [connections.<connection_name>] section in the SnowSQL configuration file.",
        "If a parameter/option is not specified in the [connections.<connection_name>] section, the unspecified parameter will default to the parameters under [connections].",
        "When connecting, the connection is added to your connection stack, and exiting will return you to your previous connection. Quitting will exit all of your connections and quit, no matter how many connections you have.",
        "For example:",
        "Configuration file:",
        "Command line:",
        "Sets a variable to a specified value, using the following format:",
        "!define <variable_name>=<variable_value>",
        "The name and value must be separated by a single = with no spaces. Valid characters that can be used in the variable are:",
        "0-9a-zA-Z_",
        "For more information on defining and using variables, see Using variables.",
        "Opens up the editor that was set using the editor connection parameter (if no editor was set, the default is vim). The command accepts a query as an argument. If no argument is passed,\nit opens up the last query that was run.",
        "Note",
        "You must save before or while exiting the editor, or else any text that was entered/modified in the editor will not be saved.",
        "Drops the current connection and quits SnowSQL if it is the last connection.",
        "Displays the help for SnowSQL commands.",
        "Returns a list of all the SnowSQL configuration options and their currently-set values. These options can be set using the !set command in the current SnowSQL\nsession.",
        "Note",
        "These options can also be set in the configuration file for SnowSQL or as connector parameters in the command line when\ninvoking SnowSQL.",
        "Pause running queries. Press the return key to continue.",
        "Prints the specified text to the screen and any files you are currently spooling to.",
        "For example:",
        "Lists all queries that match the specified filters. The default filters are session and amount=25, which return the 25 most recent queries in the current session.",
        "For example:",
        "Return the 25 most recent queries that ran in this current session:",
        "Return the 20 most recent queries run in the account:",
        "Return the 20 most recent queries run in the account that took more than 200 milliseconds to run:",
        "Return the 25 most recent queries that ran in the specified warehouse:",
        "This command creates a variable for each query ID returned. Note that variable substitution must be enabled for you to use these variables. For example:",
        "Drops all connections and exits SnowSQL.",
        "Re-syncs the auto-complete tokens.",
        "Normal use does not require re-syncing the auto-complete tokens. However, forcing an update to the server-side tokens could be useful in certain scenarios (e.g. if a new user-defined function is\ncreated in a different session).",
        "Returns the result of a completed query (specified by query ID). Query IDs can be obtained from the History  page in the web interface or using the !queries command.",
        "If the query is still running, the command waits until the query completes.",
        "For example:",
        "Sets the specified SnowSQL configuration option to a given value using the form <option>=<value>.",
        "Note that there is no option currently to unset an option value. To change the value for an option, run the !set command again with the desired value.",
        "For example:",
        "Important",
        "Spaces are not allowed between an option and its value. Some options support a defined set of values; SnowSQL returns an error if the provided value is unsupported. You cannot create new options.",
        "For a list of all the configuration options you can set, use the !options command.",
        "Executes SQL from a file. You can  SQL from local files or a URL.",
        "For example:",
        "This command can be executed in two ways:",
        "Enable spooling and write the results of all subsequent statements/queries to the specified file:",
        "!spool <file_name>",
        "Turn off results spooling (if it is enabled):",
        "!spool off",
        "For example:",
        "You can change the output format by first running the !set output_format=<format> command. The option supports the following values:",
        "expanded",
        "fancy_grid",
        "grid",
        "html",
        "latex",
        "latex_booktabs",
        "mediawiki",
        "orgtbl",
        "pipe",
        "plain",
        "psql",
        "rst",
        "simple",
        "tsv",
        "Recommended value: psql, fancy_grid, or grid",
        "For example, to output in CSV format:",
        "Executes a shell command.",
        "!system <command>",
        "The following example runs the ls command in the user\u2019s home directory:",
        "Lists all current variables. Returns each <variable_name>=<variable_value> pair currently defined.",
        "Once a variable is assigned, it cannot be deleted, but its value can be removed by specifying the variable name with no value. For example:",
        "For more information about setting variables, see Using variables (in this topic).",
        "If you see this error message when running commands in SnowSQL, the cause might be an ampersand (&) inside a\nCREATE FUNCTION command. (The ampersand is the SnowSQL variable substitution character.) For\nexample, executing the following in SnowSQL causes this error:",
        "The error occurs when the function is created, not when the function is called.",
        "If you do not intend to use variable substitution in SnowSQL, you can explicitly disable variable substitution by executing the\nfollowing command:",
        "For more information about variable substitution, see Using variables.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}