{
    "url": "https://docs.snowflake.com/en/developer-guide/snowpark-container-services/working-with-registry-repository",
    "title": "Snowpark Container Services: Working with an image registry and repository | Snowflake Documentation",
    "paragraphs": [
        "Feature \u2014 Generally Available",
        "Available to accounts in AWS and Microsoft Azure commercial regions, with some exceptions. For more information, see Available regions.",
        "Snowpark Container Services provides an\nOCIv2-compliant image registry service and a storage unit call repository to store images.",
        "The image registry service serves the OCIv2 API for storing OCI-compliant container images.",
        "Each image registry in a Snowflake account has a unique hostname, which allows OCI clients\n(such as Docker CLI) to access an image registry using REST API calls.\nThe general syntax for an image registry hostname is:",
        "In the hostname:",
        "<orgname>-<acctname> identifies a Snowflake account.",
        "registry allows Snowflake to provide hostnames\nper account for registry customers.",
        "The hostname is always all lowercase.",
        "Note",
        "A Snowflake account name (<acctname>) can have an underscore\n(for example, my_account), but underscores are not valid in a URL.\nTherefore, when using a registry hostname, you need to replace an underscore\nwith a dash. For example, change my_account to my-account.",
        "You can find your organization name and account name information for image\nrepository host names in one of the following ways:",
        "The Snowsight web interface: Use the account selector. For more information, see Getting started with Snowsight.",
        "Execute the SHOW IMAGE REPOSITORIES command.",
        "To access an image repository in your Snowflake account, users must authenticate to the image registry using their Snowflake credentials. Additionally, appropriate privileges are required to access repositories within the registry. To obtain these privileges, a user must have a role that grants access privileges to the repository.",
        "You have the following options to authenticate your client with an image registry in your account:",
        "Use client-provided commands: Tools like Docker offer commands to authenticate with a registry using a username and password. For instance, in Tutorial 1 (see Tutorial 1: Build and upload the image), you use the docker login command to authenticate Docker with a registry. This method is only available if your account administrator permits the user to use username/password authentication.",
        "Use Snowflake CLI: The Snowflake CLI supports all forms of Snowflake authentication.",
        "For the Docker client, use the snow spcs image-registry login  command to authenticate Docker with a registry.",
        "For any client (including Docker), Snowflake CLI also provides the option to first generate an authentication token and use it to authenticate the client. For more information, see snow spcs image-registry token.",
        "A registry is a service that serves the OCIv2 API, and a repository is a\nstorage unit that you create within the service.",
        "A repository is a named location in your account where you store images.\nThis is similar to the relationship between a DBMS and a table within the DBMS.\nThat is, a DBMS is equivalent to a registry, and a table is equivalent to a repository.",
        "You can create one or more repositories in your Snowflake account. For example,\nDEV, TEST, and PROD repositories can store images during development, testing,\nand production. You can also create repositories that have different\npermissions; for example, some repositories may be read-only for some roles.",
        "Access control is supported at the repository level;\nindividual image-level access control is not supported.",
        "For uploading images to an image repository, the registry service offers various authentication options and single sign-on (SSO).",
        "Attention",
        "Snowpark Container Services image repositories do not support Tri-Secret Secure and Periodic rekeying. This means that if your account has enabled Tri-Secret Secure or enabled periodic rekeying, while all other Snowflake data will continue to have\nadded security, any images stored in your Snowpark Container Services image repositories will not benefit from this added security.",
        "To create an image repository in an account with Tri-Secret Secure or periodic rekeying, you must first confirm that you understand\nand agree to continue without the benefit from this additional security for your image repositories.  To confirm agreement, an account\nadministrator (user with the ACCOUNTADMIN role) will need to set the account-level parameter\nENABLE_TRI_SECRET_AND_REKEY_OPT_OUT_FOR_IMAGE_REPOSITORY to TRUE.",
        "The following is a general syntax for a Snowflake repository URL:",
        "For example,",
        "To look up the repository URL in your account, use the SHOW IMAGE REPOSITORIES\nSQL command.",
        "Note",
        "Snowflake URL-encodes the $ character, which is the only non-URL\ncharacter Snowflake supports in identifiers\n(See Identifier Requirements).\nDouble-quoted names that contain special characters are not supported.",
        "When you manually construct a repository URL, replace an underscore in an account\nname (my_acct) with a dash (my-acct).",
        "To create and manage repositories, Snowflake supports the following\nrepository operations:",
        "CREATE IMAGE REPOSITORY",
        "DROP IMAGE REPOSITORY",
        "SHOW IMAGE REPOSITORIES",
        "To list images stored within a Snowflake image repository, use the following command:",
        "SHOW IMAGES IN IMAGE REPOSITORY",
        "For an example of creating a repository and uploading an image,\nsee Tutorial Common Setup.",
        "When you work with a repository, the following privilege model applies:",
        "To create a repository in a schema, you must have the\nCREATE IMAGE REPOSITORY privilege on the schema.",
        "For repository management, the following privileges (capabilities)\nare supported:",
        "Privilege",
        "Usage",
        "READ",
        "Enables listing and downloading images from a repository.",
        "WRITE",
        "Enables listing and downloading images from a repository.\nYou can also push images in the repository.",
        "OWNERSHIP",
        "Enables listing and downloading images from a repository.\nYou can also push images in the repository.",
        "SERVICE READ",
        "Enables a container service to list and download images from a repository.\nThis is needed for the image building step of model serving.",
        "SERVICE WRITE",
        "Enables a container service to push images in the repository.\nThis is needed for the image building step of model serving.",
        "Dropping images from a repository is currently not supported. You can drop a repository, but that removes all images from that repository.",
        "Contact your account representative if you require inbound private connectivity.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}