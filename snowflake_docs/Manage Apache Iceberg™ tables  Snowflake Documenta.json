{
    "url": "https://docs.snowflake.com/en/user-guide/tables-iceberg-manage",
    "title": "Manage Apache Iceberg\u2122 tables | Snowflake Documentation",
    "paragraphs": [
        "Manage Apache Iceberg\u2122 tables in Snowflake:",
        "Query a table",
        "Use DML commands with Snowflake-managed tables",
        "Generate snapshots of DML changes",
        "Maintain tables that use an external catalog",
        "Refresh the table metadata",
        "Retrieve storage metrics",
        "You can also convert an Iceberg table that uses an external catalog into a table that uses Snowflake as the Iceberg catalog.\nTo learn more, see Convert an Apache Iceberg\u2122 table to use Snowflake as the catalog.",
        "To query an Iceberg table, a user must be granted or inherit the following privileges:",
        "The USAGE privilege on the database and schema that contain the table",
        "The SELECT privilege on the table",
        "You can query an Iceberg table using a SELECT statement. For example:",
        "Iceberg tables that use Snowflake as the catalog support full Data Manipulation Language (DML) commands,\nincluding the following:",
        "INSERT",
        "MERGE",
        "UPDATE",
        "DELETE",
        "TRUNCATE TABLE",
        "Note",
        "Snowflake-managed tables also support efficient bulk loading using features such as COPY INTO <table>\nand Snowpipe. For more information,\nsee Load data into Apache Iceberg\u2122 tables.",
        "You can use INSERT and UPDATE statements to modify Snowflake-managed Iceberg tables.",
        "The following example inserts a new value into an Iceberg table named store_sales,\nthen updates the cola column to 1 if the value is currently -99.",
        "For tables that use Snowflake as the catalog, Snowflake automatically generates the Iceberg metadata. Snowflake writes\nthe metadata to a folder named metadata on your external volume in the location specified by the BASE_LOCATION parameter\nwhen the table was created.",
        "Alternatively, you can call the SYSTEM$GET_ICEBERG_TABLE_INFORMATION function to generate Iceberg metadata\nfor any new changes.",
        "For tables that aren\u2019t managed by Snowflake, the function returns information about the latest refreshed snapshot.",
        "For example:",
        "Output:",
        "You can perform maintenance operations on Iceberg tables that use an external catalog.",
        "Maintenance operations include the following:",
        "Expiring snapshots",
        "Removing old metadata files",
        "Compacting data files",
        "Important",
        "To keep your Iceberg table in sync with external changes, it\u2019s important to align your Snowflake refresh schedule with table maintenance.\nRefresh the table each time you perform a maintenance operation.",
        "To learn about maintenance for Iceberg tables that aren\u2019t managed by Snowflake,\nsee Maintenance in the Apache Iceberg documentation.",
        "When you use an external Iceberg catalog, you can refresh the table metadata using the ALTER ICEBERG TABLE \u2026 REFRESH command.\nRefreshing the table metadata synchronizes the metadata with the most recent table changes.",
        "The following example manually refreshes the metadata for a table that uses an external catalog (for example, AWS Glue or Delta).\nRefreshing the table keeps the table in sync with any changes that have occurred in the remote catalog.",
        "With this type of Iceberg table, you don\u2019t specify a metadata file path in the command.",
        "The following example manually refreshes a table created from Iceberg metadata files in an external cloud storage location,\nspecifying the relative path to a metadata file without the leading forward slash (/).\nThe metadata file defines the data in the table after refreshing.",
        "Snowflake does not bill your account for Iceberg table storage costs. However, you can track how much storage an Iceberg table occupies\nby querying the TABLE_STORAGE_METRICS and TABLES views in the Snowflake Information Schema or Account Usage schema.",
        "The following example query joins the ACCOUNT_USAGE.TABLE_STORAGE_METRICS view with the ACCOUNT_USAGE.TABLES view, filtering on\nthe TABLES.IS_ICEBERG column.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}