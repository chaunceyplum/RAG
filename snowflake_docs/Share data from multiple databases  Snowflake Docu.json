{
    "url": "https://docs.snowflake.com/en/user-guide/data-sharing-multiple-db",
    "title": "Share data from multiple databases | Snowflake Documentation",
    "paragraphs": [
        "Provider sharing not enabled for all accounts",
        "Provider sharing is enabled by default for most, but not all accounts.",
        "If you encounter errors when attempting to share data with consumers, the feature may not be enabled for your account.\nTo inquire about enabling it, please contact Snowflake Support.",
        "Snowflake data providers can share data from multiple databases by using secure views. A secure view can reference objects such\nas schemas, tables, and other views contained in one or more databases, as long as those databases belong to the same account.",
        "Sharing a secure view that references objects from multiple databases is different from sharing data contained in a\nsingle database.",
        "In addition to performing all the standard steps to share data, you must also grant the REFERENCE_USAGE privilege\non each database referenced by a secure view that you wish to share. However, you do not need to grant REFERENCE_USAGE on the\ndatabase that contains the secure view.",
        "Note",
        "You cannot use database roles to share data from multiple databases. You cannot grant the REFERENCE_USAGE privilege to a\ndatabase role and you cannot use a database role to grant a secure view\nthat references objects from multiple databases to a share.",
        "You must grant the REFERENCE_USAGE privilege separately on each database referenced in a secure view, before granting the\nsecure view to a share.",
        "To share a secure view that references objects from multiple databases:",
        "Connect to your Snowflake account as a user with the ACCOUNTADMIN role or a role granted the CREATE SHARE global privilege.\nFor more details about the CREATE SHARE privilege, see Enable non-ACCOUNTADMIN roles to perform data sharing tasks.",
        "Create a share using CREATE SHARE.",
        "Grant the USAGE privilege on the database you wish to share using GRANT <privilege> \u2026 TO SHARE.",
        "Note",
        "If you are sharing a secure view that references objects contained in multiple databases, you only need to grant the USAGE privilege\nto the database where the secure view is created. You can only grant USAGE to one database per share.",
        "Granting the USAGE privilege to the database associates the share with a database, which is required to grant other privileges\nto the share.",
        "Grant the USAGE privilege on each schema in the database you wish to share using GRANT <privilege> \u2026 TO SHARE.",
        "Grant the REFERENCE_USAGE privilege on each additional database that contains objects referenced by the view you wish to share using\nGRANT <privilege> \u2026 TO SHARE.",
        "Add the view to the share by granting the SELECT privilege on the view using GRANT <privilege> \u2026 TO SHARE.",
        "Add one or more consumer accounts to the share using ALTER SHARE.",
        "The share is now ready to be consumed by the specified accounts.",
        "Note",
        "To share a secure view that references a UDF in a different database, you must make the UDF secure. For more details about creating a\nsecure UDF, see Creating a Secure UDF or Stored Procedure.",
        "Refer to the following examples for creating secure views.",
        "A provider who organizes data into different databases based on the characteristics of data and business needs wants to share a secure view\nin one database that joins data in the database with objects (e.g. schema, table, view) in other databases.",
        "Create database database1 and data:",
        "Create database database2 and data:",
        "Create database database3 and data:",
        "Create the secure view with the data to be shared in database3:",
        "Create the share and grant required privileges to set up the share.",
        "Grant the required privileges necessary to add the secure view view3 to the share.",
        "The data referenced in additional databases by secure view view3 requires granting the REFERENCE_USAGE privilege on database1\nand database2 to the share:",
        "You can share this data with consumers in other regions by using a replication group to replicate data to an account in another region.\nFor instructions, see Example 3: Share data from multiple databases.",
        "A provider stores customer data in separate databases and does not want to create new objects in those databases. To share data, the provider\ncreates a new database with a secure view. The secure view references objects (schema, table, view) in the databases with customer data.",
        "Sample Code:",
        "Create the customer database customer1_db and data:",
        "Create the customer database customer2_db and data:",
        "Create the new database new_db and schema sch:",
        "Create the secure view in new_db that references objects in customer1_db and customer2_db:",
        "Create the share and grant required privileges to set up the share:",
        "Grant the required privileges necessary to add the secure view view3 to the share.",
        "The data referenced in additional databases by secure view view3 requires granting the REFERENCE_USAGE privilege on\ncustomer1_db and customer2_db to the share:",
        "You can share data from multiple databases with consumer accounts in other regions and cloud platforms by using a replication group.\nInclude the share and each database the share references in the group to replicate data to a Snowflake account in another region.\nYou can then add consumer accounts to the replicated share. For detailed instructions,\nsee Share data securely across regions and cloud platforms.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}