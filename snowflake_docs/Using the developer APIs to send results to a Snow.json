{
    "url": "https://docs.snowflake.com/en/user-guide/cleanrooms/developer-provider-activation",
    "title": "Using the developer APIs to send results to a Snowflake account for activation | Snowflake Documentation",
    "paragraphs": [
        "Feature \u2014 Generally Available",
        "Not available in government regions.",
        "Providers can add activation templates (SQL Jinja templates) to a clean room so analysis results can be pushed to a Snowflake account for\nactivation.",
        "For provider-run analyses, the provider can push results to their own Snowflake account (provider activation). For consumer-run analyses,\nthe consumer can push results to either the provider\u2019s Snowflake account (provider activation) or their own account (consumer activation),\ndepending on how the provider has configured the activation template.",
        "The provider can add a user interface to the activation template so users can use the web app to push results to the Snowflake account. In\nthis case, the options to push results shows up in the Activation Hub like other activation options. Alternatively, the provider and\nconsumer can use developer APIs to use the activation template to push results.",
        "As a provider, you want to do the following:",
        "Set up the activation template so it can be used by the provider and/or consumer to push results back to a Snowflake account.",
        "Activate results back to the provider\u2019s Snowflake account.",
        "View results in the Snowflake account",
        "This section discusses the steps that a provider can take to create, add, and configure an activation template in a clean room. It contains the\nfollowing sections:",
        "Create a template for provider activation",
        "Define the table in an activation template",
        "Link the required table (Provider activation only)",
        "Set an activation policy",
        "Enable consumer activation (Consumer-run analyses only)",
        "Request permission from the consumer (Provider activation only)",
        "Set up activation in the web app (Optional)",
        "A template used to activate results is similar to a template used to run an analysis. For example, it is added to the clean room with the\nprovider.add_custom_sql_template command like an analysis template. However, an activation template has the following important\ndifferences:",
        "Name of the activation template must begin with the string activation. For example, an activation template named\nactivation_my_template meets the requirement.",
        "Activation template must create a table with a name that conforms to specific\nconventions and explicitly returns the table name.",
        "To hold the activation results in the clean room, every activation template must create a table. There are two requirements for this table:",
        "Name of the table must begin with the string cleanroom.activation_data_. For example, a table named\ncleanroom.activation_data_analysis_results meets the requirement.",
        "The portion of the template definition that creates the table must return the string that was appended to cleanroom.activation_data_\nto form the name of the table. For example, if the table name is cleanroom.activation_data_analysis_results, then the string\nanalysis_results must be returned.",
        "The following is an example of what must be included in the template definition to define a table and export it:",
        "For more information about the calling the provider.add_custom_sql_template command to add an activation template to a clean room,\nsee Snowflake Data Clean Rooms: Provider API reference guide.",
        "If the provider or consumer is going to push results to the provider\u2019s Snowflake account, the provider must link the\nsamooha_by_snowflake_local_db.library.temp_public_key table into the clean room. For example, to link the required table into a clean\nroom my_activation_cleanroom, execute:",
        "The provider could also use a single call to link the required table when linking their other tables and views.",
        "An activation policy defines which columns can be used in activation templates. This can be used with activation templates to ensure\nthat only the columns that are approved by the provider can be used with the activation template.",
        "A provider uses the provider.set_activation_policy API to set the activation policy. For example:",
        "If the consumer is going to push results to their own account, the provider must execute the\nprovider.enable_template_for_consumer_activation API. For example:",
        "If the provider configures the activation template to allow themselves or the consumer to push results to the provider\u2019s Snowflake account,\nthe provider must execute the provider.request_provider_activation_consent API. This API requests that the consumer approve the template\nfor this purpose. For example,",
        "The consumer has to approve the request before the provider can activate the results of a\nprovider-run analysis.",
        "If the provider is creating a user interface for the clean room so users can run analyses in the web app, they can also configure the clean\nroom so users can activate the results using the Activation Hub in the web app. When the provider executes the\nprovider.add_ui_form_customizations API to create the user interface, they specify the name of the activation template and whether\nthe template is being used for provider activation, consumer activation, or both.",
        "For example, the following example allows users to use the Activation Hub for both provider activation and consumer activation.",
        "If the provider configured the clean room so their users can use the web app to run analyses\nand activate results, the users can select the Activate button after running an analysis to open the Activation Hub, where they can\nselect the provider account to push results.",
        "If the provider is using the developer APIs rather than the web app to run analyses, they can execute the submit_analysis_request\nAPI to activate the results. For example:",
        "After the consumer or provider activates the results to the provider, the provider can view these results in their Snowflake account (not\nthe clean room environment).",
        "Note",
        "If the consumer activated the results, the provider must sign in to their clean room environment before signing in to their Snowflake\naccount to view the results.",
        "For more information, see View analysis results in the provider\u2019s Snowflake account.",
        "As a consumer, you want to do the following:",
        "Set up the clean room so the activation template can be used by the provider and/or the consumer to push results back to a Snowflake\naccount.",
        "Activate results back to a Snowflake account.",
        "View results in the Snowflake account",
        "A consumer should set an activation policy before activating results. For provider\nactivation, they also need to approve the provider\u2019s request.",
        "An activation policy defines which columns can be used within activation templates. This policy can be used with activation templates to ensure\nthat only the columns that are approved by the consumer can be used with the activation template.",
        "A consumer uses the consumer.set_activation_policy API to set the activation policy. For example:",
        "If the provider executed the provider.request_provider_activation_consent API for an activation template intended to be used to\nsend results to the provider\u2019s Snowflake account, then the consumer must approve the request. This approval is required regardless of\nwhether it is the provider or the consumer who is sending the results to the provider\u2019s account.",
        "If the consumer is using the web app, installing the clean room provides the consent that the provider needs.",
        "If the consumer is using the developer APIs, the consumer executes the consumer.approve_provider_activation_consent API. For example:",
        "If the provider configured the clean room so users can use the web app to run analyses and\nactivate results, the users can select the Activate button after running an analysis to open the Activation Hub, where they can select\nthe provider account (if provider activation was configured) or the consumer account (if consumer activation was configured) to push\nresults.",
        "If the consumer is using the developer APIs instead of the web app, the consumer sends results to a Snowflake account by calling the\nconsumer.run_activation command to execute the activation template, which is similar to executing the consumer.run_analysis\ncommand. The difference is the second argument, which specifies a string that helps identify the contents of the activation.",
        "For example, the consumer can call:",
        "For more information about the syntax of the consumer.run_activation command, see Snowflake Data Clean Rooms: Consumer API reference guide.",
        "If the consumer pushed results to their own Snowflake account, they can\nview the results in Snowsight.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}