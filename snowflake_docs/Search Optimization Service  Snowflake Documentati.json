{
    "url": "https://docs.snowflake.com/en/user-guide/search-optimization-service",
    "title": "Search Optimization Service | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "This feature requires Enterprise Edition (or higher). To inquire about upgrading, please contact Snowflake Support.",
        "The search optimization service can significantly improve the performance of certain types of lookup and analytical\nqueries. An extensive set of filtering predicates are supported (see Identifying queries that can benefit from search optimization).",
        "Note",
        "To start with a tutorial that compares execution time with and without search optimization, see\nGetting Started with Search Optimization.",
        "The search optimization service aims to significantly improve the performance of certain types of queries on tables, including:",
        "Selective point lookup queries on tables. A point lookup query returns only one or a small number of distinct rows. Use case\nexamples include:",
        "Business users who need fast response times for critical dashboards with highly selective filters.",
        "Data scientists who are exploring large data volumes and looking for specific subsets of data.",
        "Data applications retrieving a small set of results based on an extensive set of filtering predicates.",
        "For more information, see Speeding up point lookup queries with search optimization.",
        "Character data (text) and IPv4 address searches executed with the SEARCH and\nSEARCH_IP functions. For more information, see Speeding up text queries with search optimization.",
        "Substring and regular expression searches (e.g. [ NOT ] LIKE, [ NOT ] ILIKE,\n[ NOT ] RLIKE, etc.). For more information, see Speeding up substring and regular expression queries with search optimization.",
        "Queries on elements in VARIANT, OBJECT, and ARRAY (semi-structured)\ncolumns that use the following types of predicates:",
        "Equality predicates.",
        "IN predicates.",
        "Predicates that use ARRAY_CONTAINS.",
        "Predicates that use ARRAYS_OVERLAP.",
        "Predicates that use full-text search with SEARCH.",
        "Substring and regular expression predicates.",
        "Predicates that check for NULL values.",
        "For more information, see Speeding up queries of semi-structured data with search optimization.",
        "Queries that use selected geospatial functions with GEOGRAPHY values.\nFor more information, see Speeding up geospatial queries with search optimization.",
        "Once you identify the queries that can benefit from the search optimization service, you can\nenable search optimization for the columns and tables used in those queries.",
        "The search optimization service is generally transparent to users. Queries work the same as they do without search\noptimization; some are just faster. However, search optimization does have effects on certain other table operations. For\nmore information, see Working with search-optimized tables.",
        "To improve performance of search queries, the search optimization service creates and maintains a persistent data\nstructure called a search access path. The search access path keeps track of which values of the table\u2019s columns might\nbe found in each of its micro-partitions, allowing some micro-partitions to be\nskipped when scanning the table.",
        "A maintenance service is responsible for creating and maintaining the search access path:",
        "When you enable search optimization, the maintenance service creates and populates the search access path with the\ndata needed to perform the lookups.",
        "Building the search access path can take significant time, depending on the size of the table. The maintenance service\nworks in the background and does not block any operations on the table. Queries are not accelerated until the search\naccess path has been fully built.",
        "When data in the table is updated (for example, by loading new data sets or through DML operations), the maintenance service\nautomatically updates the search access path to reflect the changes to the data.",
        "If queries are run while the search access path is still being updated, queries might run more slowly, but will still\nreturn correct results.",
        "The progress of each table\u2019s maintenance service appears in the search_optimization_progress column in the\noutput of SHOW TABLES. Before you measure the performance improvement of search\noptimization on a newly-optimized table, make sure this column shows that the table has been fully optimized.",
        "Search access path maintenance is transparent. You don\u2019t need to create a virtual warehouse for running the\nmaintenance service. However, there is a cost for the storage and compute resources of maintenance. For more details\non costs, see Search optimization cost estimation and management.",
        "The search optimization service is one of several ways to optimize query performance. Other techniques include:",
        "Query acceleration.",
        "Clustering a table.",
        "Creating one or more materialized views (clustered or unclustered).",
        "Each of these has different advantages, as shown in the following table:",
        "Feature",
        "Supported Query Types",
        "Notes",
        "Search Optimization Service",
        "Equality searches.",
        "Substring and regular expression searches.",
        "Character data (text) and IPv4 address searches.",
        "Searches of elements in VARIANT.",
        "Searches of GEOGRAPHY columns using geospatial functions.",
        "The search optimization service can improve the performance of these types of searches for the\nsupported data types.",
        "Query Acceleration Service",
        "Query acceleration and search optimization are complementary. Both can accelerate the same query.\nSee Compatibility with Query Acceleration.",
        "Materialized View",
        "Equality searches.",
        "Range searches.",
        "Sort operations.",
        "You can also use materialized views to define different clustering keys on the same source table (or a subset of\nthat table), or to store flattened JSON or variant data so it only needs to be flattened once.",
        "Materialized views improve performance only for the subset of rows and columns included in the materialized view.",
        "Clustering the Table",
        "Equality searches.",
        "Range searches.",
        "A table can be clustered only on a single key, which can contain one or more columns or expressions.",
        "The following table shows which of these optimizations have storage or compute costs:",
        "Storage Cost",
        "Compute Cost",
        "Search Optimization Service",
        "\u2714",
        "\u2714",
        "Query Acceleration Service",
        "\u2714",
        "Materialized View",
        "\u2714",
        "\u2714",
        "Clustering the Table",
        "\u2714 [1]",
        "\u2714",
        "The process of reclustering can increase the size of fail-safe storage\ndue to the rewriting of existing partitions into new partitions. (Reclustering does not introduce any new rows,\nbut only reorganizes existing rows.) For details, see Credit and Storage Impact of Reclustering.",
        "Search optimization and query acceleration can work together to\noptimize query performance. First, search optimization can prune the micro-partitions not needed for a query. Then, for eligible queries, query acceleration can offload portions of the rest of the work to\nshared compute resources provided by the service.",
        "Performance of queries accelerated by both services varies depending on workload and available resources.",
        "Start by creating a table with data:",
        "Add the SEARCH OPTIMIZATION property to the table using ALTER TABLE:",
        "The following queries can use the search optimization service:",
        "The following query can use the search optimization service because the implicit cast is on the constant, not the column:",
        "The following cannot use the search optimization service because the cast is on the table\u2019s column:",
        "An IN clause is supported by the search optimization service:",
        "If predicates are individually supported by the search optimization service, then they can be joined by the conjunction\nAND and still be supported by the search optimization service:",
        "DELETE and UPDATE (and MERGE) can also use the search optimization service:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}