{
    "url": "https://docs.snowflake.com/en/sql-reference/external-functions-creating-aws-template-services",
    "title": "Step 1: Use the template to create the remote service (AWS Lambda function) and proxy service (API Gateway) | Snowflake Documentation",
    "paragraphs": [
        "This topic provides  detailed instructions for using the AWS CloudFormation template provided by Snowflake. The template simplifies\nthe tasks for creating the AWS Lambda Function (to use as the remote service) and the Amazon API Gateway (to use as the proxy\nservice) for your external function.",
        "This document shows how to create a sample external function on AWS by using a CloudFormation template.",
        "Snowflake provides a template you can start with. This template hides some details of the creation process and\nhard-codes some names (e.g. the stage name) and functionality. When you are ready to create your own custom external\nfunction, you can either customize a copy of the template, or you can follow the more flexible instructions at\nCreating external functions on AWS.",
        "If you would like to customize the template, you can read more about\nAWS CloudFormation .",
        "Note",
        "These instructions assume that you are already familiar with AWS administration. These instructions\ndescribe the general steps that you need to execute, but do not describe the user interface in\ndetail because the interface could change.",
        "Planning an external function for AWS",
        "Go to the AWS Management Console.",
        "In the top search bar, search for CloudFormation.",
        "Under Services, click on CloudFormation.",
        "Click on Create stack.",
        "If given a choice between With new resources (standard) or\nWith existing resources (import resources), then choose With new resources (standard).",
        "On the Create stack page, under Prepare template, select Template is ready.",
        "Select Upload a template file.",
        "Select Choose file.",
        "Navigate to the directory that contains your copy of the template, then select that template.",
        "Click Next to reach the page on which you enter names for roles, etc.",
        "Note",
        "The template uses default names for some resources. You can change the names.",
        "The template contains default values for most fields. However, you need to enter a few values, such as whether you want a\nregional endpoint or a private endpoint.",
        "Enter a name for the stack.",
        "Enter the type of endpoint that you want to use: \u201cREGIONAL\u201d or \u201cPRIVATE\u201d.",
        "If you are unsure which type to use, choose \u201cREGIONAL\u201d.",
        "If you choose \u201cPRIVATE\u201d, then update the VPC ID (labeled \u201csourceVpcId\u201d in the template).\n(For instructions on finding your VPC ID, see Planning an external function for AWS.)",
        "For more information about endpoints, including a description of the different types of endpoints, see\nAWS endpoints\nand Choosing your endpoint type: Regional endpoint vs. Private endpoint.",
        "Enter a name for the API Gateway IAM role (parameter apiGatewayIAMRoleName). This is the role assumed\nby Snowflake for authorizing with the API Gateway.\nMake sure this role does not already exist because the template will try to update the role if it exists.",
        "Record the role name in the tracking worksheet field titled New IAM Role Name.",
        "Enter a name for the Lambda Execution role (parameter lambdaExecutionRoleName). This role is used by the\nLambda service for adding CloudWatch logs.\nMake sure this role does not already exist because the template will try to update the role if it exists.",
        "Click Next.",
        "This page has some advanced options for template deployment.",
        "Optionally, set advanced options, such as stack policy. (These are not needed when creating the sample function\nusing the template supplied by Snowflake. However, if you use template-based deployment for functions that you have\ncustomized, then you might need to customize the advanced options at this point.)",
        "Click Next.",
        "On the review page, scroll down to the end and acknowledge that the CloudFormation template might create IAM\nresources with custom names. This is needed because the template creates two IAM roles as part of the deployment.",
        "Click on Create stack.",
        "The deployment will take a few seconds. After the deployment is complete, you should be on the Events tab for\nthe newly created stack. The created resources will be listed under the Resources tab.",
        "Step 2: Record the Amazon API Gateway URL and the new IAM role ARN",
        "Was this page helpful?",
        "On this page"
    ]
}