{
    "url": "https://docs.snowflake.com/en/developer-guide/sql-api/authenticating",
    "title": "Authenticating to the server | Snowflake Documentation",
    "paragraphs": [
        "This topic describes how to authenticate to the server when using the Snowflake SQL API.",
        "When you send a request, the request must include authentication information. The next sections explain how to add\nthis information to the request:",
        "Using OAuth",
        "Using key-pair authentication",
        "To use OAuth, follow these steps:",
        "Set up OAuth for authentication.",
        "See Introduction to OAuth for details on how to set up OAuth and get an OAuth token.",
        "Use SnowSQL to verify that you can use a generated OAuth token to connect to Snowflake:",
        "For Linux and MacOS systems",
        "For Windows systems",
        "In each API request you send, set the following headers:",
        "Authorization: Bearer oauth_token",
        "where oauth_token is the generated OAuth token.",
        "X-Snowflake-Authorization-Token-Type: OAUTH",
        "Note that you can also choose to omit the X-Snowflake-Authorization-Token-Type header. If this header is not present,\nSnowflake assumes that the token in the Authorization header is an OAuth token.",
        "To use key pair authentication, follow these steps:",
        "Set up key-pair authentication.",
        "As part of this process, you must:",
        "Generate a public-private key pair. The generated private key should be in a file (e.g. named rsa_key.p8).",
        "Assign the public key to your Snowflake user. After you assign the key to the user, run the\nDESCRIBE USER command. In the output, the RSA_PUBLIC_KEY_FP property should be set to the fingerprint of the public key assigned to the user.",
        "For instructions on how to generate the key pair and assign a key to a user,\nsee Key-pair authentication and key-pair rotation. For language-specific examples of creating a fingerprint and generating a\nJWT token, see the following:",
        "Python",
        "Java",
        "Node.js",
        "Use SnowSQL to verify that you can use the generated private key to\nconnect to Snowflake:",
        "If you generated an encrypted private key, SnowSQL prompts you for the passphrase that you created when you generated the key.",
        "In your application code:",
        "Generate the fingerprint (a SHA-256 hash) of the public key for the user. Prefix the fingerprint with SHA256:.\nFor example:",
        "SHA256:hash",
        "You can also execute the SQL DESCRIBE USER command to get the value from\nthe RSA_PUBLIC_KEY_FP property.",
        "Generate a JSON Web Token (JWT) with the following fields in the payload:",
        "Field",
        "Description",
        "Example",
        "iss",
        "Issuer of the JWT. Set it to the following value:",
        "account_identifier.user.SHA256:public_key_fingerprint",
        "where:",
        "account_identifier is your Snowflake account identifier.",
        "If you are using the account locator, exclude any region information from\nthe account locator.",
        "user is your Snowflake user name.",
        "SHA256:public_key_fingerprint is the fingerprint that you generated in the previous step.",
        "Note",
        "The account_identifier and user values must use all uppercase characters. If your account ID contains periods (.), you must replace them with hyphens (-), as periods in an account identifier cause the JWT to be invalid.",
        "MYORGANIZATION-MYACCOUNT.MYUSER.SHA256:public_key_fingerprint",
        "sub",
        "Subject for the JWT. Set it to the following value:",
        "account_identifier.user",
        "MYORGANIZATION-MYACCOUNT.MYUSER",
        "iat",
        "Issue time for the JWT in UTC. Set the value to the current time value as either seconds or milliseconds.",
        "1615370644 (seconds) .\n1615370644000 (milliseconds)",
        "exp",
        "Expiration time for the JWT in UTC.  You can specify the value as either seconds or milliseconds.",
        "Note",
        "The JWT is valid for at most one hour after the token is issued, even if you specify a longer expiration time.",
        "1615374184 (seconds) .\n1615374184000 (milliseconds)",
        "In each API request that you send, set the following headers:",
        "Authorization: Bearer JWT",
        "where JWT is the token that you generated.",
        "X-Snowflake-Authorization-Token-Type: KEYPAIR_JWT",
        "The following sections describe how to generate a JWT and fingerprint using Python.",
        "For an example of generating a JWT in Python, see sql-api-generate-jwt.py. The\nsql-api-generate-jwt.py example uses the PyJWT module, which you can install by running:",
        "The following sections of code demonstrate how to generate a JWT. For a full example,\nsee sql-api-generate-jwt.py.",
        "Note",
        "This example is intended for use as a reference only. Do not use this code in production applications or environments.",
        "The following sections of code demonstrate how to generate the fingerprint. For a full example, see\nsql-api-generate-jwt.py.",
        "For an example of generating a JWT in Java, see\nSimpleStatementsApi.java.",
        "Note",
        "This example is intended for use as a reference only. Do not use this code in production applications or environments.",
        "This example uses the following third-party libraries:",
        "Swagger Codegen: an open source library useful in developing REST\nAPIs and applications.",
        "Auth0: provides Java APIs for authentication and generating JWT tokens.",
        "For an example of generating a JWT in Node.js, see\nsql-api-generate-jwt.js.",
        "Note",
        "This example is intended for use as a reference only. Do not use this code in production applications or environments.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}