{
    "url": "https://docs.snowflake.com/en/release-notes/bcr-bundles/2023_06/bcr-1147",
    "title": "Query and Task History views and functions: New columns | Snowflake Documentation",
    "paragraphs": [
        "Attention",
        "This behavior change is in the 2023_06 bundle.",
        "For the current status of the bundle, refer to Bundle History.",
        "In the current Snowflake release, the output of query and task history views and functions include new columns. The views and functions\nthat are affected include:",
        "The following Account Usage views:",
        "QUERY_HISTORY",
        "QUERY_ACCELERATION_ELIGIBLE",
        "TASK_HISTORY",
        "The following Information Schema table functions:",
        "QUERY_HISTORY",
        "TASK_HISTORY",
        "The output of these views and functions includes the following new columns:",
        "Column Name",
        "Data Type",
        "Description",
        "query_hash",
        "TEXT",
        "Hash value that is computed based on the canonicalized text of the SQL statement.",
        "query_hash_version",
        "NUMBER",
        "The version of the hash in the query_hash column.",
        "query_parameterized_hash",
        "TEXT",
        "Hash value of the query text after literals are parameterized",
        "query_parameterized_hash_version",
        "NUMBER",
        "The version of the hash in the query_parameterized_hash column.",
        "If you previously defined a view that\nselects all columns (SELECT *) from any of these views, querying the\nview returns an error. You must recreate your view by using the CREATE OR REPLACE VIEW\ncommand.",
        "For example, suppose that you defined a view that selected all columns from the TASK_HISTORY view:",
        "Querying your view (my_task_history in this example) returns the results from the view.",
        "Querying your view (my_task_history in this example) returns an error about the number of columns in the view:",
        "As noted in the Usage Notes for CREATE VIEW, if a view selects all columns from an\nunderlying table or view, the view is not updated automatically when a new column is added to the underlying table or view.\nQuerying the view returns a column-related error.",
        "To prevent this error, you must recreate the view. For example, to recreate the view in the example above with specific columns\nselected (to avoid problems in the future due to columns being added):",
        "In addition, if you created a table that has the same columns as one of these views (for example, by using\nCREATE TABLE \u2026 LIKE SNOWFLAKE.ACCOUNT_USAGE.TASK_HISTORY), and you are copying rows from that view to the table, you must\nadd the new columns to your table. Use the ALTER TABLE \u2026 ADD COLUMN command to add the\nsame columns to your table that were added to the view.",
        "Ref: 1147",
        "Was this page helpful?"
    ]
}