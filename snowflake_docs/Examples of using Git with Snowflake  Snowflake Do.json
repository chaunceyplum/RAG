{
    "url": "https://docs.snowflake.com/en/developer-guide/git/git-examples",
    "title": "Examples of using Git with Snowflake | Snowflake Documentation",
    "paragraphs": [
        "Feature \u2014 Generally Available",
        "Using a Git repository in Snowflake is not supported in the Gov region.",
        "Examples in this topic describe how to use an integrated Git repository when developing Snowflake applications and how to execute SQL scripts\nin a repository.",
        "After you\u2019ve set up integration between Snowflake and your Git repository,\nyou can use files from the repository as handler code in stored procedures and UDFs. Note that,\nas with other staged handlers, you must qualify the handler function name with the name of its containing\nclass or module.",
        "This example describes how to use Python handler code from the repository in a stored procedure.",
        "The handler in this example depends on a database created with SQL code similar to the following:",
        "The example uses the following Python handler code contained in filter.py:",
        "From your Git client, add the code to the repository.",
        "Code in the following example uses the git command-line tool to add and commit the handler file to the local repository, then push it\nto the remote repository referenced by the repository stage in Snowflake:",
        "In Snowflake, refresh the repository stage.",
        "Assuming you\u2019ve set up integration between Snowflake and your Git repository,\nresulting in a repository stage, you can refresh the stage by fetching from the repository.",
        "Using Snowflake to refresh from your repository is similar to working with other Git client tools, where you fetch from the repository\nbefore beginning work to ensure that you have the latest changes.",
        "Code in the following example executes the ALTER GIT REPOSITORY command to\nretrieve the latest changes from the repository. The code generates a full clone that includes branches, tags, and commits.",
        "In Snowflake, write the procedure.",
        "When you write a procedure, you can reference its handler code at the code file\u2019s location in the repository stage. For example, to\nrefer to a file python-handlers/filter.py in the main branch of a repository synchronized to a Git repository stage called\nsnowflake_extensions, you would use syntax similar to the following:",
        "Code in the following example creates a procedure called filter_by_role, specifying handler code stored in the repository stage:",
        "Execute the procedure.",
        "The following code executes the procedure.",
        "The following is an example of output from the procedure.",
        "This example describes how to execute a SQL script contained in a repository stage. The script in the example creates a user and role.",
        "This example uses the EXECUTE IMMEDIATE FROM command to execute the SQL statements contained in a file in\nthe repository stage.",
        "With EXECUTE IMMEDIATE FROM, you can execute (from any Snowflake session) scripts you manage in your Git repository. For\nexample, you might have a script that sets up every new Snowflake account in your organization. The script might contain statements\nto create users, roles, objects, and grant privileges on the account and objects.",
        "Create the file setup.sql with the following contents:",
        "Commit your SQL file to your Git repository. For detailed instructions, see Commit the file and refresh the repository stage.",
        "Use the git command line tool to commit the file to your Git repository:",
        "In Snowflake, refresh the repository stage. For detailed instructions, see Commit the file and refresh the repository stage.",
        "Refresh the repository stage configuration_repo:",
        "In Snowflake, execute the file in your repository stage:",
        "Note",
        "The user executing the following statement must use a role that has the required privileges to execute all statements in the file.\nFor more information, see Access control requirements.",
        "The EXECUTE IMMEDIATE FROM commands returns the results of the last SQL statement\nin the file:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}