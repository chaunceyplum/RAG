{
    "url": "https://docs.snowflake.com/en/user-guide/snowflake-cortex/cortex-search/tutorials/cortex-search-tutorial-2-chat",
    "title": "Tutorial 2: Build a simple chat application with Cortex Search | Snowflake Documentation",
    "paragraphs": [
        "This tutorial describes how to use Cortex Search and the COMPLETE (SNOWFLAKE.CORTEX) function\nto setup a Retrieval-Augmented Generation (RAG) chatbot in Snowflake.",
        "Create a Cortex Search Service based on a dataset downloaded from Kaggle.",
        "Create a Streamlit in Snowflake app that lets you query your Cortex Search Service.",
        "The following prerequisites are required to complete this tutorial:",
        "You have a Snowflake account and user with a role that grants the necessary\nprivileges to create a database, tables, virtual warehouse objects, Cortex Search services, and Streamlit apps.",
        "Refer to the Snowflake in 20 minutes for instructions to meet these requirements.",
        "You will use a sample dataset hosted on Kaggle for this tutorial.\nThe Books dataset is a collection of book name, title and descriptions. You can download the dataset from the following link:",
        "The complete dataset can be found on\nKaggle.",
        "Note",
        "In a non-tutorial setting, you would bring your own data, possibly already in a Snowflake table.",
        "Run the following SQL code to set up the necessary database, schema, and warehouse:",
        "Note the following:",
        "The CREATE DATABASE statement creates a database. The database automatically includes a schema named PUBLIC.",
        "The CREATE WAREHOUSE statement creates an initially suspended warehouse.",
        "First create a stage to store the files downloaded from Kaggle. This stage will hold the books dataset.",
        "Now upload the dataset. You can upload the dataset in Snowsight or using SQL. To upload in Snowsight:",
        "Sign in to Snowsight.",
        "Select Data in the left-side navigation menu.",
        "Select your database cortex_search_tutorial_db.",
        "Select your schema public.",
        "Select Stages and select books_data_stage.",
        "On the top right, Select the + Files button.",
        "Drag and drop files into the UI or select Browse to choose a file from the dialog window.",
        "Select Upload to upload your file, BooksDatasetClean.csv",
        "Select the three dots on the right of the file and select Load into table.",
        "Name the table BOOKS_DATASET_RAW and select Next.",
        "In the left panel of the load data dialog, choose First line contains header from the Header menu.",
        "Then select Load.",
        "Feeding long documents to Cortex Search will not be performant because retrieval models work best with small chunks of text. So\nnext, create a Python UDF to chunk the text. Navigate back to a SQL editor and execute the following:",
        "Create a table to store the chunks of text extracted from the transcripts. Include the title and speaker in the chunk to provide context:",
        "Verify the table contents:",
        "Create a Cortex Search Service on the table to allow you to search through the chunks in the book_description_chunks:",
        "You can query the service with Python SDK (using the snowflake Python package). This tutorial\ndemonstrates using the Python SDK in a Streamlit in Snowflake application.",
        "First, ensure your global Snowsight UI role is the same as the role used to create\nthe service in the service creation step.",
        "Sign in to Snowsight.",
        "Select Projects \u00bb Streamlit in the left-side navigation menu.",
        "Select + Streamlit App.",
        "Important: Select the cortex_search_tutorial_db database and public schema for the app location.",
        "In the left pane of the Streamlit in Snowflake editor, select Packages and add snowflake (version >= 0.8.0)  to install the package in your application.",
        "Replace the example application code with the following Streamlit app:",
        "Enter a query in the text box to try out your new app. Some sample queries you can try are:",
        "I like Harry Potter. Can you recommend more books I will like?",
        "Can you recommend me books on Greek Mythology?",
        "Execute the following DROP <object> commands to return your system to its state before you began the tutorial:",
        "Dropping the database automatically removes all child database objects such as tables.",
        "Congratulations! You have successfully built a simple search app on text data in Snowflake.\nYou can move on to Tutorial 3\nto see how to build an AI chatbot with Cortex Search from a set of PDF files.",
        "Continue learning using the following resources:",
        "Cortex Search overview",
        "Query a Cortex Search Service",
        "Was this page helpful?"
    ]
}