{
    "url": "https://docs.snowflake.com/en/sql-reference/sql/alter-privacy-policy",
    "title": "ALTER PRIVACY POLICY | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "This feature requires Enterprise Edition (or higher). To inquire about upgrading, please contact Snowflake Support.",
        "Modifies the properties of an existing privacy policy.",
        "Caution",
        "When changing budget_limit, max_budget_per_aggregate, or\nbudget_window, any property not specified in your ALTER command will revert\nback to its default value. To obtain the current values of the parameters, execute the DESCRIBE PRIVACY POLICY command.",
        "CREATE PRIVACY POLICY ,  DESCRIBE PRIVACY POLICY , DROP PRIVACY POLICY , SHOW PRIVACY POLICIES",
        "Specifies the identifier for the privacy policy to alter.",
        "If the identifier contains spaces or special characters, the entire string must be enclosed in double quotes.\nIdentifiers enclosed in double quotes are also case-sensitive.",
        "For more information, see Identifier requirements.",
        "Specifies the new identifier for the privacy policy; must be unique for your schema. The new identifier cannot be used if the\nidentifier is already in place for a different privacy policy.",
        "For more information, see Identifier requirements.",
        "You can move the object to a different database and/or schema while optionally renaming the object. To do so, specify\na qualified new_name value that includes the new database and/or schema name in the form\ndb_name.schema_name.object_name or schema_name.object_name, respectively.",
        "Note",
        "The destination database and/or schema must already exist. In addition, an object with the same name cannot already\nexist in the new location; otherwise, the statement returns an error.",
        "Moving an object to a managed access schema is prohibited unless the object owner (that is, the role that has\nthe OWNERSHIP privilege on the object) also owns the target schema.",
        "Specifies one (or more) properties to set for the privacy policy:",
        "Specifies a new body for the policy.",
        "The SQL expression of the body calls two functions to control the return value of the policy:\nNO_PRIVACY_POLICY and PRIVACY_BUDGET. When a query is executed against a table that has been assigned the\npolicy, Snowflake evaluates the conditions of the body to call the appropriate function and return a value. This return value determines\nwhich privacy budget, if any, is associated with the query against the privacy-protected table.",
        "The expression can use context functions such as CURRENT_ROLE or INVOKER_ROLE\nto associate a user or group of users with a privacy budget.",
        "If you use a CASE block in the body\u2019s expression, it must include an ELSE statement that\ncalls either NO_PRIVACY_POLICY or PRIVACY_BUDGET. Every user must either be associated with a privacy budget or have unrestricted access to\nthe privacy-protected table. If a user should not have any access to a privacy-protected table or view, revoke SELECT privileges rather than\ntrying to define this in the privacy policy.",
        "Use the body\u2019s expression to call the NO_PRIVACY_POLICY function when you want a query to have unrestricted access to the table or view to which the privacy policy is assigned.",
        "Use the body\u2019s expression to call the PRIVACY_BUDGET function when you want to return a privacy budget from the policy. The\nexpression can contain conditions that allow the policy to return different privacy budgets for different queries based on factors like\nthe user who is executing the query.",
        "In cross-account collaboration, privacy budgets are automatically namespaced by the account identifier of the consumer account, which\nprevents two different consumer accounts from sharing the same privacy budget even if the name of the privacy budget is the same. Using\nthe CURRENT_ACCOUNT function to concatenate the name of the account with the name of the privacy budget\ncan help distinguish between privacy budgets. For example, you could call the function as follows:\nPRIVACY_BUDGET(BUDGET_NAME => 'external_budget.' || CURRENT_ACCOUNT()).",
        "The signature of the PRIVACY_BUDGET function is:",
        "Privacy budget arguments:",
        "Resolves to the name of a privacy budget. Snowflake creates the privacy budget automatically when its name is\nspecified in the body of the privacy policy.",
        "A decimal number > 0 that specifies the budget limit for this privacy policy.\nThis controls the total amount of privacy loss allowed. Adjusting this value\nchanges how many total differentially private aggregates can be calculated\nagainst tables protected by this privacy budget during the refresh period. When a query is run that would\ncause the cumulative privacy loss to exceed this number, the query will fail.\nAs a rough estimate, a budget\nlimit of 233 with MAX_BUDGET_PER_AGGREGATE=1 permits about 1000 aggregates\nper refresh period.",
        "Default: 233.0",
        "Specifies how much privacy budget is used for each aggregate function in a\nquery. Adjusting this value changes the amount of noise added to each aggregate\nquery, as well as the number of aggregates that can be calculated before the budget limit is reached. As an example, the query\nselect count(*), avg(a) ... has two aggregates: count(*) and avg(a). Specify a decimal value > 0.",
        "Default: 0.5",
        "How often the privacy budget is refreshed, that is, has its cumulative privacy loss reset to 0. Valid values:",
        "Daily: Refreshed every day at 12:00 AM UTC",
        "Weekly: Refreshed every Sunday at 12:00 AM UTC",
        "Monthly: Refreshed on the first day of the calendar month at 12:00 AM UTC",
        "Yearly: Refreshed on January 1 at 12:00 AM UTC",
        "Never: Privacy budget is never refreshed.",
        "Default: Weekly",
        "Specifies the tag name and the tag string value.",
        "The tag value is always a string, and the maximum number of characters for the tag value is 256.",
        "For information about specifying tags in a statement, see Tag quotas for objects and columns.",
        "Adds a comment or overwrites the existing comment for the privacy policy.",
        "Default: No value",
        "Specifies one or more properties and/or parameters to unset, by resetting them to their defaults, for the privacy policy:",
        "TAG tag_name [ , tag_name ... ]",
        "COMMENT",
        "When resetting a property/parameter, specify only the name; specifying a value for the property will return an error.",
        "A role used to execute this SQL command must have the following\nprivileges at a minimum:",
        "Privilege",
        "Object",
        "Notes",
        "OWNERSHIP",
        "Privacy policy",
        "OWNERSHIP is a special privilege on an object that is automatically granted to the role that created the object, but can also be transferred using the GRANT OWNERSHIP command to a different role by the owning role (or any role with the MANAGE GRANTS privilege).",
        "The USAGE privilege on the parent database and schema are required to perform operations on any object in a schema.",
        "For instructions on creating a custom role with a specified set of privileges, see Creating custom roles.",
        "For general information about roles and privilege grants for performing SQL actions on\nsecurable objects, see Overview of Access Control.",
        "If you want to update an existing privacy policy and need to see the current definition of the policy, run the\nDESCRIBE PRIVACY POLICY command. You can also use the GET_DDL function to obtain the full definition\nof the privacy policy, including its body.",
        "Moving a privacy policy to a managed access schema\n(using the ALTER PRIVACY POLICY \u2026 RENAME TO syntax) is prohibited unless the privacy policy owner\n(that is, the role that has the OWNERSHIP privilege on the privacy policy) also owns the target schema.",
        "Regarding metadata:",
        "Attention",
        "Customers should ensure that no personal data (other than for a User object), sensitive data, export-controlled data, or other regulated data is entered as metadata when using the Snowflake service. For more information, see Metadata fields in Snowflake.",
        "Modify the body of a privacy policy my_priv_policy so it always returns a budget named analysts:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}