{
    "url": "https://docs.snowflake.com/en/sql-reference/functions/build_scoped_file_url",
    "title": "BUILD_SCOPED_FILE_URL | Snowflake Documentation",
    "paragraphs": [
        "File functions",
        "Generates a scoped Snowflake file URL to a staged file using the stage name and relative file path as inputs.",
        "A scoped URL is encoded and\npermits access to a specified file for a limited period of time. The scoped URL in the output is valid for the\ncaller until the persisted query result period ends (until the results cache expires). That period is currently 24 hours.",
        "Call this SQL function in a query or view. You can also use this SQL function to pass a scoped URL to a user-defined function (UDF)\nor stored procedure.",
        "Name of the internal or external stage where the file is stored.",
        "Note",
        "If the stage name includes spaces or special characters, it must be enclosed in single quotes (for example,\n'@\"my stage\"' for a stage named \"my stage\").",
        "Path and filename of the file, relative to its location on the stage.",
        "The function returns a scoped URL in the following format:",
        "Where:",
        "Hostname of the Snowflake account for your stage. The hostname starts with a Snowflake-provided account locator\nand ends with the Snowflake domain (snowflakecomputing.com):",
        "account_locator.snowflakecomputing.com",
        "For more details, see Account identifiers.",
        "Note",
        "For Business Critical accounts, a privatelink segment is prepended to the URL just\nbefore snowflakecomputing.com (privatelink.snowflakecomputing.com), even if private connectivity to the Snowflake service is\nnot enabled for your account.",
        "Query ID of the BUILD_SCOPED_FILE_URL call that generated the scoped URL.",
        "Encoded path to the files to access using the scoped URL.",
        "The permissions required to call this SQL function differ depending on how it is called:",
        "SQL Operation",
        "Permissions Required",
        "Query",
        "USAGE (external stage) or READ (internal stage)",
        "Column definition in a view",
        "The view owner (i.e. role that has the OWNERSHIP privilege on the view) must have the stage privilege: USAGE (external stage) or\nREAD (internal stage).",
        "A role that queries the view only requires the SELECT privilege on the view.",
        "Stored procedure",
        "The stored procedure owner (i.e. role that has the OWNERSHIP privilege on the stored procedure) must have the stage privilege:\nUSAGE (external stage) or READ (internal stage).",
        "A role that queries the stored procedure only requires the USAGE privilege on the stored procedure.",
        "UDF",
        "The UDF owner (i.e. role that has the OWNERSHIP privilege on the UDF) must have the stage privilege: USAGE (external stage) or READ\n(internal stage).",
        "A role that queries the UDF only requires the USAGE privilege on the UDF.",
        "An HTTP client that sends a scoped URL to the REST API must be configured to allow redirects.",
        "When a scoped URL is accessed, the query history shows that the internal GET_SCOPED_FILE function was called.",
        "If files downloaded from an internal stage are corrupted, verify with the stage creator that ENCRYPTION = (TYPE = 'SNOWFLAKE_SSE') is set for the stage.",
        "Retrieve a scoped URL for a bitmap format image file in an external stage:",
        "Create a secure view that filters the results of a BUILD_SCOPED_FILE_URL function call for a specific audience. In this example, querying\nthe secure view returns only those files in the stage file path that include the string acct1:",
        "Was this page helpful?",
        "On this page"
    ]
}