{
    "url": "https://docs.snowflake.com/en/user-guide/data-load-dirtables-manage",
    "title": "Managing directory tables | Snowflake Documentation",
    "paragraphs": [
        "This topic provides instructions for creating and managing external or internal stages with directory tables.",
        "This section provides instructions for creating stages (using CREATE STAGE) that layer a directory table to store\nmetadata about the staged files.",
        "Directory tables on internal stages require manual metadata refreshes.\nYou could also choose to include a directory table on external stages and refresh the metadata manually. For information about automated metadata refreshes, see\nautomated metadata refreshes.",
        "The syntax for creating a stage with a directory table is nearly identical to creating a standard external or internal stage. Set the\noptional DIRECTORY parameter to TRUE.",
        "For the complete syntax and parameter descriptions, see CREATE STAGE. To add a directory table to an existing stage, use the ALTER STAGE \u2026 SET DIRECTORY command.",
        "Note",
        "After you create a stage with a directory table, you must execute ALTER STAGE \u2026 REFRESH to manually refresh the directory table\nmetadata.",
        "Create an internal stage named mystage that includes a directory table. The stage references a file format named myformat:",
        "Create an external stage named mystage that includes a directory table. The stage references a bucket or container named load\nwith a path of files. Secure access to the cloud storage location is provided via the my_storage_int storage integration:",
        "Note",
        "The storage location in the URL value must end in a forward slash (/).",
        "Amazon S3",
        "Google Cloud Storage",
        "Microsoft Azure",
        "You can automatically refresh the metadata for a directory table by using the event messaging service for your cloud storage service.\nTo configure automated refreshes, see Automated directory table metadata refreshes.",
        "Note",
        "Manual refreshes on an external stage block simultaneous automated refreshes.\nAutomated refreshes resume after the manual refresh completes.",
        "Manual refreshes perform a list operation on a stage, and can be slow or expensive for large or fast-growing stages.\nInstead, use event-based automated refreshes.",
        "To manually refresh the metadata in a directory table, use the ALTER STAGE command.",
        "For best performance, use a selective SUBPATH with ALTER STAGE.\nDoing so reduces the number of files that need to be listed and checked. To learn about organizing your data by path,\nsee best practices for staging your data files.",
        "For example:",
        "The command returns the following columns:",
        "Column",
        "Description",
        "file",
        "Name of the staged source file and relative path to the file.",
        "status",
        "Status: REGISTERED_NEW, REGISTERED_UPDATE, REGISTER_SKIPPED, REGISTER_FAILED, UNREGISTERED, or UNREGISTER_FAILED.",
        "description",
        "Detailed description of the file registration status.",
        "Was this page helpful?",
        "On this page"
    ]
}