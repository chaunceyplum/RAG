{
    "url": "https://docs.snowflake.com/en/user-guide/key-pair-auth",
    "title": "Key-pair authentication and key-pair rotation | Snowflake Documentation",
    "paragraphs": [
        "This topic describes using key pair authentication and key pair rotation in Snowflake.",
        "Snowflake supports using key pair authentication for enhanced authentication security as an alternative to basic authentication, such as\nusername and password.",
        "This authentication method requires, as a minimum, a 2048-bit RSA key pair. You can generate the Privacy Enhanced Mail (PEM)\nprivate-public key pair using OpenSSL. Some of the Supported Snowflake Clients allow using encrypted private keys to connect to\nSnowflake. The public key is assigned to the Snowflake user who uses the Snowflake client to connect and authenticate to Snowflake.",
        "Snowflake also supports rotating public keys in an effort to allow compliance with more robust security and governance postures.",
        "The following table summarizes support for key pair authentication among Snowflake Clients. A checkmark (\u2714) indicates full support.\nA missing checkmark indicates key pair authentication is not supported.",
        "Client",
        "Key Pair Authentication",
        "Key Pair Rotation",
        "Unencrypted Private Keys",
        "Encrypted Private Keys",
        "Snowflake CLI",
        "\u2714",
        "\u2714",
        "\u2714",
        "\u2714",
        "SnowSQL (CLI client)",
        "\u2714",
        "\u2714",
        "\u2714",
        "Snowflake Connector for Python",
        "\u2714",
        "\u2714",
        "\u2714",
        "\u2714",
        "Snowflake Connector for Spark",
        "\u2714",
        "\u2714",
        "\u2714",
        "Snowflake Connector for Kafka",
        "\u2714",
        "\u2714",
        "\u2714",
        "Go driver",
        "\u2714",
        "\u2714",
        "\u2714",
        "JDBC Driver",
        "\u2714",
        "\u2714",
        "\u2714",
        "\u2714",
        "ODBC Driver",
        "\u2714",
        "\u2714",
        "\u2714",
        "\u2714",
        "Node.js Driver",
        "\u2714",
        "\u2714",
        "\u2714",
        "\u2714",
        ".NET Driver",
        "\u2714",
        "\u2714",
        "\u2714",
        "\u2714",
        "PHP PDO Driver for Snowflake",
        "\u2714",
        "\u2714",
        "\u2714",
        "\u2714",
        "Complete the following steps to configure key pair authentication for all supported Snowflake clients.",
        "Depending on which one of the Supported Snowflake Clients you use to connect to Snowflake, you have the option to generate encrypted or\nunencrypted private keys. Generally, it is safer to generate encrypted keys. Snowflake recommends communicating with your internal security\nand governance officers to determine which key type to generate prior to completing this step.",
        "Tip",
        "The command to generate an encrypted key prompts for a passphrase to regulate access to the key. Snowflake recommends using a passphrase\nthat complies with PCI DSS standards to protect the locally generated private key. Additionally, Snowflake recommends storing the\npassphrase in a secure location. If you are using an encrypted key to connect to Snowflake, enter the passphrase during the initial\nconnection. The passphrase is only used for protecting the private key and will never be sent to Snowflake.",
        "To generate a long and complex passphrase based on PCI DSS standards:",
        "Access the PCI Security Standards Document Library.",
        "For PCI DSS, select the most recent version and your desired language.",
        "Complete the form to access the document.",
        "Search for Passwords/passphrases must meet the following: and follow the recommendations for password/passphrase\nrequirements, testing, and guidance. Depending on the document version, the phrase is likely located in a section called\nRequirement 8: Identify and authenticate access to system components or a similar name.",
        "To start, open a terminal window and generate a private key.",
        "You can generate either an encrypted version of the private key or an unencrypted version of the private key.",
        "To generate an unencrypted version, use the following command:",
        "To generate an encrypted version, use the following command, which omits -nocrypt:",
        "The commands generate a private key in PEM format.",
        "From the command line, generate the public key by referencing the private key. The following command assumes the private key is encrypted\nand contained in the file named rsa_key.p8.",
        "The command generates the public key in PEM format.",
        "Copy the public and private key files to a local directory for storage. Record the path to the files. Note that the private key is stored\nusing the PKCS#8 (Public Key Cryptography Standards) format and is encrypted using the passphrase you specified in the previous step.",
        "However, the file should still be protected from unauthorized access using the file permission mechanism provided by your operating system.\nIt is your responsibility to secure the file when it is not being used.",
        "Execute an ALTER USER command to assign the public key to a Snowflake user.",
        "Note",
        "Only owners of a user, or users with the SECURITYADMIN role or higher can alter a user. For more information, see\nOverview of Access Control and GRANT OWNERSHIP",
        "Exclude the public key delimiters in the SQL statement.",
        "Execute the following command to retrieve the user\u2019s public key fingerprint:",
        "Output:",
        "Copy the output.",
        "Run the following command on the command line:",
        "Output:",
        "Compare both outputs. If both outputs match, the user correctly configured their public key.",
        "Update the client to use key pair authentication to connect to Snowflake.",
        "Snowflake CLI",
        "SnowSQL",
        "Python connector",
        "Spark connector",
        "Kafka connector",
        "Go driver",
        "JDBC driver",
        "ODBC driver",
        ".NET driver",
        "Node.js Driver",
        "Snowflake supports multiple active keys to allow for uninterrupted rotation. Rotate and replace your public and private keys based on the\nexpiration schedule you follow internally.",
        "Currently, you can use the RSA_PUBLIC_KEY and RSA_PUBLIC_KEY_2 parameters for ALTER USER to\nassociate up to 2 public keys with a single user.",
        "Complete the following steps to configure key pair rotation and rotate your keys.",
        "Complete all steps in Configuring key-pair authentication with the following updates:",
        "Generate a new private and public key set.",
        "Assign the public key to the user. Set the public key value to either RSA_PUBLIC_KEY or RSA_PUBLIC_KEY_2, whichever key\nvalue is not currently in use. For example:",
        "Update the code to connect to Snowflake. Specify the new private key.",
        "Snowflake verifies the correct active public key for authentication based on the private key submitted with your connection information.",
        "Remove the old public key from the user profile using an ALTER USER command.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}