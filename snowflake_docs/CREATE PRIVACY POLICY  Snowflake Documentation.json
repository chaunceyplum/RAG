{
    "url": "https://docs.snowflake.com/en/sql-reference/sql/create-privacy-policy",
    "title": "CREATE PRIVACY POLICY | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "This feature requires Enterprise Edition (or higher). To inquire about upgrading, please contact Snowflake Support.",
        "Creates a new privacy policy or replaces an existing privacy policy.",
        "ALTER PRIVACY POLICY , DESCRIBE PRIVACY POLICY , DROP PRIVACY POLICY , SHOW PRIVACY POLICIES",
        "String that specifies the identifier (that is, name) for the privacy policy; must be unique for the schema in which the privacy policy is\ncreated.",
        "In addition, the identifier must start with an alphabetic character and cannot contain spaces or special characters unless the\nentire identifier string is enclosed in double quotes (for example, \"My object\"). Identifiers enclosed in double quotes are also\ncase-sensitive.",
        "For more information, see Identifier requirements.",
        "The SQL expression of the body calls two functions to control the return value of the policy:\nNO_PRIVACY_POLICY and PRIVACY_BUDGET. When a query is executed against a table that has been assigned the\npolicy, Snowflake evaluates the conditions of the body to call the appropriate function and return a value. This return value determines\nwhich privacy budget, if any, is associated with the query against the privacy-protected table.",
        "The expression can use context functions such as CURRENT_ROLE or INVOKER_ROLE\nto associate a user or group of users with a privacy budget.",
        "If you use a CASE block in the body\u2019s expression, it must include an ELSE statement that\ncalls either NO_PRIVACY_POLICY or PRIVACY_BUDGET. Every user must either be associated with a privacy budget or have unrestricted access to\nthe privacy-protected table. If a user should not have any access to a privacy-protected table or view, revoke SELECT privileges rather than\ntrying to define this in the privacy policy.",
        "Use the body\u2019s expression to call the NO_PRIVACY_POLICY function when you want a query to have unrestricted access to the table or view to which the privacy policy is assigned.",
        "Use the body\u2019s expression to call the PRIVACY_BUDGET function when you want to return a privacy budget from the policy. The\nexpression can contain conditions that allow the policy to return different privacy budgets for different queries based on factors like\nthe user who is executing the query.",
        "In cross-account collaboration, privacy budgets are automatically namespaced by the account identifier of the consumer account, which\nprevents two different consumer accounts from sharing the same privacy budget even if the name of the privacy budget is the same. Using\nthe CURRENT_ACCOUNT function to concatenate the name of the account with the name of the privacy budget\ncan help distinguish between privacy budgets. For example, you could call the function as follows:\nPRIVACY_BUDGET(BUDGET_NAME => 'external_budget.' || CURRENT_ACCOUNT()).",
        "The signature of the PRIVACY_BUDGET function is:",
        "Privacy budget arguments:",
        "Resolves to the name of a privacy budget. Snowflake creates the privacy budget automatically when its name is\nspecified in the body of the privacy policy.",
        "A decimal number > 0 that specifies the budget limit for this privacy policy.\nThis controls the total amount of privacy loss allowed. Adjusting this value\nchanges how many total differentially private aggregates can be calculated\nagainst tables protected by this privacy budget during the refresh period. When a query is run that would\ncause the cumulative privacy loss to exceed this number, the query will fail.\nAs a rough estimate, a budget\nlimit of 233 with MAX_BUDGET_PER_AGGREGATE=1 permits about 1000 aggregates\nper refresh period.",
        "Default: 233.0",
        "Specifies how much privacy budget is used for each aggregate function in a\nquery. Adjusting this value changes the amount of noise added to each aggregate\nquery, as well as the number of aggregates that can be calculated before the budget limit is reached. As an example, the query\nselect count(*), avg(a) ... has two aggregates: count(*) and avg(a). Specify a decimal value > 0.",
        "Default: 0.5",
        "How often the privacy budget is refreshed, that is, has its cumulative privacy loss reset to 0. Valid values:",
        "Daily: Refreshed every day at 12:00 AM UTC",
        "Weekly: Refreshed every Sunday at 12:00 AM UTC",
        "Monthly: Refreshed on the first day of the calendar month at 12:00 AM UTC",
        "Yearly: Refreshed on January 1 at 12:00 AM UTC",
        "Never: Privacy budget is never refreshed.",
        "Default: Weekly",
        "Specifies a comment for the privacy policy.",
        "Default: No value",
        "A role used to execute this SQL command must have the following\nprivileges at a minimum:",
        "Privilege",
        "Object",
        "Notes",
        "CREATE PRIVACY POLICY",
        "Schema",
        "The USAGE privilege on the parent database and schema are required to perform operations on any object in a schema.",
        "For instructions on creating a custom role with a specified set of privileges, see Creating custom roles.",
        "For general information about roles and privilege grants for performing SQL actions on\nsecurable objects, see Overview of Access Control.",
        "Regarding metadata:",
        "Attention",
        "Customers should ensure that no personal data (other than for a User object), sensitive data, export-controlled data, or other regulated data is entered as metadata when using the Snowflake service. For more information, see Metadata fields in Snowflake.",
        "CREATE OR REPLACE <object> statements are atomic. That is, when an object is replaced, the old object is deleted and the new object is created in a single transaction.",
        "Create a privacy policy that always returns a budget named analysts:",
        "Create a privacy policy that will give admin  unrestricted access to the privacy-protected table while associating all other users with\nthe privacy budget analysts:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}