{
    "url": "https://docs.snowflake.com/en/sql-reference/sql/create-security-integration-oauth-external",
    "title": "CREATE SECURITY INTEGRATION (External OAuth) | Snowflake Documentation",
    "paragraphs": [
        "Attention",
        "Mentions of Microsoft Azure Active Directory refer to Microsoft Entra ID.",
        "Creates a new External OAuth security integration in the account or replaces an existing integration. An External OAuth security\nintegration allows a client to use a third-party authorization server to obtain the access tokens needed to interact with Snowflake.",
        "For information about creating other types of security integrations (e.g. Snowflake OAuth), see CREATE SECURITY INTEGRATION.",
        "ALTER SECURITY INTEGRATION (External OAuth) , DROP INTEGRATION , SHOW INTEGRATIONS",
        "String that specifies the identifier (i.e. name) for the integration; must be unique in your account.",
        "In addition, the identifier must start with an alphabetic character and cannot contain spaces or special characters unless the\nentire identifier string is enclosed in double quotes (e.g. \"My object\"). Identifiers enclosed in double quotes are also\ncase-sensitive.",
        "For more details, see Identifier requirements.",
        "Distinguishes the External OAuth integration from a\nSnowflake OAuth integration.",
        "Specifies whether to initiate operation of the integration or suspend it.",
        "TRUE allows the integration to run based on the parameters specified in the pipe definition.",
        "FALSE suspends the integration for maintenance. Any integration between Snowflake and a third-party service fails\nto work.",
        "Specifies the OAuth 2.0 authorization server to be Okta, Microsoft Entra ID, Ping Identity PingFederate, or a Custom OAuth 2.0 authorization\nserver.",
        "Specifies the URL to define the OAuth 2.0 authorization server.",
        "Specifies the access token claim or claims to map the access token to a user record.",
        "The data type of the claim must be a string or a list of strings.",
        "Indicates which Snowflake user record attribute should be used to map the access token to a user record.",
        "Specifies the URL or a list of URLs from where you can download public keys or certificates to validate an External OAuth access\ntoken.",
        "If you set the EXTERNAL_OAUTH_TYPE parameter to AZURE, then you can specify a maximum of three URLs. For example, to\nspecify two URLs, use the following syntax:",
        "If you set the EXTERNAL_OAUTH_TYPE parameter to OKTA, PING_FEDERATE, or CUSTOM, then you can specify only\none URL. For example:",
        "Specifies a Base64-encoded RSA public key, without the -----BEGIN PUBLIC KEY----- and -----END PUBLIC KEY-----\nheaders.",
        "Specifies a second RSA public key, without the -----BEGIN PUBLIC KEY----- and -----END PUBLIC KEY----- headers. Used\nfor key rotation.",
        "Specifies the list of roles that a client cannot set as the primary role.\nA role in this list cannot be used when creating a Snowflake session based on the access token from the External OAuth\nauthorization server.",
        "By default, this list includes the ACCOUNTADMIN, ORGADMIN, and SECURITYADMIN roles. To remove these privileged roles from the list, use\nthe ALTER ACCOUNT command to set the EXTERNAL_OAUTH_ADD_PRIVILEGED_ROLES_TO_BLOCKED_LIST account parameter to\nFALSE.",
        "Specifies the list of roles that the client can set as the primary role.",
        "A role in this list can be used when creating a Snowflake session based on the access token from the External OAuth authorization\nserver.",
        "Caution",
        "This parameter supports the ACCOUNTADMIN, ORGADMIN, and SECURITYADMIN system roles.",
        "Exercise caution when creating a Snowflake session with these highly privileged roles set as the primary role.",
        "Specifies additional values for the access token\u2019s audience validation on top of using the Customer\u2019s Snowflake\nAccount URL (i.e. <account_identifier>.snowflakecomputing.com). For more information, see\nAccount identifiers.",
        "For details on this parameter when using Power BI SSO, refer to\nPower BI SSO security integrations.",
        "Currently, multiple audience URLs can be specified for External OAuth Custom Clients only. Each URL\nmust be enclosed in single quotes, with a comma separating each URL. For example:",
        "Specifies whether the OAuth client or user can use a role that is not defined in the OAuth access token. Note that with a\nPower BI to Snowflake integration, the PowerBI user cannot switch roles even when this parameter is\nenabled.",
        "DISABLE does not allow the OAuth client or user to switch roles (i.e. USE ROLE role;). Default.",
        "ENABLE allows the OAuth client or user to switch roles.",
        "ENABLE_FOR_PRIVILEGE allows the OAuth client or user to switch roles only for a client or user with the USE_ANY_ROLE\nprivilege. This privilege can be granted and revoked to one or more roles available to the user. For example:",
        "Note that the value can be optionally enclosed in single quotes (e.g. either DISABLE or 'DISABLE').",
        "Specifies the scope delimiter in the authorization token, overriding the default delimiter, ','. The delimiter can be any single\ncharacter, such as comma (',') or space (' ').",
        "You can only use this property if you set the EXTERNAL_OAUTH_TYPE parameter to CUSTOM.",
        "Specifies the access token claim to map the access token to an account role.",
        "You can only set this parameter to scp or scope.",
        "You can only use this parameter if you set the EXTERNAL_OAUTH_TYPE parameter to CUSTOM.",
        "Specifies a comment for the integration.",
        "Default: No value",
        "A role used to execute this SQL command must have the following\nprivileges at a minimum:",
        "Privilege",
        "Object",
        "Notes",
        "CREATE INTEGRATION",
        "Account",
        "Only the ACCOUNTADMIN role has this privilege by default. The privilege can be granted to additional roles as needed.",
        "For instructions on creating a custom role with a specified set of privileges, see Creating custom roles.",
        "For general information about roles and privilege grants for performing SQL actions on\nsecurable objects, see Overview of Access Control.",
        "Regarding metadata:",
        "Attention",
        "Customers should ensure that no personal data (other than for a User object), sensitive data, export-controlled data, or other regulated data is entered as metadata when using the Snowflake service. For more information, see Metadata fields in Snowflake.",
        "CREATE OR REPLACE <object> statements are atomic. That is, when an object is replaced, the old object is deleted and the new object is created in a single transaction.",
        "The following example creates an External OAuth security integration for a Microsoft Entra ID OAuth 2.0 authorization server.",
        "View the integration settings using DESCRIBE INTEGRATION:",
        "The following example creates an External OAuth security integration for an Okta OAuth 2.0 authorization server.",
        "View the integration settings using DESCRIBE INTEGRATION:",
        "For examples, see:",
        "Creating a Power BI security integration",
        "Using Power BI SSO with B2B guest users",
        "Was this page helpful?",
        "On this page"
    ]
}