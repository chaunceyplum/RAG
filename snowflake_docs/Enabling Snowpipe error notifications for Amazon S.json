{
    "url": "https://docs.snowflake.com/en/user-guide/data-load-snowpipe-errors-sns",
    "title": "Enabling Snowpipe error notifications for Amazon SNS | Snowflake Documentation",
    "paragraphs": [
        "This topic provides instructions for pushing Snowpipe error notifications to the Amazon Simple Notification Service (SNS) service. SNS is a publish/subscribe messaging service.",
        "This feature can push error notifications for the following types of loads:",
        "Auto-ingest Snowpipe.",
        "Calls to the Snowpipe insertFiles REST API endpoint.",
        "Loads from Apache Kafka using the Snowflake Connector for Kafka with the Snowpipe ingestion method only.",
        "Currently, this feature is limited to Snowflake accounts hosted on Amazon Web Services (AWS). Snowpipe can load data from files in any supported cloud storage service; however, push notifications to SNS are only supported in Snowflake accounts hosted on AWS.",
        "This feature is implemented using the notification integration object. A notification integration is a Snowflake object that provides an\ninterface between Snowflake and third-party cloud message queuing services. A single notification integration can support multiple pipes.",
        "Snowflake guarantees at-least-once message delivery of error notifications (i.e. multiple attempts are made to deliver messages to ensure at least one attempt succeeds, which can result in duplicate messages).",
        "See Creating a notification integration to send notifications to an Amazon SNS topic.",
        "A single notification integration can be shared by multiple pipes. The body of error messages identifies the pipe, external stage and path,\nand file where the error originated, among other details.",
        "To enable error notifications for a pipe, specify an ERROR_INTEGRATION parameter value.",
        "Note",
        "Creating or modifying a pipe that references a notification integration requires a role that has the USAGE privilege on the notification\nintegration. In addition, the role must have either the CREATE PIPE privilege on the schema or the OWNERSHIP privilege on the pipe,\nrespectively.",
        "The USAGE privilege on the parent database and schema are required to perform operations on any object in a schema.",
        "For instructions on creating a custom role with a specified set of privileges, see Creating custom roles.",
        "For general information about roles and privilege grants for performing SQL actions on\nsecurable objects, see Overview of Access Control.",
        "Create a new pipe using CREATE PIPE. Note that the configuring automated data loads (i.e. auto-ingest Snowpipe)\nrequires additional pipe parameters. For instructions, see Automating continuous data loading using cloud messaging.",
        "Where:",
        "Name of the notification integration you created in Create the notification integration.",
        "The following example shows a CREATE PIPE statement that supports both error notifications and automated data loads:",
        "Modify an existing pipe using ALTER PIPE:",
        "Where <integration_name> is the name of the notification integration you created in\nCreate the notification integration.",
        "For example:",
        "The body of error messages identifies the pipe and the errors encountered during a load.",
        "The following is a sample message payload describing a Snowpipe error. The payload can include one or more error messages.",
        "Note that you must parse the string into a JSON object to process values in the payload.",
        "Was this page helpful?",
        "On this page"
    ]
}