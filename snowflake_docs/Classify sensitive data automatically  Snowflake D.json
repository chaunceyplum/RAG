{
    "url": "https://docs.snowflake.com/en/user-guide/classify-auto",
    "title": "Classify sensitive data automatically | Snowflake Documentation",
    "paragraphs": [
        "Preview Feature \u2014 Open",
        "Available to all accounts that are Enterprise Edition (or higher).",
        "To inquire about upgrading, please contact Snowflake Support.",
        "Automatic sensitive data classification is a serverless feature that enables the automatic detection and tagging of sensitive data. The\nfeature continuously monitors tables within a specific schema and classifies their columns using\nnative and custom classification categories.",
        "Automatic sensitive data classification lets data engineers and stewards do the following:",
        "Demonstrate how automatically classifying tables meets internal governance and compliance needs.",
        "Ensure sensitive data is properly tagged.",
        "Ensure the right access controls are in place to protect the sensitive data.",
        "The basic workflow to automatically classify sensitive data consists of the following:",
        "Create a classification profile that controls how often sensitive data in a schema is automatically classified, including whether\nsystem tags should be automatically applied after classification.",
        "Optionally, use the classification profile to map user-defined tags to system tags so a column with sensitive data can be associated with\na user-defined tag based on its classification. You can add the tag mapping while creating the classification profile or after creating it.",
        "Optionally, add a custom classifier to the classification profile so sensitive data can be\nautomatically classified with user-defined semantic and privacy categories. You can add custom classifiers while creating the\nclassification profile or after creating it.",
        "Set the classification profile on a schema so that tables in the schema get automatically classified.",
        "For end-to-end examples of this workflow, see Examples.",
        "A data engineer creates a classification profile by creating an instance of the CLASSIFICATION_PROFILE\nclass to define the criteria that are used to automatically classify tables in a schema. This\ncriteria includes:",
        "How long a table should exist before automatically classifying it.",
        "How long before previously classified tables should be reclassified.",
        "Whether system and custom tags should be set on columns after the automatic classification.",
        "A mapping between system classification tags and user-defined object tags so the user-defined tags\ncan be applied automatically.",
        "When the data engineer assigns the classification profile to a schema, sensitive data in the tables of the schema are automatically\nclassified on the schedule defined by the profile. A data engineer can assign the same classification profile to multiple schemas, or can\ncreate multiple classification profiles if there is a need to set different classification criteria for different schemas.",
        "The process of automatically classifying data requires access to the raw data in the table. The raw data includes tables that have\na masking policy assigned to a column. However, Snowflake preserves the intention of regulating access to protected data by using an\ninternal role to automatically classify data. The internal role can access data protected by a masking policy, but this role is not\naccessible to users.",
        "For an example of using the CREATE CLASSIFICATION_PROFILE command to create a\nclassification profile, see Examples.",
        "You can use the classification profile to map SEMANTIC_CATEGORY system tags to one or more\nobject tags. This tag mapping allows a column with sensitive data to be automatically assigned a\nuser-defined tag based on its classification. The tag map can be added while creating the classification profile or later by calling the\n<classification_profile_name>!SET_TAG_MAP method.",
        "Because user-defined object tags can have a masking policy associated with them, you can use a tag map to enable\nautomatic tag-based masking, which facilitates column protection aligned with the\nSEMANTIC_CATEGORY system tag.",
        "Regardless of whether you are defining the tag map while creating the classification profile or after, the contents of the map are specified\nas a JSON object. This JSON object contains the 'column_tag_map' key, which is an array of objects that specify a user-defined tag,\nthe string value of that tag, and the semantic categories to which the tag is being mapped. After the tag map is associated with a\nclassification profile and you automatically classify tables in a schema, the tag is assigned to the columns that correspond to the\nsemantic categories.",
        "The following is an example of a tag map:",
        "Based on this mapping, if you have a column of email addresses and the classification process determines that the column contains these\naddresses, the tag_db.sch.pii = 'Confidential' tag is set on the column containing the email addresses.",
        "If your tag map includes multiple JSON objects that map tags, tag values, and category values, the order of the JSON objects determines\nwhich tag and value to set on the column if there is a conflict. Specify the JSON objects in the desired assignment order from left to\nright, or top to bottom if you are formatting JSON.",
        "Tip",
        "Each object in the 'column_tag_map' field has only has one required key: 'tag_name'. If you don\u2019t specify a value for\nthe user-defined tag, the classification process applies the recommended SEMANTIC_CATEGORY tag\u2019s value.",
        "If there is a conflict with a manually assigned tag and a tag applied by automatic classification, an error occurs. For information about\ntracking these errors, see Troubleshooting.",
        "You can view the results of automatic classification in the following ways:",
        "Call the SYSTEM$GET_CLASSIFICATION_RESULT stored procedure. For example:",
        "Use a role that is granted the SNOWFLAKE.GOVERNANCE_VIEWER database role to query the\nDATA_CLASSIFICATION_LATEST view. For example:",
        "Classification profiles cannot be set on a reader account.",
        "Only one classification profile can be set on a schema.",
        "The same classification profile cannot be set on more than 10,000 schemas.",
        "A maximum of 10,000 tables can be classified in a schema.",
        "This section describes the privileges and roles that let you work with classification profiles and enable automatic sensitive data\nclassification.",
        "Task",
        "Required privilege/role",
        "Notes",
        "Create a classification profile",
        "SNOWFLAKE.CLASSIFICATION_ADMIN database role",
        "For information about granting this database role to other roles, see Using SNOWFLAKE database roles.",
        "CREATE SNOWFLAKE.DATA_PRIVACY.CLASSIFICATION_PROFILE on Schema",
        "You need this privilege on the schema where you want to create the classification profile instance.",
        "Call methods on a classification profile instance",
        "<classification_profile>!PRIVACY_USER instance role",
        "For information about granting this instance role to other roles, see Instance roles.",
        "Set the classification profile on a schema",
        "EXECUTE AUTO CLASSIFICATION on Account",
        "This privilege is granted to the ACCOUNTADMIN by default, which can be used to grant this privilege to other roles.",
        "MODIFY on Schema",
        "You need this privilege on the schema that contains the table that you want to automatically classify.",
        "APPLY TAG on Account",
        "List classification profiles",
        "<classification_profile>!PRIVACY_USER instance role",
        "Drop classification profiles",
        "OWNERSHIP on classification profile instance",
        "For an example of granting these privileges and database roles to the role of a data engineer, see Basic example: Automatically classifying tables in a schema.",
        "Automatic sensitive data classification consumes credits as it uses serverless compute resources to\nclassify tables in the schema. For more information about pricing for this consumption, see Table 5 in the Snowflake Service Consumption Table.",
        "You can query views in the ACCOUNT_USAGE and ORGANIZATION_USAGE schemas to determine how much was spent on automatically classifying\nsensitive data. To monitor credit consumption, query the following views:",
        "Lets you retrieve the hourly cost of automatic classification by focusing on SENSITIVE_DATA_CLASSIFICATION in the\nSERVICE_TYPE column. For example:",
        "Lets you retrieve the daily cost of automatic classification by focusing on SENSITIVE_DATA_CLASSIFICATION in the\nSERVICE_TYPE column. For example:",
        "Lets you retrieve the daily cost of automatic classification by focusing on SENSITIVE_DATA_CLASSIFICATION in the\nSERVICE_TYPE column. Use this view to determine the cost in currency, not credits.",
        "Basic example: Automatically classifying tables in a schema",
        "Example: Using a tag map and custom classifiers",
        "Example: Testing a classification profile before enabling automatic classification",
        "Complete these steps to automatically classify a table in the schema:",
        "As an administrator, give the data engineer the roles and privileges they need to\nautomatically classify tables in a schema.",
        "Switch to the data engineer role:",
        "Create the classification profile as an\ninstance of the CLASSIFICATION_PROFILE class:",
        "Call the DESCRIBE method on the instance to confirm its properties:",
        "Set the classification profile instance on the schema, which starts the background process of monitoring tables in the schema and\nautomatically classifying them for sensitive data.",
        "Call the SYSTEM$GET_CLASSIFICATION_RESULT stored procedure to obtain the results of the automatic\nclassification.",
        "If you no longer need to automatically classify tables in a schema, unset the classification profile from the schema:",
        "Drop any classification profiles that are not needed using the\nDROP CLASSIFICATION_PROFILE command.",
        "As an administrator, give the data engineer the roles and privileges they need to\nautomatically classify tables in a schema and set tags on columns.",
        "Create the classification profile.",
        "Call the SET_TAG_MAP method on the instance to add a\ntag map to the classification profile. This allows custom tags to be automatically applied on\ncolumns that contain sensitive data.",
        "Alternatively, you could have added this tag map when you created the classification profile.",
        "Call the SET_CUSTOM_CLASSIFIERS method to add\ncustom classifiers to the classification profile. This allows sensitive data to be automatically\nclassified with user-defined semantic and privacy categories.",
        "Alternatively, you could have added the custom classifiers when you created the classification profile.",
        "Call the DESCRIBE method on the instance to confirm that the\ntag map and custom classifiers have been added to the classification profile.",
        "Set the classification profile instance on the schema.",
        "Attach a masking policy to the tag_db.sch.pii tag to enable tag-based masking.",
        "As an administrator, give the data engineer the roles and privileges they need to\nautomatically classify tables in a schema and set tags on columns.",
        "Create the classification profile with a tag map and custom classifiers:",
        "Call the SYSTEM$CLASSIFY stored procedure to test the tag mappings on the table1 table before\nenabling automatic classification.",
        "The tags key in the output contains the details about whether the tag was set (true if set, false otherwise),\nthe name of the tag that was set, and the value of the tag:",
        "Having verified that automatic classification based on the classification profile will have the desired result, set the classification\nprofile instance on the schema.",
        "Automatic classification errors are persisted in the default event table\nof the account. You can use the following query to access the error messages:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}