{
    "url": "https://docs.snowflake.com/en/user-guide/performance-query-warehouse-queue",
    "title": "Reducing queues | Snowflake Documentation",
    "paragraphs": [
        "This topic discusses how a warehouse owner or administrator can reduce queuing in order to improve the performance of queries running\non a warehouse.",
        "If too many queries are sent to a warehouse at the same time, the warehouse\u2019s compute resources become exhausted and subsequent queries\nare queued until resources become available. The time between submitting a query and getting its results is longer when the query must\nwait in a queue before starting.",
        "Note",
        "You must have access to the shared SNOWFLAKE database to execute the diagnostic queries provided in this topic. By default, only the ACCOUNTADMIN role has the privileges needed to execute the queries.",
        "To determine if a particular warehouse is experiencing queues:",
        "Sign in to Snowsight.",
        "Navigate to Admin \u00bb Warehouses.",
        "Select the warehouse.",
        "In the Warehouse Activity chart, use the color associated with Queued load to identify queues.",
        "Look for patterns in the height of the bars to determine if the queues are associated with usage spikes.",
        "Query: Warehouses with queueing",
        "This query lists the warehouses that had a queue in the last month, sorted by date.",
        "You can also write queries against the QUERY_HISTORY view to calculate the time\nthat queries spend in the queue.",
        "You have several options to stop warehouse queuing:",
        "For a regular warehouse (i.e. not a multi-cluster warehouse), consider creating additional warehouses, and then distribute the queries\namong them. If specific queries are causing usage spikes, focus on moving those queries.",
        "Consider converting a warehouse to a multi-cluster warehouse so the warehouse can elastically\nprovision additional compute resources when demand spikes. Multi-cluster warehouses require the\nEnterprise Edition of Snowflake.",
        "If you are already using a multi-cluster warehouse, increase the maximum number of clusters.",
        "For a description of how running a multi-cluster warehouse affects credit consumption, refer to Multi-cluster size and credit usage.",
        "If you are running a multi-cluster warehouse in Auto-scale mode, you can use a scaling policy to help\ncontrol the costs. The Economy scaling policy favors conserving credits over cluster elasticity by keeping running clusters fully-loaded\nrather than starting additional clusters. This might result in queries being queued and taking longer to complete.",
        "To create new warehouses to which queries can be distributed, sign in to Snowsight and select Admin \u00bb Warehouses.\nYou can also use the CREATE WAREHOUSE command.",
        "To convert an existing warehouse to a multi-cluster warehouse or to increase the maximum number of clusters for an existing warehouse:",
        "Sign in to Snowsight.",
        "Navigate to Admin \u00bb Warehouses.",
        "Find the warehouse, and select \u2026 \u00bb Edit.",
        "If you are converting to a multi-cluster warehouse, turn on the Multi-cluster Warehouse option. If you do not see this option,\nupgrade to Enterprise Edition or higher.",
        "Use the Max Clusters drop-down to adjust the maximum number of clusters.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}