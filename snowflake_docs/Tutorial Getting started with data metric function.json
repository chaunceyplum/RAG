{
    "url": "https://docs.snowflake.com/en/user-guide/tutorials/data-quality-tutorial-start",
    "title": "Tutorial: Getting started with data metric functions | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "Data Quality and data metric functions (DMFs) require Enterprise Edition. To inquire about upgrading, please contact\nSnowflake Support.",
        "You can complete this tutorial using a worksheet in Snowsight or using a CLI client such as SnowSQL.\nSimply paste the code examples and run them.",
        "By the end of this tutorial, you will learn how to:",
        "Create a custom data metric function (DMF) to measure data quality.",
        "Manage the DMF to optimize serverless credit usage.",
        "Monitor the serverless credit usage associated with calling the scheduled DMF.",
        "To complete this tutorial, use a single custom role that has all of the required access, which includes the following:",
        "Creating a database, which subsequently allows creating a schema, creating a DMF in the schema, and creating a table in the schema",
        "Creating a warehouse to perform query operations",
        "Querying the view that contains the results of calling the scheduled DMF",
        "Querying the view that contains serverless compute usage information",
        "Create the dq_tutorial_role role to use throughout the tutorial:",
        "Grant privileges, and grant the application role and database roles to the dq_tutorial_role:",
        "Create a warehouse to query the table that contains the data and grant the USAGE privilege on the role to the dq_tutorial_role role:",
        "Confirm the grants to the dq_tutorial_role role:",
        "Establish a role hierarchy and grant the role to a user who can complete this tutorial (replace the jsmith value):",
        "To facilitate managing the data and the DMF for this tutorial, create a dedicated database to contain these objects:",
        "Add data to the table:",
        "In the following sections, we will create a user-defined DMF to measure the count of invalid email addresses and subsequently do the\nfollowing:",
        "Schedule the DMF to run every 5 minutes.",
        "Check the DMF table references (find the tables the DMF is set on).",
        "Query a built-in view that contains the result of calling the scheduled DMF.",
        "Unset the DMF from the table to avoid unnecessary serverless credit usage.",
        "Create a data metric function (DMF) to return the number of email addresses in a column that don\u2019t match the specified regular expression:",
        "The DMF schedule defines when all DMFs on the table run. Currently, 5 minutes is the shortest possible time interval:",
        "Note",
        "For the purpose of the tutorial, the schedule is set for 5 minutes. However, after you optimize your DMF use cases, experiment with the\nother schedule settings, such as cron expressions or trigger events associated with DML operations that affect the table.",
        "Associate the DMF to the table:",
        "Because the schedule is set for 5 minutes, we need to wait 5 minutes in order for Snowflake to call the DMF and process the results. For\nnow, we can check to see that the DMF is associated with the table by calling the\nDATA_METRIC_FUNCTION_REFERENCES Information Schema table function:",
        "The results of calling the scheduled DMF are stored in the DATA_QUALITY_MONITORING_RESULTS view. To determine the number of invalid email\naddresses, query the DATA_QUALITY_MONITORING_RESULTS view to see the results\nof calling the scheduled DMF:",
        "The results show that the value column contains 1. This number corresponds to one improperly formatted email\naddress, which corresponds to the first INSERT statement in the Insert values into a table section.",
        "You have established that the DMF is working as expected based on the definition of the DMF, the schedule, and the expected results.",
        "To avoid unnecessary serverless credit usage, unset the DMF from the table:",
        "Calling scheduled data metric functions (DMFs) requires serverless compute resources. You\ncan query the Account Usage view\nDATA_QUALITY_MONITORING_USAGE_HISTORY to view the\nDMF serverless compute cost.",
        "Because the view has a latency of 1-2 hours, wait for that time to pass before querying the view. You can come back to this step later.",
        "Query the view and filter the results to include the time interval of your scheduled DMF:",
        "Congratulations! You\u2019ve successfully completed this tutorial.",
        "Take a few minutes to review the summary and the key points covered in this tutorial.",
        "Consider cleaning up by dropping the objects you created in this tutorial. Learn more by reviewing other topics in the Snowflake\ndocumentation.",
        "In summary, you learned how to do the following:",
        "Create a custom DMF to measure data quality and manage the DMF to optimize serverless credit usage.",
        "Monitor the serverless credit usage associated with calling the scheduled DMF.",
        "If you plan to repeat the tutorial, you can keep the objects that you created.",
        "Otherwise, drop the tutorial objects as follows:",
        "Continue learning about Snowflake using the following resources:",
        "Learn more about DMFs by starting with Introduction to Data Quality and data metric functions.",
        "Complete the other tutorials provided by Snowflake in the Snowflake Tutorials topic.",
        "Was this page helpful?"
    ]
}