{
    "url": "https://docs.snowflake.com/en/developer-guide/logging-tracing/unhandled-exception-messages",
    "title": "Capturing messages from unhandled exceptions | Snowflake Documentation",
    "paragraphs": [
        "By default, when you\u2019ve set up an event table, Snowflake automatically logs\nunhandled exceptions in procedure and UDF handlers in the event table. Capturing these messages does not require that you add handler\ncode specific to logging or tracing. You can disable this feature so that unhandled exceptions aren\u2019t automatically logged.",
        "Important",
        "Error messages can contain sensitive information. Consider disabling this feature if you don\u2019t want potentially sensitive\ninformation captured in an event table. To learn more, see Protecting sensitive data.",
        "Set log or trace level so that Snowflake captures entries for unhandled exceptions. You can have entries captured as log entries, trace\nevent entries, or both.",
        "To capture messages as log entries, set the log level to ERROR or\nmore verbose.",
        "To capture messages as trace event entries, set the trace level to\nALWAYS or ON_EVENT.",
        "You can capture message data as a log entry, a trace event, or both. The captured data will differ between log and trace event entries.",
        "By default, Snowflake records the following in the event table for unhandled exceptions in procedure and UDF handlers:",
        "Column",
        "Data",
        "RECORD column",
        "A severity_text attribute whose value is the highest-severity error level for the current language runtime. For example, for\na handler written in Python, the value is FATAL.",
        "RECORD_ATTRIBUTES column",
        "The following attributes are recorded for an unhandled exception.",
        "exception.message \u2013 The error message.",
        "exception.type \u2013 The name of the exception\u2019s class.",
        "exception.stacktrace \u2013 The exception\u2019s stack trace formatted by a language runtime.",
        "exception.escaped \u2013 true if this entry is from an unhandled exception.",
        "VALUE column",
        "The string exception.",
        "Code in the following example queries an event table for log data recorded for an unhandled exception from a UDF handler.",
        "For more about querying an event table for log data, see Viewing log messages.",
        "The following is possible output from the query.",
        "By default, Snowflake records the following in the event table for unhandled exceptions in procedure and UDF handlers:",
        "Column",
        "Data",
        "RECORD column",
        "A name attribute whose value is exception and a status attribute whose value is STATUS_CODE_ERROR.",
        "RECORD_ATTRIBUTES column",
        "The following attributes are recorded for an unhandled exception.",
        "exception.message \u2013 The error message.",
        "exception.type \u2013 The name of the exception\u2019s class.",
        "exception.stacktrace \u2013 The exception\u2019s stack trace formatted by a language runtime.",
        "exception.escaped \u2013 true if this entry is from an unhandled exception.",
        "Code in the following examples query an event table for trace event data recorded for an unhandled exception from a UDF handler.",
        "For more about querying an event table for trace event data, see Viewing trace data.",
        "The following is possible output from the query.",
        "The following is possible output from the query.",
        "Given that log and trace messages from unhandled exceptions can include sensitive data, consider doing the following to protect that data:",
        "Take steps to protect sensitive data, such as by doing the following:",
        "Improve your exception handling code to minimize the risk of unhandled exceptions.",
        "Apply row access policies to your event table to restrict access to rows that contain\npersonally identifiable information (PII).",
        "Create a view on top of the event table and\napply masking policies to it to mask or delete personally identifiable\ninformation (PII).",
        "Turn off unhandled exception logging by setting the ENABLE_UNHANDLED_EXCEPTIONS_REPORTING parameter to false.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}