{
    "url": "https://docs.snowflake.com/en/user-guide/private-service-connect-google",
    "title": "Google Cloud Private Service Connect and Snowflake | Snowflake Documentation",
    "paragraphs": [
        "Business Critical Feature",
        "This feature requires Business Critical (or higher).",
        "If you are using Business Critical (or higher) and wish to use this feature with your account, please contact\nSnowflake Support and request it to be\nenabled, as described in this topic.",
        "This topic describes concepts and how to configure Google Cloud Private Service Connect to connect your Google Cloud Virtual\nPrivate Cloud (VPC) network subnet to your Snowflake account hosted on Google Cloud Platform without traversing the public Internet.",
        "Note that Google Cloud Private Service Connect is not a service provided by Snowflake. It is a Google service that Snowflake\nenables for use with your Snowflake account.",
        "If you are using Business Critical Edition (or higher) and wish to use Google Cloud Private Service Connect with your account, please\ncontact Snowflake Support and request it to\nbe enabled.",
        "Google Cloud Private Service Connect provides private connectivity to\nSnowflake by ensuring that access to Snowflake is through a private IP address. Snowflake appears as a resource in your network (i.e.\ncustomer network), but the traffic flows one-way from the your VPC to Snowflake VPC over the Google networking backbone. This setup\nsignificantly simplifies the network configuration while providing secure and private communication.",
        "The following diagram summarizes the Google Cloud Private Service Connect architecture with respect to the customer Google Cloud VPC and\nthe Snowflake service.",
        "The Google Compute Engine (i.e. a virtual machine) connects to a private, virtual IP address which routes to a forwarding rule (1). The\nforwarding rule connects to the service attachment through a private connection (2). The connection is routed through a load balancer (3)\nthat redirects to Snowflake (4).",
        "The Snowflake system functions for self-service management are not supported. For details, see\nCurrent Limitations for Accounts on GCP.",
        "For details, see:",
        "Account identifiers",
        "Connecting to your accounts",
        "This section describes how to configure Google Cloud Private Service Connect to connect to Snowflake.",
        "Attention",
        "This section only covers the Snowflake-specific details for configuring your Google Cloud VPC environment. Also, note that Snowflake is\nnot responsible for the actual configuration of the required firewall updates and DNS records.",
        "If you encounter issues with any of these configuration tasks, please contact Google Support directly.",
        "For installation help, see the Google documentation on the Cloud SDK: Command Line Interface.",
        "For additional help, contact your internal Google Cloud administrator.",
        "Contact Snowflake Support and provide a\nlist of your Google Cloud <project_id> values and the corresponding URLs that you use to access Snowflake with a note to enable\nGoogle Cloud Private Service Connect. After receiving a response from Snowflake Support, continue to the next step.",
        "Important",
        "If you are using VPC Service Controls in your VPC, ensure that the policy allows\naccess to the Snowflake service before contacting Snowflake Support.",
        "If this action is not taken, Snowflake will not be able to add your project ID to the Snowflake service attachment allow list. The\nresult is that you will be blocked from being able to connect to Snowflake using this feature.",
        "In a Snowflake worksheet, run the\nSYSTEM$GET_PRIVATELINK_CONFIG function with the ACCOUNTADMIN system role, and save the command output\nfor use in the following steps:",
        "In a command line interface (e.g. the Terminal application), update the\ngcloud library to the latest version:",
        "Authenticate to Google Cloud Platform using the following command:",
        "In your Google Cloud VPC, set the project ID in which the forwarding\nrule should reside.",
        "To obtain a list of project IDs, execute the following command:",
        "In your Google Cloud VPC, create a virtual IP address:",
        "For example:",
        "Where:",
        "<customer_vip_name> specifies the name of the virtual IP rule (i.e. psc-vip-1).",
        "<subnet_name> specifies the name of the subnet.",
        "<customer_vip_address>: all private connectivity URLs resolve to this address. Specify an IP address from your network or use\nCIDR notation to specify a range of IP addresses.",
        "<region> specifies the cloud region where your Snowflake account is located.",
        ".",
        "Create a forwarding rule to have your subnet route\nto the Private Service Connect endpoint and then to the Snowflake service endpoint:",
        "For example:",
        "Where:",
        "<name> specifies the name of the forwarding rule.",
        "<region> specifies the cloud region where your Snowflake account is located.",
        "<network_name> specifies the name of the network for this forwarding rule.",
        "<customer_vip_name> specifies the <name> value (i.e. psc-vip-1) of the virtual IP address created in the previous\nstep.",
        "<privatelink-gcp-service-attachment> specifies the endpoint for the Snowflake service (see step 2).",
        ".",
        "Use the following command to verify the forwarding-rule was created\nsuccessfully:",
        "The cloud region in this command must match the cloud region where your Snowflake account is located.",
        "For example, if your Snowflake account is located in the europe-west-2 region, replace <region> with europe-west2.",
        "For a complete list of Google Cloud regions and their formatting, see Viewing a list of available regions.",
        "Update your DNS settings.",
        "All requests to Snowflake need to be routed through the Private Service Connect endpoint so that the URLs in step 2\n(from the SYSTEM$GET_PRIVATELINK_CONFIG function) resolve to the VIP address that you created (<customer_vip_address>).",
        "The values to obtain from the output of SYSTEM$GET_PRIVATELINK_CONFIG depend on which Snowflake features you are accessing via private\nconnectivity. For a description of the possible values, see Return values.",
        "Note that the values for regionless-snowsight-privatelink-url and snowsight-privatelink-url allow access to\nSnowsight and the Snowflake Marketplace using private connectivity. However, there is additional configuration if you want to enable\nURL redirects. For information, see Snowsight & Private Connectivity.",
        "Note",
        "A full explanation of DNS configuration is beyond the scope of this procedure. For example, you can choose to integrate a private DNS\nzone into your environment using Cloud DNS. Please consult your internal Google Cloud\nand cloud infrastructure administrators to configure and resolve the URLs in DNS properly.",
        "Test your connection to Snowflake using SnowCD (Connectivity Diagnostic Tool).",
        "Connect to Snowflake with your private connectivity account URL.",
        "Note that if you want to connect to Snowsight via Google Cloud Private Service Connect, follow the instructions in the\nSnowsight documentation.",
        "Snowflake supports using SSO with Google Cloud Private Service Connect. For more information, see:",
        "SSO with private connectivity",
        "Partner applications",
        "Snowflake supports using Client Redirect with Google Cloud Private Service Connect.",
        "For more information, see Redirecting client connections.",
        "Snowflake supports replicating your data from the source account to the target account, regardless of whether you enable\nTri-Secret Secure or this feature in the target account.",
        "After testing the Google Cloud Private Service Connect connectivity with Snowflake, you can optionally block public access to\nSnowflake using Controlling network traffic with network policies.",
        "Configure the CIDR block range to block public access to Snowflake using your organization\u2019s IP address range. This range can be\nfrom within your virtual network.",
        "Once the CIDR Block ranges are set, only IP addresses within the CIDR block range can access Snowflake.",
        "To block public access using a network policy:",
        "Create a new network policy or edit an existing network policy. Add the CIDR block range for your organization.",
        "Activate the network policy for your account.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}