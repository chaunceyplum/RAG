{
    "url": "https://docs.snowflake.com/en/release-notes/bcr-bundles/managing-behavior-change-releases",
    "title": "Behavior change management | Snowflake Documentation",
    "paragraphs": [
        "This document explains how to check whether a particular\nbehavior change bundle is enabled in your account and how to enable or disable it.",
        "Snowflake implements behavior changes monthly in bundles included in regularly-scheduled\nreleases. During the testing period and opt-out period for each behavior change bundle,\nyou can enable or disable the bundle in your account. This document explains how to check whether a particular bundle is enabled\nin your account and how to enable or disable it.",
        "In this document, the name of the behavior change bundle is in the form YYYY_NN. For the names of the\ncurrently available behavior change bundles, see Behavior change log.",
        "Note",
        "Behavior changes in bundles cannot be enabled/disabled individually. To enable/disable a behavior change, you must\nenable/disable the bundle containing the change.",
        "To check whether a specific behavior change bundle is enabled in your account, call the\nSYSTEM$BEHAVIOR_CHANGE_BUNDLE_STATUS function. For example, to check the status of the bundle\nnamed 2024_02:",
        "To check the status of all currently available behavior change bundles, call the\nSYSTEM$SHOW_ACTIVE_BEHAVIOR_CHANGE_BUNDLES function:",
        "To enable a particular behavior change in your account, call the\nSYSTEM$ENABLE_BEHAVIOR_CHANGE_BUNDLE function. For example, to enable the bundle\nnamed 2024_02:",
        "To disable a particular behavior change in your account, call the\nSYSTEM$DISABLE_BEHAVIOR_CHANGE_BUNDLE. For example, to disable the bundle\nnamed 2024_02:",
        "To check the current version of Snowflake that is in your account, call the\nCURRENT_VERSION function. For example:",
        "In the 2024_04 bundle, there are changes to the values for precision and\nscale in masking policy conditions (collectively: \u201creturn value updates\u201d). A query on a column protected by a masking policy fails when the\nfollowing are true:",
        "The bundle is enabled.",
        "The masking policy conditions return a value whose precision is greater than the precision of the column to which the masking\npolicy is assigned.",
        "If the scale of the return value is larger than the scale of the column, the value is truncated to match the scale of the column.",
        "If you want to apply the new behavior to a pre-existing policy, create a new masking policy and replace the pre-existing policy using the\nFORCE keyword.",
        "When the bundle is enabled, you can test the behavior as follows:",
        "Create a policy:",
        "Assign the policy:",
        "Query the column (fails):",
        "To determine the impact of this change and provide enough time to update the masking policy conditions to protect data, query the\nSNOWFLAKE.BCR_ROLLOUT.BCR_2024_03_DDM_ROLLOUT view to understand how the future return value updates affect your account.",
        "The BCR_2024_03_DDM_ROLLOUT view is temporary. Snowflake will remove the view when the return value updates are generally enabled\nin a future behavior change bundle. At this point, you will not be able to query the view to determine affected columns and policies or\nprevent column query or masking policy assignment operation failures due to return value updates.",
        "The view records data starting from March 2024. If a query on the view takes a long time to complete, you can specify the start date and\nend date session variables using a SET command. These variables help to reduce the number of rows to evaluate when\nyou query the view. For example:",
        "To query the view and mitigate the upcoming return value changes, do the following:",
        "Query the SNOWFLAKE.BCR_ROLLOUT.BCR_2024_03_DDM_ROLLOUT view. For example:",
        "Evaluate the REASON column in the BCR_2024_03_DDM_ROLLOUT View Reference section to determine what update needs to be made to the\nmasking policy conditions.",
        "Update the masking policy conditions with an ALTER MASKING POLICY statement to ensure the column data remains\nprotected and that policy assignment operations or protected column queries do not fail.",
        "Test the new policy conditions by querying the table columns to which the masking policies are assigned.",
        "The BCR_2024_03_DDM_ROLLOUT view (in the SNOWFLAKE.BCR_ROLLOUT schema) records information starting on July 15, 2022 and contains the\nfollowing columns:",
        "Column",
        "Data type",
        "Description",
        "policy_name",
        "VARCHAR",
        "The name of the policy.",
        "policy_id",
        "NUMBER",
        "Internal/system-generated identifier for the policy.",
        "policy_schema",
        "VARCHAR",
        "The parent schema of the policy.",
        "policy_database",
        "VARCHAR",
        "The parent database of the policy.",
        "policy_body",
        "VARIANT",
        "The conditions of the policy to mask or unmask the column data.",
        "column_name",
        "VARCHAR",
        "The name of the column that has the policy.",
        "COLUMN_TYPE",
        "VARCHAR",
        "The data type of the column.",
        "COLUMN_LENGTH",
        "NUMBER",
        "The length of the column that has the policy or [NULL] if not set for the column.",
        "COLUMN_PRECISION",
        "NUMBER",
        "The precision of the column that has the policy or [NULL] if not set for the column.",
        "COLUMN_SCALE",
        "NUMBER",
        "The scale of the column that has the policy or [NULL] if not set for the column.",
        "TABLE_NAME",
        "VARCHAR",
        "The name of the table.",
        "table_id",
        "NUMBER",
        "Internal/system-generated identifier for the table.",
        "table_schema",
        "VARCHAR",
        "The parent schema of the table.",
        "table_database",
        "VARCHAR",
        "The parent database of the table.",
        "table_kind",
        "VARCHAR",
        "The type of table. One of the following: TABLE, LOCAL TEMPORARY, VIEW, MATERIALIZED VIEW, EXTERNAL TABLE, or DYNAMIC TABLE.",
        "reason",
        "VARCHAR",
        "Possible reason for the mismatch. One of the following: precision or scale.",
        "LARGEST_MASKED_SIZE",
        "NUMBER",
        "The maximum length, scale, or precision a masked value can have based on the masking policy assigned to the column.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}