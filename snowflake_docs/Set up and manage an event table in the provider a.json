{
    "url": "https://docs.snowflake.com/en/developer-guide/native-apps/event-manage-provider",
    "title": "Set up and manage an event table in the provider account | Snowflake Documentation",
    "paragraphs": [
        "Feature \u2014 Generally Available",
        "The Snowflake Native App Framework is generally available on supported cloud platforms. For additional information, see\nSupport for private connectivity, VPS, and government regions.",
        "This topic describes how providers can set up an event table and manage event sharing for an app.",
        "To collect the log messages and trace events that a consumer shares, a provider must set up an event\ntable by performing the following:",
        "Set an account as the event account.",
        "Create an event table in the event account.",
        "Set the event table as the active event table in event account.",
        "Important",
        "If a provider does not have an event account and active event table withing the region where the app is installed\nbefore the consumer installs an app, trace events and log messages are discarded.",
        "To store shared logs and events, a provider must select an account to hold an event table. This can be any\naccount that a provider can access. However, if an organization has multiple providers publishing\napplication packages, consider using a Snowflake account that is dedicated to storing shared events from the\nconsumer.",
        "The following restrictions apply to accounts used to store shared events:",
        "You must use the ORGADMIN role to set an account as the account used to store events.",
        "The account must have an active event table.",
        "The specified account cannot be any of the following:",
        "A locked or suspended account.",
        "A reader account.",
        "A trial account.",
        "A Snowflake managed account.",
        "Note",
        "A provider can collect logs and shared events only in the same region where a consumer installs an app.\nProviders must set up an event account to store shared events in every region where consumers configure event\nsharing for an app.",
        "To set an account to be the events account for a region, call the SYSTEM$SET_EVENT_SHARING_ACCOUNT_FOR_REGION\nsystem function as shown in the following example:",
        "Where:",
        "Specifies the region where the account is located, for example: AWS_US_WEST_2, AWS_US_EAST_1.",
        "Specifies the region group, for example: PUBLIC. Refer to\nRegion groups for details.",
        "Specifies the account name. If another account is already set as the events account in the\nspecified region, running this command changes the events account to be the account\nspecified here.",
        "To create an event table, run the CREATE EVENT TABLE command as shown in the\nfollowing example:",
        "This command specifies the database and schema that contain the event table.",
        "An account can have multiple event tables, but only one can be set as the active event table in a\nSnowflake account at a time. Without an active event table, log messages and trace events that the consumer\nshares are discarded.",
        "After creating the event table, use ALTER ACCOUNT \u2026 SET EVENT_TABLE\nto specify that the event table is the active table for the account:",
        "To unset an account to be the events account for a region, call the\nSYSTEM$UNSET_EVENT_SHARING_ACCOUNT_FOR_REGION system function:",
        "Where:",
        "Specifies the region where the account is located, for example: AWS_US_WEST_2.",
        "Specifies the region group, for example: PUBLIC.",
        "Specifies the account name.",
        "To show events accounts in a provider\u2019s organization, call the\nSYSTEM$SHOW_EVENT_SHARING_ACCOUNTS system function:",
        "Note",
        "You must use the ORGADMIN role to call this function.",
        "This system function returns a string in JSON format containing a list of event accounts within the organization.\nBecause the metadata takes some time to propagate to all regions, this function might have a short delay before\nshowing the most current events account after the user sets or unsets the event account for the organization.",
        "Use the SHOW VERSIONS command to view the logging level of the app versions\ndefined in an application package, as shown in the following example:",
        "To view the logs and events stored in the event table, use the SELECT command as shown\nin the following example:",
        "For more information on querying the event table, see the following:",
        "Viewing log messages",
        "Viewing trace data",
        "See Event table columns for information on the columns\nin the event table.",
        "The following sections describe the information that the Native Apps Framework shares with providers.",
        "To help providers easily identify the source of the shared events, the following fields are populated into the\nRESOURCE_ATTRIBUTES column of the event table when they are shared with the provider:",
        "snow.application.package.name",
        "snow.application.consumer.organization",
        "snow.application.consumer.name",
        "snow.listing.name",
        "snow.listing.global_name",
        "To protect consumer information, the following fields from the RESOURCE_ATTRIBUTES column are\nnot shared with provider:",
        "snow.database.id",
        "snow.database.name",
        "snow.schema.id",
        "snow.executable.id",
        "snow.owner.name",
        "snow.owner.id",
        "snow.warehouse.name",
        "snow.warehouse.id",
        "snow.query.id",
        "snow.session.id",
        "snow.session.role.primary.name",
        "snow.session.role.primary.id",
        "snow.user.name",
        "snow.user.id",
        "db.user",
        "Instead of directly sharing the snow.database.name and snow.query.id fields with the provider, Snowflake\nshares the hash values (SHA-1) of these two fields as the following fields:",
        "snow.database.hash",
        "snow.query.hash",
        "Snowflake provides the SHA-1 function used to mask these attributes.\nConsumers can calculate the hash values for the database name and query id, and use them as reference values when\ncontacting the provider.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}