{
    "url": "https://docs.snowflake.com/en/user-guide/diff-privacy/differential-privacy-admin-privacy-budgets",
    "title": "Working with privacy budgets | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "This feature requires Enterprise Edition (or higher). To inquire about upgrading, please contact Snowflake Support.",
        "This topic describes the tasks that a data provider who has implemented differential privacy can perform to manage privacy budgets. For an\nintroduction to privacy budgets and how they help prevent queries from revealing sensitive information about an entity, see\nLimiting privacy loss.",
        "A privacy budget is created automatically when you define a privacy budget name in the body of the privacy policy. You don\u2019t create a\nprivacy budget independent of a privacy policy.",
        "To manage a privacy budget, you need OWNERSHIP privilege on the privacy policy that specifies the privacy budget.",
        "Each privacy budget is namespaced to a privacy policy. There can be multiple privacy budgets with the same name, but each is unique to a\nprivacy policy. Within a privacy policy, a privacy budget is further namespaced to the consumer account incurring\nprivacy loss. As a result, multiple accounts can have a privacy budget with the same name and limit\non privacy loss, but Snowflake tallies the cumulative privacy loss for each account separately.",
        "Viewing a privacy budget lets you see its limit on privacy loss as well as the cumulative privacy loss incurred by users associated\nwith the budget. You can use this information to determine whether the cumulative privacy loss is approaching the privacy budget\u2019s limit.",
        "Note",
        "The cumulative privacy loss associated with a privacy budget does not include privacy loss incurred in accounts outside\nof the data provider\u2019s account.",
        "You have the following two options for viewing privacy budgets. For both options, a privacy budget appears only if analysts associated with\nthe privacy budget have incurred privacy loss or if an administrator has reset the privacy budget.",
        "To query all privacy budgets in the account, use the PRIVACY_BUDGETS view in the Account Usage schema.\nThe PRIVACY_BUDGETS view in the ACCOUNT USAGE schema contains all privacy budgets\nin the account. You can use it to view privacy budgets associated with all of the privacy policies that you own, and can filter results to\nfocus on specific privacy budgets by name. For example, to focus on a specific privacy budget associated with the patients_policy\nprivacy policy, you might execute the following query:",
        "To view the privacy budgets associated with a particular privacy policy, use the CUMULATIVE_PRIVACY_LOSSES table function.\nYou can use the CUMULATIVE_PRIVACY_LOSSES table function to retrieve privacy budgets associated with a\nparticular privacy policy. Unlike the PRIVACY_BUDGETS view in the ACCOUNT USAGE schema, this function does not have a fixed amount of\nlatency and will return the real-time values for the cumulative privacy losses. When calling the function, the name of the privacy policy\nmust be fully qualified.",
        "For example, to view the privacy budgets that are specified in the my_policy_privacy policy, execute the following:",
        "Snowflake lets you adjust the privacy budget\u2019s limit on privacy loss and the maximum amount of privacy budget spent per\naggregate (collectively known as the epsilon in differential privacy). You set these controls by specifying the following parameters in\nthe body of the privacy policy:",
        "BUDGET_LIMIT \u2014 Sets the privacy budget\u2019s limit on cumulative privacy loss.",
        "MAX_BUDGET_PER_AGGREGATE \u2013 Sets the maximum amount of the privacy budget spend per aggregate (that is, the maximum privacy loss\nincurred by each aggregate function in a query).",
        "For example, to use the ALTER PRIVACY POLICY command to adjust the privacy controls of an existing privacy budget,\nyou might execute:",
        "You can also define these controls when executing the CREATE PRIVACY POLICY command to create the privacy policy.",
        "Caution",
        "When changing the BUDGET_LIMIT, MAX_BUDGET_PER_AGGREGATE, or BUDGET_WINDOW parameter, any\nparameter not specified in your ALTER PRIVACY POLICY command reverts back to its default value. So in the previous example,\nthe BUDGET_WINDOW parameter, which determines how often Snowflake resets the privacy budget, will revert to its default value.",
        "For more information about setting privacy controls, see Adjust privacy controls.",
        "Snowflake periodically resets the cumulative privacy loss of a privacy budget to 0 to let analysts run a new set of queries. This refresh\nperiod is known as the budget window. This automatic refresh lets analysts access new data as it is added to a table. Theoretically,\nthe analyst hasn\u2019t learned any information about this new data, so it\u2019s appropriate to let them run more queries.",
        "The default budget window is weekly.",
        "To modify the privacy budget refresh period, update the budget_window value of the privacy policy\u2019s privacy_budget. For example:",
        "Caution",
        "When changing the BUDGET_LIMIT, MAX_BUDGET_PER_AGGREGATE, or BUDGET_WINDOW parameter, any parameter not specified\nin your ALTER PRIVACY POLICY command reverts back to its default value. So in the previous example, BUDGET_LIMIT and\nMAX_BUDGET_PER_AGGREGATE will revert to default values.",
        "As analysts execute queries on data protected by a policy, Snowflake tallies the cumulative privacy loss of those queries. You can call\nthe RESET_PRIVACY_BUDGET stored procedure to reset the cumulative privacy loss to 0, letting the\nanalysts execute additional queries.",
        "The RESET_PRIVACY_BUDGET stored procedure is intended to reset the budget when analysts inadvertently incur privacy loss and want to\nstart over. Remember that the privacy loss is automatically set to 0 when the privacy budget is refreshed.",
        "Only the cumulative privacy loss associated with analysts in the specified account is reset to 0, even if the privacy budget is associated\nwith analysts in multiple accounts.",
        "Note",
        "When calling RESET_PRIVACY_BUDGET, the cumulative privacy loss is not reset\nimmediately. It is reset the next time a query incurs privacy loss. As a result,\nif you view the privacy budget after calling the function but before the first\nquery incurs privacy loss, the cumulative privacy loss will not be 0.",
        "Example",
        "Here\u2019s an example of zeroing out the privacy usage count for all users executing  queries in the companyorg.account_123 account:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}