{
    "url": "https://docs.snowflake.com/en/user-guide/tables-iceberg-configure-catalog-integration-glue",
    "title": "Configure a catalog integration for AWS Glue | Snowflake Documentation",
    "paragraphs": [
        "Create a catalog integration for AWS Glue and grant Snowflake restricted access\nto the AWS Glue Data Catalog.",
        "Note",
        "To complete the instructions in this section, you must have permissions in Amazon Web Services (AWS)\nto create and manage IAM policies and roles.\nIf you are not an AWS administrator, ask your AWS administrator to perform these tasks.",
        "As a best practice, create a new IAM policy for Snowflake to access the AWS Glue Data Catalog.\nYou can then attach the policy to an IAM role and use the security credentials that AWS generates\nfor that role to access files in the catalog. For instructions, see\nCreating IAM policies and\nModifying a role permissions policy\nin the AWS Identity and Access Management User Guide.",
        "At a minimum, Snowflake requires the following permissions on the AWS Glue Data Catalog to access information about tables.",
        "glue:GetTable",
        "glue:GetTables",
        "The following example policy (in JSON format) provides the required permissions\nto access all of the tables in a specified database.",
        "Note",
        "You can modify the Resource element of this policy to further restrict the allowed resources\n(for example, catalog, databases, or tables). For more information, see\nResource types defined by AWS Glue.",
        "If you use encryption for AWS Glue, you must modify the policy to add AWS Key Management Service (AWS KMS) permissions.\nFor more information, see Setting up encryption in AWS Glue.",
        "Create a catalog integration for the AWS Glue Data Catalog using the CREATE CATALOG INTEGRATION (AWS Glue) command.",
        "The following example creates a catalog integration that uses an AWS Glue Data Catalog source.\nThe example specifies a value for the optional GLUE_REGION parameter.",
        "To retrieve information about the AWS IAM user and the external ID\nthat were created for your Snowflake account when you created the catalog integration, execute the DESCRIBE CATALOG INTEGRATION command.\nYou provide this information to AWS in the next section to establish a trust relationship.",
        "The following example command describes the catalog integration created in the previous step:",
        "Record the following values:",
        "Value",
        "Description",
        "GLUE_AWS_IAM_USER_ARN",
        "The AWS IAM user created for your Snowflake account, for example,\narn:aws:iam::123456789001:user/abc1-b-self1234.\nSnowflake provisions a single IAM user for your entire Snowflake account.\nAll Glue catalog integrations in your account use that IAM user.",
        "GLUE_AWS_EXTERNAL_ID",
        "The external ID that is needed to establish a trust relationship.",
        "You will provide these values in the next section.",
        "Update the trust policy for the same IAM role that you specified with the ARN when you created the\ncatalog integration (GLUE_AWS_ROLE_ARN). Add the values that you recorded in\nStep 3: Retrieve the AWS IAM user and external ID for your Snowflake account to the trust policy.",
        "For instructions, see Modifying a trust policy.",
        "The following example trust policy demonstrates where to specify the GLUE_AWS_IAM_USER_ARN and GLUE_AWS_EXTERNAL_ID values:",
        "Where:",
        "glue_iam_user_arn is the GLUE_IAM_USER_ARN value that you recorded.",
        "glue_aws_external_id is the GLUE_AWS_EXTERNAL_ID value that you recorded.",
        "Note",
        "For security reasons, if you create a new catalog integration (or recreate an existing catalog integration using the CREATE OR\nREPLACE CATALOG INTEGRATION syntax), the new catalog integration has a different external ID and cannot resolve the trust\nrelationship unless you modify the trust policy with the new external ID.",
        "To verify that your permissions are configured correctly, create an Iceberg table\nusing this catalog integration. Snowflake doesn\u2019t verify that your permissions are set correctly until you create\nan Iceberg table that references this catalog integration.",
        "After you configure a catalog integration for AWS Glue, you can create an Iceberg table that uses AWS Glue\nas the catalog.",
        "To update the table and keep it in sync with changes in AWS Glue, use an\nALTER ICEBERG TABLE \u2026 REFRESH statement. For more information, see\nRefresh the metadata for a table.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}