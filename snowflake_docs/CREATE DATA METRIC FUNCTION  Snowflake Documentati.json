{
    "url": "https://docs.snowflake.com/en/sql-reference/sql/create-data-metric-function",
    "title": "CREATE DATA METRIC FUNCTION | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "Data Quality and data metric functions (DMFs) require Enterprise Edition. To inquire about upgrading, please contact\nSnowflake Support.",
        "Creates a new data metric function (DMF) in the current or specified schema, or replaces an existing data metric function.",
        "After creating a DMF, apply it to a table column using an\nALTER TABLE \u2026 ALTER COLUMN command or a view column using the ALTER VIEW command.",
        "This command supports the following variants:",
        "CREATE OR ALTER DATA METRIC FUNCTION: Creates a new data metric function if it doesn\u2019t exist or alters an existing data metric function.",
        "DMF command reference, CREATE OR ALTER <object>",
        "Preview Feature \u2014 Open",
        "Available to all accounts.",
        "Creates a new data metric function if it doesn\u2019t already exist, or transforms an existing data metric function into\nthe function defined in the statement. A CREATE OR ALTER DATA METRIC FUNCTION statement follows the syntax rules of\na CREATE DATA METRIC FUNCTION statement and has the same limitations as an ALTER FUNCTION (DMF)\nstatement.",
        "Unlike a CREATE OR REPLACE DATA METRIC FUNCTION command, a CREATE OR ALTER command updates the object without\ndeleting and recreating it.",
        "Supported function alterations include changes to COMMENTS.",
        "For more information, see CREATE OR ALTER DATA METRIC FUNCTION usage notes.",
        "Identifier for the DMF; must be unique for your schema.",
        "In addition, the identifier must start with an alphabetic character and cannot contain spaces or special characters unless the\nentire identifier string is enclosed in double quotes (for example, \"My object\"). Identifiers enclosed in double quotes are also\ncase-sensitive.",
        "For more information, see Identifier requirements.",
        "The signature for the DMF, which is used as input for the expression.",
        "You must specify:",
        "Only one argument name for the table, arg_name.",
        "At least one column name and its data type, c1 data_type.",
        "You can optionally specify additional columns and their data types. The columns must be in the same table and cannot reference a\ndifferent table.",
        "The data type of the output of the function.",
        "The data type can only be NUMBER.",
        "SQL expression that determines the output of the function. The expression must be deterministic and return a scalar value. The expression\ncan reference other table objects, such as by using a WITH clause or a\nWHERE clause.",
        "The delimiters around the expression can be either single quotes or a pair of dollar signs. Using $$ as the delimiter makes\nit easier to write expressions that contain single quotes.",
        "If the delimiter for the expression is the single quote character, then any single quotes within expression\n(for example, string literals) must be escaped by single quotes.",
        "The expression does not support the following:",
        "Using the JOIN construct.",
        "Using nondeterministic functions (for example, CURRENT_TIME).",
        "Referencing an object that depends on a UDF or UDTF.",
        "Returning a nonscalar output.",
        "Specifies the language used to write the expression.",
        "SQL is the only supported language.",
        "A comment for the DMF.",
        "A role used to execute this SQL command must have the following\nprivileges at a minimum:",
        "Privilege",
        "Object",
        "Notes",
        "CREATE DATA METRIC FUNCTION",
        "Schema",
        "The privilege only enables the creation of data metric functions in the schema.",
        "If you want to enable the creation of user-defined functions, such as SQL or Java UDFs, the role must have the CREATE FUNCTION\nprivilege.",
        "The USAGE privilege on the parent database and schema are required to perform operations on any object in a schema.",
        "For instructions on creating a custom role with a specified set of privileges, see Creating custom roles.",
        "For general information about roles and privilege grants for performing SQL actions on\nsecurable objects, see Overview of Access Control.",
        "If you want to update an existing data metric function and need to see the current definition of the function, run the\nDESCRIBE FUNCTION (DMF) command or call the GET_DDL function.",
        "Regarding metadata:",
        "Attention",
        "Customers should ensure that no personal data (other than for a User object), sensitive data, export-controlled data, or other regulated data is entered as metadata when using the Snowflake service. For more information, see Metadata fields in Snowflake.",
        "Preview Feature \u2014 Open",
        "Available to all accounts.",
        "The following alterations are not supported:",
        "Changing the body of the data metric function.",
        "Changing the data metric and the input table definition.",
        "Create a DMF that calls the COUNT function to return the total number of rows that\ndon\u2019t contain NULL values when evaluating the first three columns in the table:",
        "You can create a data metric function that references a different table than the table to which you assign the DMF. For\nexample, you might want to create a DMF to measure the number of rows that are due to a\nforeign key constraint. As a representative example, consider two\ntables, salespeople and salesorders, which have a common column called sp_id that is designated as a foreign key constraint.",
        "Create a DMF to identify the number of rows that include a foreign key reference. The WHERE clause specifies the sp_id\ncolumn, which contains the identifiers for the sales persons, in the salespeople table:",
        "Call the DMF manually and specify the sp_id column in the salesorders table:",
        "The output returns the number of rows in the salesorder table where the value in the sp_id column is the result of a value in the\nsp_id column in the salespeople table.",
        "The following example alters the data metric function created in the example above to set security and comment.",
        "Was this page helpful?",
        "On this page"
    ]
}