{
    "url": "https://docs.snowflake.com/en/user-guide/budgets/config",
    "title": "Activate the account budget or create custom budgets | Snowflake Documentation",
    "paragraphs": [
        "To use the Budgets feature, activate the account budget and create custom budgets to monitor credit usage for a group of\nspecific Snowflake objects.",
        "To start using Budgets to monitor credit usage for your account, activate the account budget. After you activate the account\nbudget, you can set the spending limit for the account and the email addresses to receive notifications when credit usage is\nexpected to exceed the spending limit. Notifications begin when projected spending is more than 10% above the spending limit.",
        "You can activate the account budget by using Snowsight or by executing SQL statements.",
        "The next sections explain how to activate the account budget:",
        "Create a custom role to manage the account budget",
        "Use Snowsight to activate the account budget",
        "Use SQL commands to activate the account budget",
        "After you activate and set up the account budget, you can enable a non-administrator user to monitor the account budget by\nusing a custom role. For more information, see Create a custom role to monitor the account budget.",
        "You can create a custom role to activate and modify the account budget. A user who is granted this role can act as the budget\nadministrator and can take the following actions on the account budget:",
        "Activate and deactivate the account budget.",
        "Set the spending limit.",
        "Edit notification settings.",
        "Monitor credit usage for the account.",
        "For a full list of roles and privileges required for the budget administrator role, see Budgets roles and privileges.",
        "The following example creates a role named account_budget_admin and grants the role the ability to monitor and manage the\naccount budget:",
        "Note",
        "Only a user with the ACCOUNTADMIN role or a role\ngranted account budget admin privileges can activate and set up the account budget.",
        "Sign in to Snowsight.",
        "Select Admin \u00bb Cost Management.",
        "Select Budgets.",
        "If prompted, select a warehouse.",
        "In the upper-right corner of the dashboard, select Set up Account Budget.",
        "Enter the target spending limit for the account.",
        "Enter the email addresses to receive notification emails.",
        "Note",
        "Each email address added for budget notifications must be verified. The\nnotification email setup fails if any email address in the list is not verified.",
        "Select Finish Setup.",
        "Note",
        "Only a user with the ACCOUNTADMIN role or a role\ngranted account budget admin privileges can activate and set up the account budget.",
        "Activate the account budget by calling the account_root_budget!ACTIVATE method on the\nSNOWFLAKE.LOCAL.ACCOUNT_ROOT_BUDGET object:",
        "Set the spending limit calling the <budget_name>!SET_SPENDING_LIMIT method:",
        "Set up notifications for the budget so that you receive notifications when your credit usage is expected to exceed your\nspending limits.",
        "See Working with notifications for a budget.",
        "You can create a custom budget using Snowsight or by executing SQL statements.",
        "The next sections explain how to create a custom budget:",
        "Create a custom role to create budgets",
        "Use Snowsight to create a custom budget",
        "Use SQL commands to create a custom budget",
        "You can use a custom role to create budgets in your account. For a full list of privileges and roles that must be granted to a\nrole to create a custom budget, see Budgets roles and privileges.",
        "The following example creates a role named budget_owner role and grants the required role and privileges to create custom\nbudgets in the schema budgets_db.budgets_schema. The example must be executed using the ACCOUNTADMIN role:",
        "If you want to enable a role other than the budget owner to modify a custom budget\u2019s settings, you can create a custom role with\nmodify privileges. For more information, see Create a custom role to manage a custom budget.",
        "Note",
        "If the account budget is not activated or has\nbeen deactivated, you can\u2019t use Snowsight to create custom budgets. However, you\ncan create custom budgets using SQL.",
        "Sign in to Snowsight.",
        "Select Admin \u00bb Cost Management.",
        "Select Budgets.",
        "In the upper-right corner of the dashboard, select  (Add Budget).",
        "Enter a Budget name.",
        "Select the database and schema in which to create your budget.",
        "Enter the Spending limit.",
        "Enter the email addresses to receive notifications.",
        "Note",
        "Each email address added for budget notifications must be verified. The\nnotification email setup fails if any email address in the list is not verified.",
        "Select Resources to monitor.",
        "To add a database, expand Databases to select a database.",
        "To add objects in a schema, expand the schema to list available objects. Expand the object category\n(for example, Tables or Tasks) to select objects.",
        "To add a warehouse, expand Warehouses to select a warehouse.",
        "To add a compute pool, expand Compute Pools to select a compute pool.",
        "Note",
        "When you select a database or schema, all supported objects (for example, tables)\ncontained within the database or schema are also added to the budget.",
        "You can only add an object to one custom budget. If an object is currently included in one custom budget and\nyou add that object to a second custom budget, Budgets removes the object from the first custom budget without\nissuing a warning.",
        "After you create and set up a custom budget, you can create a custom role to enable non-account administrators to monitor budget resources\nand usage. For more information, see Create a custom role to monitor a custom budget.",
        "Create a custom budget and then set the spending limit and notification email addresses.",
        "Note",
        "To create a custom budget, you must use a role with the\nrequired privileges to create a budget.",
        "To modify a custom budget, you must use a role with the\nrequired privileges to modify a budget.",
        "Review the existing budgets in your account:",
        "Note",
        "The following statement returns the budgets for which you have access privileges. Only a user with the ACCOUNTADMIN role\ncan see all the budgets in the account.",
        "Create budget my_budget in budgets_db.budgets_schema using the\nCREATE BUDGET command:",
        "Set the monthly spending limit. For example, set the spending limit to 500 credits per month:",
        "Set up notifications for the budget so that you receive notifications when your credit usage is expected to exceed your\nspending limits.",
        "See Working with notifications for a budget.",
        "After you create and set up a custom budget, you can create a custom role to enable non-account administrators to monitor budget\nresources and usage. For more information, see Create a custom role to monitor a custom budget.",
        "To add objects to your new budget, see Adding and removing objects from a custom budget.",
        "To monitor and modify a custom budget, you can grant privileges and instance roles to a custom role. For a full list of privileges\nand roles that must be granted to a role to modify a custom budget, see Budgets roles and privileges.",
        "Grant the custom role budget_admin the ability to monitor and modify the budget my_budget in schema\nbudgets_db.budgets_schema:",
        "Note",
        "Only a role with the OWNERSHIP privilege on the custom budget can execute the following examples.",
        "For example, grant the required privileges and instance role to custom role budget_admin for budget my_budget in schema\nbudgets_db.budgets_schema:",
        "Grant the APPLYBUDGET privilege on objects to be added to or removed from a custom budget. This step is required for each object\nto be added or removed.",
        "For example, to enable the role budget_admin to add database db1 to custom budget my_budget,\nexecute the following statements:",
        "To modify the objects in a custom budget, see Adding and removing objects from a custom budget.",
        "To receive notifications when your credit usage is expected to exceed your spending limits, you must set up the budget so that\nnotifications can be sent to the destination of your choice. You can receive notifications through the following:",
        "Email.",
        "Messages pushed to a queue provided by a cloud service (Amazon SNS, Azure Event Grid, or Google Cloud PubSub).",
        "Calls to a webhook for Slack, Microsoft Teams, or PagerDuty.",
        "The next sections explain how to set up notifications and interpret the notification messages:",
        "Setting up email notification",
        "Setting up queue notification",
        "Setting up webhook notification",
        "Interpreting the JSON notification message",
        "Checking the history of notifications about a budget",
        "Removing a notification integration from a budget",
        "To set up email notification:",
        "(Optional) If you want to use your own notification integration, create a notification integration or choose an existing\nnotification integration that you want to use. A notification integration enables Snowflake to send notifications to a\nthird-party system.",
        "Create a notification integration with TYPE = EMAIL and ALLOWED_RECIPIENTS set to the list of verified email addresses of\nthe recipients. For information, see Create an email notification integration and\nRestrict the list of email addresses that can receive notifications.",
        "Note",
        "Each email address added for budget notifications must be verified. The\nemail notification setup fails if any email address in the list is not verified.",
        "For example:",
        "Verify that the notification integration works as expected by calling the\nSYSTEM$SEND_SNOWFLAKE_NOTIFICATION stored procedure to send a test message.",
        "For example, you can send a test message in JSON format:",
        "Grant the USAGE privilege on the notification integration to the SNOWFLAKE application. The USAGE privilege enables the\nbudget to use the notification integration to send the notification. For example:",
        "Specify the email addresses that should receive the notification. If you created or selected a notification integration to use,\nassociate the notification integration with the budget.",
        "To do this, call the <budget_name>!SET_EMAIL_NOTIFICATIONS method, and specify the following:",
        "If you do not have a notification integration that you want to use, pass in a comma-delimited list of verified email\naddresses. For example, if you are configuring notifications for the account budget:",
        "If you are configuring notifications for a custom budget, call the method on the object for the custom budget. For example,\nif you created a custom budget named my_budget:",
        "If you have a notification integration that you want to use, pass in the name of that integration and a comma-delimited list\nof verified email addresses. For example, if you are configuring notifications for the account budget:",
        "If you are configuring notifications for a custom budget, call the method on the object for the custom budget. For example,\nif you created a custom budget named my_budget:",
        "If you associated a notification integration with the budget, you can verify that the budget is associated with your\nnotification integration by calling the\n<budget_name>!GET_NOTIFICATION_INTEGRATION_NAME method. This method returns the name of the\nemail notification integration associated with the budget.",
        "For example, if you are configuring notifications for the account budget:",
        "If you are configuring notifications for a custom budget, call the method on the object for the custom budget. For example,\nif you created a custom budget named my_budget:",
        "To set up queue notification:",
        "Create a notification integration or choose an existing notification integration that you want to use. A notification\nintegration enables Snowflake to send notifications to a third-party system.",
        "Create a notification integration with TYPE=QUEUE, DIRECTION=OUTBOUND, and the additional properties required for the cloud\nprovider. For information, see:",
        "Creating a notification integration to send notifications to an Amazon SNS topic",
        "Creating a notification integration to send notifications to a Microsoft Azure Event Grid topic",
        "Creating a notification integration to send notifications to a Google Cloud Pub/Sub topic",
        "Note",
        "Your account must be on the same cloud platform as the cloud provider queue.",
        "For example:",
        "Note",
        "For queue and webhook notifications, you can associate up to 10 notification integrations with a budget.",
        "Verify that the notification integration works as expected by calling the\nSYSTEM$SEND_SNOWFLAKE_NOTIFICATION stored procedure to send a test message.",
        "For example, you can send a test message in JSON format:",
        "Grant the USAGE privilege on the notification integration to the SNOWFLAKE application. The USAGE privilege enables the budget\nto use the notification integration to send the notification. For example:",
        "Associate the notification integration with the budget. Call the\n<budget_name>!ADD_NOTIFICATION_INTEGRATION method, passing in the name of the integration.",
        "For example, if you are configuring notifications for the account budget:",
        "If you are configuring notifications for a custom budget, call the method on the object for the custom budget. For example,\nif you created a custom budget named my_budget:",
        "Verify that the notification integration is associated with the budget.",
        "Call the <budget_name>!GET_NOTIFICATION_INTEGRATIONS method to print out the list of\nnotification integrations associated with the budget.",
        "For example, if you are configuring notifications for the account budget:",
        "If you are configuring notifications for a custom budget, call the method on the object for the custom budget. For example,\nif you created a custom budget named my_budget:",
        "The method prints out a table that lists the names of the integrations, the times that they were last used to send\nnotifications, and the dates when they were added.",
        "To set up webhook notification:",
        "Create a notification integration or choose an existing notification integration that you want to use. A notification\nintegration enables Snowflake to send notifications to a third-party system.",
        "Create a notification integration with TYPE=WEBHOOK and the additional properties required for the webhook. For information,\nsee Sending webhook notifications.",
        "The notification message is in JSON format, so you should configure the notification integration to handle this. For example,\nthe following statements create a secret and a notification integration for a Slack webhook:",
        "Note",
        "For queue and webhook notifications, you can associate up to 10 notification integrations with a budget.",
        "Verify that the notification integration works as expected by calling the\nSYSTEM$SEND_SNOWFLAKE_NOTIFICATION stored procedure to send a test message.",
        "For example, you can send a test message in JSON format. Make sure to escape the double quotes in the JSON string and the\nbackslashes:",
        "Grant the USAGE privilege on the notification integration to the SNOWFLAKE application. The USAGE privilege enables the budget\nto use the notification integration to send the notification. For example:",
        "If you are using a webhook notification integration that relies on a secret, grant the following privileges to the\nSNOWFLAKE application.",
        "The READ privilege on that secret.",
        "The USAGE privilege on the schema containing that secret.",
        "The USAGE privilege on the database containing that schema.",
        "For example:",
        "Associate the notification integration with the budget.",
        "Call the <budget_name>!ADD_NOTIFICATION_INTEGRATION method, and pass in the name of the\nintegration.",
        "For example, if you are configuring notifications for the account budget:",
        "If you are configuring notifications for a custom budget, call the method on the object for the custom budget. For example,\nif you created a custom budget named my_budget:",
        "Verify that the notification integration is associated with the budget.",
        "Call the <budget_name>!GET_NOTIFICATION_INTEGRATIONS method, which prints out the list of\nnotification integrations associated with the budget.",
        "For example, if you are configuring notifications for the account budget:",
        "If you are configuring notifications for a custom budget, call the method on the object for the custom budget. For example,\nif you created a custom budget named my_budget:",
        "The method prints out a table that lists the names of the integrations, the times that they were last used to send\nnotifications, and the dates when they were added.",
        "When you configure a budget to send a notification to a cloud provider queue or a webhook, the notification message contains a\nJSON object similar to the following:",
        "The JSON object contains the following key-value pairs:",
        "Key",
        "Description",
        "account_name",
        "Name of your account.",
        "budget_name",
        "Name of your budget. For the account budget, the name is ACCOUNT_ROOT_BUDGET.",
        "type",
        "The type of the notification (for example, BUDGET_LIMIT_WARNING).",
        "limit",
        "The spending limit that you set for the budget.",
        "spending",
        "The amount of credit usage for this month.",
        "spending_percent",
        "The percentage of the spending limit that has already been spent (spending / limit).",
        "spending_trend_percent",
        "Expected percentage of the spending limit to be spent by the end of the month (spending_percent / time_percent * 100).",
        "time_percent",
        "Percentage of time that has passed for the month (for example, 50.00 if the month is half over).",
        "To view the history of notifications about a budget, call the NOTIFICATION_HISTORY function and\nfilter on the integration name. For example:",
        "The message_source column contains BUDGET for rows representing budget notifications.",
        "To remove a notification integration from a budget, call the\n<budget_name>!REMOVE_NOTIFICATION_INTEGRATION method, passing in the name of the integration.\nFor example:",
        "You can add or remove objects from a custom budget using Snowsight or SQL.",
        "Note",
        "To add or remove objects from a custom budget, you must use a role with the required privileges on the budget and the object. For more\ninformation, see Create a custom role to manage a custom budget.",
        "Sign in to Snowsight.",
        "Select Admin \u00bb Cost Management.",
        "Select Budgets.",
        "Select the budget to edit.",
        "In the upper-right corner of the dashboard, select  (edit icon).",
        "Select + Resources.",
        "To add or remove a database, expand Databases to select or deselect a database.",
        "To add or remove objects in a schema, expand the schema to list available objects. Expand the object category\n(for example, Tables or Tasks) to select or deselect objects.",
        "To add or remove a warehouse, expand Warehouses to select or deselect a warehouse.",
        "To add or remove a compute pool, expand Compute Pools to select or deselect a compute pool.",
        "Note",
        "When you select a database or schema, all supported objects (for example, tables)\ncontained within the database or schema are also added to the budget.",
        "You can only add an object to one custom budget. If an object is currently included in one custom budget and\nyou add that object to a second custom budget, Budgets removes the object from the first custom budget without\nissuing a warning.",
        "Select Done.",
        "The role used to add or remove an object from a budget must have the APPLYBUDGET privilege on the object. For more information, see\nthe examples in the Create a custom role to manage a custom budget section.",
        "To review the list of objects already in the custom budget, call the budget\u2019s\n<budget_name>!GET_LINKED_RESOURCES method. For example, to see the list of objects in the budget\nmy_budget in the budgets_db.budgets_schema schema, execute the following statement:",
        "The statement returns the following output:",
        "Note",
        "The list does not include objects that were added automatically (for example, compute pools and warehouses created and owned by\na Snowflake Native App).",
        "Objects must be added to or removed from a budget by reference.",
        "You can add table t1 to budget my_budget by using the following steps:",
        "Grant the APPLYBUDGET privilege on the table to the role budget_admin by executing the following statement:",
        "Pass a reference for table t1 to the ADD_RESOURCE instance\nmethod by executing the following statement:",
        "The SYSTEM$REFERENCE function creates a reference for a TABLE object, t1, with the\nAPPLYBUDGET privilege granted on the table. This enables the budget to monitor the specified object in your account. The\nthird parameter to the function specifies the scope for the reference; in this\ncase, \u2018SESSION\u2019 creates a reference with session scope. References passed to the ADD_RESOURCE method for a budget can be created\nwith any transient reference scope (that is, the third parameter can be either \u2018SESSION\u2019 or \u2018CALL\u2019).",
        "For a full list of objects and privileges, see Supported object types and privileges for references.",
        "Note",
        "If you want to add a Snowflake Native App to a budget, when you call SYSTEM$REFERENCE, specify 'DATABASE' (not 'APPLICATION')\nfor the object_type argument.",
        "Note",
        "You can only add an object to one custom budget. If an object is currently included in one custom budget and\nyou add that object to a second custom budget, Budgets removes the object from the first custom budget without\nissuing a warning.",
        "You can remove the database db1 from the budget my_budget by using the following steps:",
        "Grant the APPLYBUDGET privilege on the database to the role budget_admin by executing the following statement:",
        "Remove the database by passing a reference to the REMOVE_RESOURCE\ninstance method:",
        "You can delegate budget monitoring by creating a custom role that can be used by non-administrator users to monitor budgets.",
        "You can create a custom role to enable non-account administrator users to monitor the account budget. For a full list of privileges\nand roles that must be granted to a role to monitor the account budget, see Budgets roles and privileges.",
        "Note",
        "Only an account administrator can execute the statements in this example.",
        "For example, create role account_budget_monitor and grant the role the ability to view credit usage for the\naccount budget:",
        "You can create a custom role to enable non-account administrator users to monitor custom budgets. For a full list of privileges\nand roles that must be granted to a role to monitor a custom budget, see Budgets roles and privileges.",
        "Note",
        "Only a budget owner (a role with the OWNERSHIP privilege) can execute the statements in this example.",
        "Use the budget owner role to grant the custom role budget_monitor the ability to monitor the budget my_budget in schema\nbudgets_db.budgets_schema:",
        "You can monitor budgets using Snowsight or SQL.",
        "You can view current and historical budget spending using the Budgets page in Snowsight.",
        "Note",
        "Only a user with the ACCOUNTADMIN role or a role granted the required privileges and role\ncan monitor budgets using Snowsight.",
        "For more information about using a custom account role to monitor the account budget, see Create a custom role to monitor the account budget.",
        "For more information about using a custom account role to monitor custom budgets, see Create a custom role to monitor a custom budget.",
        "Sign in to Snowsight.",
        "Select Admin \u00bb Cost Management.",
        "Select Budgets.",
        "In the Current Month view for a budget, you can review the credit usage per day up to the current day. You can see whether\nyou might exceed your budget for the month. The bar graph continues to the end of the month with your projected credit usage based on your\nactual credit usage for the month. The Spending limit line indicates the spending limit at which a budget notification is triggered.",
        "Select  (months to display) to filter the view by Current Month or longer time periods.",
        "You can compare the Spend (current credit usage) to Interval (time left in the current month) to see if\nyour spending is outpacing your monthly budget.",
        "You can filter the view by selecting  Budgets or  Resources:",
        "You can select a custom budget in the Budgets view for details on a specific budget.",
        "Note",
        "The Service Type list for a custom budget includes an Unused Resources type. This service type is displayed\nwhen an object in a budget has no credit usage data to display. This can happen if the object has no credit usage for\ncompute costs, or if you recently added an object to a budget and the serverless background task\nhas not yet executed.",
        "In the Resources view, you can filter and sort by Service Type, object Name, and Credit Usage.",
        "To monitor the account budget, you must have the required privileges. For more information, see Create a custom role to monitor the account budget.",
        "Use the account_budget_monitor role to view the spending history for the account budget:",
        "You can monitor the spending history by service type. To view the spending history for the search optimization serverless feature\nfor the account budget in the past week, execute the following statements:",
        "To monitor a custom budget, you must have the required privileges. For more information, see Create a custom role to monitor a custom budget.",
        "Use the budget_monitor role to view spending history for a custom budget. For example, to view the spending history for custom\nbudget na_finance_budget in schema budgets_db.budgets_schema, execute the following statements:",
        "You can monitor the spending history by service type. For example, to view the spending history for the materialized views included in\nthe budget, execute the following statements:",
        "For more information, see Budget methods.",
        "To disable notifications for a budget, call the\nSET_NOTIFICATION_MUTE_FLAG method, and pass in TRUE as\nan argument. For example:",
        "You can deactivate the account budget using Snowsight or SQL.",
        "Deactivating the account budget resets the account budget to its state before activation:",
        "All historical account budget data is deleted.",
        "The background measurement task for the account budget is suspended.",
        "The account budget settings for spending limit and email notifications are reset.",
        "Account budget deactivation does not affect custom budgets. To remove a custom budget from your account, use\nthe DROP BUDGET command.",
        "Note",
        "If the account budget is deactivated, you can\u2019t create new custom budgets using Snowsight.\nHowever, you can continue to create custom budgets using SQL.",
        "You can deactivate the account budget using the Budgets page:",
        "Sign in to Snowsight.",
        "Select Admin \u00bb Cost Management.",
        "Select Budgets.",
        "Select the \u2026 more menu in the upper right.",
        "Select Deactivate account budget.",
        "You can use the account_root_budget!DEACTIVATE method to deactivate the account budget:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}