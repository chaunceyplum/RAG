{
    "url": "https://docs.snowflake.com/en/user-guide/data-load-snowpipe-errors-gcs",
    "title": "Enabling Snowpipe error notifications for Google Pub/Sub | Snowflake Documentation",
    "paragraphs": [
        "This topic provides instructions for pushing Snowpipe error notifications to the Google Cloud Pub/Sub (Pub/Sub) service.",
        "This feature can push error notifications for the following types of loads:",
        "Auto-ingest Snowpipe.",
        "Calls to the Snowpipe insertFiles REST API endpoint.",
        "Loads from Apache Kafka using the Snowflake Connector for Kafka with the Snowpipe ingestion method only.",
        "Currently, this feature is limited to Snowflake accounts hosted on Google Cloud (GC). Snowpipe can load data from files in any supported cloud storage service; however, push notifications to Pub/Sub are only supported in Snowflake accounts hosted on GC.",
        "Snowflake guarantees at-least-once message delivery of error notifications (i.e. multiple attempts are made to deliver messages to ensure at least one attempt succeeds, which can result in duplicate messages).",
        "This feature is implemented using the notification integration object. A notification integration is a Snowflake object that provides an\ninterface between Snowflake and third-party cloud message queuing services. A single notification integration can support multiple pipes.",
        "See Creating a notification integration to send notifications to a Google Cloud Pub/Sub topic.",
        "A single notification integration can be shared by multiple pipes. The body of error messages identifies the pipe, external stage and\npath, and file where the error originated, among other details.",
        "To enable error notifications for a pipe, specify an ERROR_INTEGRATION parameter value.",
        "Note",
        "Creating or modifying a pipe that references a notification integration requires a role that has the USAGE privilege on the notification\nintegration. In addition, the role must have either the CREATE PIPE privilege on the schema or the OWNERSHIP privilege on the pipe,\nrespectively.",
        "The USAGE privilege on the parent database and schema are required to perform operations on any object in a schema.",
        "For instructions on creating a custom role with a specified set of privileges, see Creating custom roles.",
        "For general information about roles and privilege grants for performing SQL actions on\nsecurable objects, see Overview of Access Control.",
        "Create a new pipe using CREATE PIPE:",
        "Where:",
        "Name of the notification integration you created in Create a notification integration in Snowflake.",
        "For example:",
        "Modify an existing pipe using ALTER PIPE.",
        "Note",
        "If a notification integration was specified when the pipe was created, it is necessary to first\nunset the ERROR_INTEGRATION parameter (using ALTER PIPE \u2026 UNSET ERROR_INTEGRATION) and then set the parameter.",
        "Where <integration_name> is the name of the notification integration you created in\nCreate a notification integration in Snowflake.",
        "For example:",
        "The body of error messages identifies the pipe and the errors encountered during a load.",
        "The following is a sample message payload describing a Snowpipe error. The payload can include one or more error messages.",
        "Note that you must parse the string into a JSON object to process values in the payload.",
        "Was this page helpful?",
        "On this page"
    ]
}