{
    "url": "https://docs.snowflake.com/en/user-guide/cleanrooms/external-iceberg-tables",
    "title": "Snowflake Data Clean Rooms: External and Iceberg tables | Snowflake Documentation",
    "paragraphs": [
        "Feature \u2014 Generally Available",
        "Not available in government regions.",
        "When external tables and Iceberg tables are linked in a clean room, there are external calls that might allow a collaborator to extract\nsensitive information from the clean room. Due to this, both the provider and consumer need to consent before the other party can use these\nobjects in the clean room.",
        "For limitations when including external tables and Iceberg tables in a clean room, see Limitations.",
        "To control the inclusion of external tables and Iceberg tables in clean rooms created and installed in the web app, provider and consumer\nadministrators configure their clean room environment to explicitly allow these objects.",
        "For clean rooms shared with a consumer by a provider, the consumer cannot include external tables and Iceberg tables unless the provider\nexplicitly allows them for the provider\u2019s clean room environment.",
        "For consumers, clean room users cannot install a clean room that has external tables or Iceberg tables unless the clean room environment\nallows it. Even if the consumer\u2019s clean room environment allows these objects, clean room users are warned when these types of tables have\nbeen linked so they can decide to not install the clean room.",
        "To configure a clean room environment to allow external tables and Iceberg tables:",
        "Sign in to the web app.",
        "Do one of the following:",
        "If you are using a managed account, select Admin \u00bb My Account.",
        "If you are using a Snowflake account, select Admin \u00bb Snowflake Admin and login into Snowflake as a user with the\nACCOUNTADMIN role.",
        "Toggle on External & Iceberg Tables.",
        "Allowing external tables and Iceberg tables in a clean room created and installed using the developer APIs is a two-step process:",
        "First, a user with the ACCOUNTADMIN role allows these types of tables for the entire clean room environment.",
        "Then, clean room users allow these objects for specific clean rooms as they are created or installed.",
        "The account administrator for both the provider and the consumer must explicitly allow external tables and Iceberg tables in the clean room\nenvironment before individual users can allow them in a clean room.",
        "To allow external tables and Iceberg tables in a clean room environment, the account administrator executes:",
        "The provider who is creating a clean room and the consumer who is installing it must allow external tables and Iceberg tables in the clean room.",
        "Before they can link an external table or Iceberg table in a clean room, the provider must call the\nproviders.enable_external_tables_for_cleanroom command. For example, if the provider wants to add an Iceberg table to the\ninsights_cleanroom clean room, they must execute:",
        "After a consumer installs a clean room, they can approve the provider\u2019s inclusion of external tables or Iceberg tables by executing the\nconsumers.enable_external_tables_for_cleanroom command. For example, if the consumer installed a clean room overlap_cleanroom\nthat includes an Iceberg table, they must execute:",
        "As with other objects, external tables and Iceberg tables must be registered before they can be linked. Use the appropriate parameter of\nthe library.register_table_or_view command to indicate the table type.",
        "The fourth parameter of the library.register_table_or_view command specifies whether an object is an external table. For example,\nto register an external table my_ext_table in the samooha_sample_database.demo schema, execute:",
        "The third parameter of the library.register_table_or_view command specifies whether an object is an Iceberg table. For example,\nto register the Iceberg table customers in the samooha_sample_database.demo schema, execute:",
        "Because managed accounts always use external tables, providers must enable external tables and Iceberg tables when sharing a clean room\nwith a managed account.",
        "Collaborators in different regions cannot link external tables and Iceberg tables in clean rooms.",
        "You cannot run an analysis with the SQL Query template if its configuration applies an aggregation policy or projection policy to the\nexternal table or Iceberg table.",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}