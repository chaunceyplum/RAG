{
    "url": "https://docs.snowflake.com/en/sql-reference/data-sharing-usage/listing-access-history",
    "title": "LISTING_ACCESS_HISTORY view | Snowflake Documentation",
    "paragraphs": [
        "Data Sharing Usage",
        "Preview Feature \u2014 Open",
        "This feature is currently in preview and is available to all users.",
        "This view in the DATA_SHARING_USAGE schema can be used to explore the history of consumers\u2019 usage of your listings.\nLISTING_ACCESS_HISTORY provides object-level information about queries run against the data shares or Native Apps attached to your listings. For more information about the data provided by the LISTING_ACCESS_HISTORY view, see the Columns section.",
        "Each row returned by LISTING_ACCESS_HISTORY represents a single time the listing was accessed by a consumer. Because the rows represent queries instead of sessions, it is likely that the same listing will appear multiple times, one row for each query.",
        "A single consumer query can access objects from multiple listings. The QUERY_TOKEN identifies the query that generated a row in the listing access history.\nTo identify a collection of listing objects accessed by a single consumer query, use the QUERY_TOKEN.",
        "The LISTING_ACCESS_HISTORY view does not allow providers to obtain any private consumer information, such as the actual text of queries. The\nview also excludes any objects that are not owned by the provider account. For example, if a consumer joins data from your listing with their own data or another\nprovider\u2019s data, only listing objects that you own are returned by the LISTING_ACCESS_HISTORY view.",
        "Column Name",
        "Data Type",
        "Description",
        "QUERY_TOKEN",
        "VARCHAR",
        "Unique ID for each query run by a consumer. A QUERY_TOKEN does not correlate with any actual query identifier on the consumer side.",
        "QUERY_DATE",
        "DATE",
        "Date when the query was executed.",
        "EXCHANGE_NAME",
        "VARCHAR",
        "Snowflake Marketplace or the data exchange where the listing is available.",
        "SNOWFLAKE_REGION",
        "VARCHAR",
        "Snowflake region where the consumption occurred.",
        "LISTING_GLOBAL_NAME",
        "VARCHAR",
        "Global name of the listing in the Snowflake Marketplace or data exchange that provides the share.",
        "PROVIDER_ACCOUNT_LOCATOR",
        "VARCHAR",
        "Account locator of the share owner.",
        "PROVIDER_ACCOUNT_NAME",
        "VARCHAR",
        "Account name of the share owner.",
        "SHARE_NAME",
        "VARCHAR",
        "Name of the data share that consumers accessed. When IS_SHARE is FALSE, the value is NULL.",
        "CONSUMER_ACCOUNT_LOCATOR",
        "VARCHAR",
        "Account locator of the consumer.",
        "CONSUMER_ACCOUNT_NAME",
        "VARCHAR",
        "Account name of the consumer.",
        "CONSUMER_ACCOUNT_ORGANIZATION",
        "VARCHAR",
        "Name of the organization for the consumer account.",
        "LISTING_OBJECTS_ACCESSED",
        "ARRAY",
        "Use SHARE_OBJECTS_ACCESSED as it contains the same data. When IS_SHARE is FALSE, the value is NULL. See LISTING_OBJECTS_ACCESSED array for formatting.",
        "REGION_GROUP",
        "VARCHAR",
        "Region group where the account of the consumer is located.",
        "CONSUMER_NAME",
        "VARCHAR",
        "Contains the name of the consumer account that accessed, used, or requested a listing. If no name is available, such as for trial accounts, the value is NULL.",
        "IS_SHARE",
        "BOOLEAN",
        "TRUE if the access was on a share. When TRUE, the SHARE_OBJECTS_ACCESSED column provides details about the share objects accessed by the consumer query.",
        "IS_APPLICATION",
        "BOOLEAN",
        "TRUE if the access was on an application. When TRUE, APPLICATION_OBJECTS_ACCESSED column provides details about the application objects accessed by the consumer query.",
        "SHARE_OBJECTS_ACCESSED",
        "ARRAY",
        "Details the share objects accessed by the consumer query. When IS_SHARE is FALSE, the value is NULL. See SHARE_OBJECTS_ACCESSED array for formatting.",
        "APPLICATION_OBJECTS_ACCESSED",
        "ARRAY",
        "Details the application objects accessed by the consumer query. When IS_APPLICATION is FALSE, the value is NULL. See APPLICATION_OBJECTS_ACCESSED array.",
        "APPLICATION_PACKAGE_NAME",
        "VARCHAR",
        "The current name of the application package from which the application was installed. When IS_APPLICATION is FALSE, the value is NULL.",
        "APPLICATION_VERSION",
        "VARCHAR",
        "The version of the application when the query occurred. When IS_APPLICATION is FALSE, the value is NULL",
        "APPLICATION_PATCH_ID",
        "INTEGER",
        "The application patch number when the query occurred. When IS_APPLICATION is FALSE, the value is NULL.",
        "Latency for the view may be up to 2 days.",
        "The data is retained for 365 days (1 year).",
        "The SHARE_OBJECTS_ACCESSED array provides details about the objects in a share accessed by a consumer query. The format of an item in the array depends on the type of object that was accessed.",
        "Functions:",
        "Stored procedures:",
        "Tables, views, and columns:",
        "The APPLICATION_OBJECTS_ACCESSED array provides details about the objects in a Native App accessed by a consumer query. The format of an item in the array depends on the type of object that was accessed.",
        "Unlike the LISTING_OBJECTS_ACCESSED column array results, APPLICATION_OBJECTS_ACCESSED results containing object IDs are unavailable and database names are masked.",
        "Functions:",
        "Stored procedures:",
        "Tables, views, and columns:",
        "Use SHARE_OBJECTS_ACCESSED Array instead.",
        "This section contains the following example SQL queries for the LISTING_ACCESS_HISTORY view:",
        "Aggregate view of access over time",
        "Aggregate view of access over time by consumer",
        "Access count by column",
        "Table joins",
        "Table joins by consumer",
        "An aggregate view of which functions, stored procedures, tables, views, and columns have been accessed (over a certain period) and the total number of times.",
        "This example is similar to Aggregate view of access over time, broken down by consumer.",
        "For a given object (table, view), how many times each column was accessed.",
        "A view of which combination of tables are being joined together.",
        "A view of which tables are being joined together (pairs) broken down by consumer.",
        "Was this page helpful?",
        "On this page"
    ]
}