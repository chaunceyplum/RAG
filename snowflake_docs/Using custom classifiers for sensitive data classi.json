{
    "url": "https://docs.snowflake.com/en/user-guide/classify-custom-using",
    "title": "Using custom classifiers for sensitive data classification | Snowflake Documentation",
    "paragraphs": [
        "Enterprise Edition Feature",
        "Custom Classification requires Enterprise Edition (or higher). To inquire about upgrading, please contact Snowflake Support.",
        "Custom classification uses the CUSTOM_CLASSIFIER class to enable data engineers to extend their sensitive data classification capabilities\nbased on their own knowledge of their data. You can create an instance of the CUSTOM_CLASSIFIER class in the database and\nschema of your choice and call instance methods to manage regular expressions associated with the instance.",
        "The following methods and SQL commands are supported:",
        "Commands:",
        "CREATE CUSTOM_CLASSIFIER",
        "DROP CUSTOM_CLASSIFIER",
        "SHOW CUSTOM_CLASSIFIER",
        "Methods:",
        "custom_classifier!ADD_REGEX",
        "custom_classifier!DELETE_CATEGORY",
        "custom_classifier!LIST",
        "These sections summarize the roles and grants on various objects that you need to use an instance.",
        "You can use the following roles with custom classification:",
        "SNOWFLAKE.CLASSIFICATION_ADMIN: database role that enables you to create a custom classification instance.",
        "custom_classifier!PRIVACY_USER: instance role that enables you to call the following methods on\nthe instance:",
        "ADD_REGEX",
        "LIST",
        "DELETE_CATEGORY",
        "The account role with the OWNERSHIP privilege on the instance can run these commands:",
        "DROP CUSTOM_CLASSIFIER",
        "SHOW CUSTOM_CLASSIFIER",
        "To create and manage instances, you can choose to either grant the CREATE SNOWFLAKE.DATA_PRIVACY.CUSTOM_CLASSIFIER\nprivilege to a role or grant the PRIVACY_USER instance role to a role.",
        "You can grant the instance roles to account roles and database roles to enable other users to work with custom classification instances:",
        "Where:",
        "Specifies the name of the custom classification instance.",
        "Specifies the name of an account role.",
        "Specifies the name of a database role.",
        "You must use a warehouse to call methods on the instance. However, you cannot use the GRANT OWNERSHIP command to\ntransfer ownership on the instance to a different role or database role.",
        "To grant the custom role my_classification_role the required instance role and privileges to create and use an instance of the\nCUSTOM_CLASSIFIER class, execute the following statements:",
        "If you would like to enable a specific role, such as data_analyst to use a specific instance, do the following:",
        "The high-level approach to classify data with custom classifiers is as follows:",
        "Identify a table to classify.",
        "Use SQL to do the following:",
        "Create a custom classification instance.",
        "Add the system tag categories and regular expressions to the instance.",
        "Classify the table.",
        "Complete these steps to create a custom classifier to classify a table:",
        "Consider a table, data.tables.patient_diagnosis, in which one of its columns contains diagnostic codes, such as\nICD-10 codes.",
        "This table might also include columns to identify patients, such as first and last name, unique health insurance identifiers, and date\nof birth, that were treated at a medical facility. The data owner can classify the table to ensure that the columns are tagged\ncorrectly so the table can be monitored.",
        "In this example, the data owner already has these privileges granted to their role:",
        "OWNERSHIP on the table to classify.",
        "OWNERSHIP on the schema that contains the table.",
        "USAGE on the database that contains the schema and table.",
        "Enable the data owner to classify the table by granting the SNOWFLAKE.CLASSIFICATION_ADMIN database role to the data owner role:",
        "As the data owner, create a schema to store your custom classification instances:",
        "Use the CREATE CUSTOM_CLASSIFIER command to create a custom classification\ninstance in the data.classifiers schema:",
        "You can optionally update your search path as follows:",
        "Add SNOWFLAKE.DATA_PRIVACY so that you don\u2019t have to specify the fully qualified name of the class when creating a new\ninstance of the class.",
        "Add DATA.CLASSIFIERS so that you don\u2019t have to specify the fully qualified name of the instance when calling a method on the\ninstance or using a command with the instance.",
        "Use a SHOW CUSTOM_CLASSIFIER command to list each instance that you create.\nFor example:",
        "Returns:",
        "Call the custom_classifier!ADD_REGEX method on the instance to specify the system tags and regular\nexpression to identify ICD-10 codes in a column. The regular expression in this example matches all possible ICD-10 codes. The regular\nexpression to match the column name, ICD.*, and the comment are optional:",
        "Returns:",
        "Tip",
        "Test the regular expression before adding a regular expression to the custom classification instance. For example:",
        "In this query, only valid values that match the regular expression are returned. The query does not return invalid\nvalues such as xyz.",
        "For details, see String functions (regular expressions).",
        "Call the custom_classifier!LIST method on the instance to verify the regular expression that\nyou added to the instance:",
        "Returns:",
        "To remove a category, call the custom_classifier!DELETE_CATEGORY method on the instance.",
        "Use SQL to classify the table. For details, see Using SQL to asynchronously classify tables in a schema.",
        "If the instance is no longer needed, use the DROP CUSTOM_CLASSIFIER command to\nremove a custom classification instance from the system:",
        "You can use the following queries to audit the creation of custom classification instances, adding regular expressions to instances, and\ndropping the instance.",
        "To audit the creation of custom classification instances, use the following query:",
        "To audit adding regular expressions to a specific instance, use the following query and replace DB.SCH.MY_INSTANCE with the name\nof the instance that you want to audit:",
        "To audit dropping a custom classification instance, use the following query:",
        "Was this page helpful?",
        "On this page",
        "Related content"
    ]
}